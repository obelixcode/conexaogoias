<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test News Data</title>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyBvQvQvQvQvQvQvQvQvQvQvQvQvQvQvQvQ",
            authDomain: "aconexaogoias.firebaseapp.com",
            projectId: "aconexaogoias",
            storageBucket: "aconexaogoias.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:abcdef123456789"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        async function createTestNews() {
            try {
                console.log('Creating test news...');
                
                const newsData = {
                    title: "Teste de Notícia",
                    subtitle: "Esta é uma notícia de teste para verificar se o sistema está funcionando corretamente.",
                    content: "<p>Este é o conteúdo da notícia de teste. Aqui podemos verificar se o sistema está funcionando corretamente.</p>",
                    coverImage: "https://via.placeholder.com/800x400/3B82F6/FFFFFF?text=Teste",
                    categoryId: "test-category-id",
                    author: "Admin",
                    tags: ["teste", "sistema"],
                    slug: "teste-de-noticia",
                    isPublished: true,
                    isFeatured: true,
                    featuredPosition: 1,
                    views: 0,
                    createdAt: serverTimestamp(),
                    updatedAt: serverTimestamp(),
                    publishedAt: serverTimestamp()
                };

                const docRef = await addDoc(collection(db, 'news'), newsData);
                console.log('News created with ID:', docRef.id);
                
                // Create test category
                const categoryData = {
                    name: "Teste",
                    slug: "teste",
                    description: "Categoria de teste",
                    color: "#3B82F6",
                    isActive: true,
                    order: 1,
                    createdAt: serverTimestamp(),
                    updatedAt: serverTimestamp()
                };

                const categoryRef = await addDoc(collection(db, 'categories'), categoryData);
                console.log('Category created with ID:', categoryRef.id);
                
                // Update news with correct category ID
                await addDoc(collection(db, 'news'), {
                    ...newsData,
                    categoryId: categoryRef.id,
                    title: "Notícia com Categoria Correta"
                });
                
                console.log('Test data created successfully!');
                
            } catch (error) {
                console.error('Error creating test data:', error);
            }
        }

        // Add button to create test data
        document.addEventListener('DOMContentLoaded', () => {
            const button = document.createElement('button');
            button.textContent = 'Criar Dados de Teste';
            button.style.cssText = 'padding: 10px 20px; font-size: 16px; background: #3B82F6; color: white; border: none; border-radius: 5px; cursor: pointer;';
            button.onclick = createTestNews;
            document.body.appendChild(button);
        });
    </script>
</head>
<body>
    <h1>Test News Data</h1>
    <p>Clique no botão abaixo para criar dados de teste no Firebase.</p>
</body>
</html>
