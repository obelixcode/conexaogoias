(()=>{var a={};a.id=5475,a.ids=[5475],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14985:a=>{"use strict";a.exports=require("dns")},17281:(a,b,c)=>{"use strict";c.d(b,{a:()=>d});let d={siteName:"Conex\xe3o Goi\xe1s",siteDescription:"Portal de not\xedcias de Goi\xe1s. Informa\xe7\xe3o confi\xe1vel e atualizada.",siteUrl:"https://conexaogoias.com",contactEmail:"contato@conexaogoias.com",adminEmail:"admin@conexaogoias.com",phone1:"(62) 99999-9999",phone2:"(62) 3333-3333",address:"Rua das Flores, 123\nCentro - Goi\xe2nia/GO",socialMedia:{facebook:"https://facebook.com/conexaogoias",twitter:"https://twitter.com/conexaogoias",instagram:"https://instagram.com/conexaogoias",youtube:"https://youtube.com/@conexaogoias",whatsapp:"https://wa.me/5562999999999"},twitterHandle:"@conexaogoias",foundingYear:new Date().getFullYear(),faviconUrl:"",logoUrl:"",footerLogoUrl:"",createdAt:new Date,updatedAt:new Date}},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:a=>{"use strict";a.exports=require("process")},21820:a=>{"use strict";a.exports=require("os")},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29021:a=>{"use strict";a.exports=require("fs")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:a=>{"use strict";a.exports=require("path")},34631:a=>{"use strict";a.exports=require("tls")},36435:(a,b,c)=>{"use strict";c.d(b,{M:()=>h});var d=c(33720),e=c(44979);let f="categories",g="news";class h{static async createCategory(a){try{if(await this.getCategoryBySlug(a.slug))throw Error("J\xe1 existe uma categoria com este slug");return(await (0,d.gS)((0,d.rJ)(e.db,f),{name:a.name,slug:a.slug,color:a.color,description:a.description||"",order:a.order,isActive:a.isActive,createdAt:(0,d.O5)(),updatedAt:(0,d.O5)()})).id}catch(a){if(console.error("Create category error:",a),a instanceof Error&&a.message.includes("slug"))throw a;throw Error("Erro ao criar categoria")}}static async updateCategory(a,b){try{if(b.slug){let c=await this.getCategoryBySlug(b.slug);if(c&&c.id!==a)throw Error("J\xe1 existe uma categoria com este slug")}await (0,d.mZ)((0,d.H9)(e.db,f,a),{...b,updatedAt:(0,d.O5)()})}catch(a){if(console.error("Update category error:",a),a instanceof Error&&a.message.includes("slug"))throw a;throw Error("Erro ao atualizar categoria")}}static async deleteCategory(a){try{let b=(0,d.P)((0,d.rJ)(e.db,g),(0,d._M)("categoryId","==",a));if(!(await (0,d.GG)(b)).empty)throw Error("N\xe3o \xe9 poss\xedvel excluir categoria que possui not\xedcias");await (0,d.kd)((0,d.H9)(e.db,f,a))}catch(a){if(console.error("Delete category error:",a),a instanceof Error&&a.message.includes("not\xedcias"))throw a;throw Error("Erro ao excluir categoria")}}static async getCategoryById(a){try{let b=await (0,d.x7)((0,d.H9)(e.db,f,a));if(!b.exists())return null;let c=b.data();return{id:b.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date}}catch(a){throw console.error("Get category by ID error:",a),Error("Erro ao buscar categoria")}}static async getCategoryBySlug(a){try{let b=(0,d.P)((0,d.rJ)(e.db,f),(0,d._M)("slug","==",a)),c=await (0,d.GG)(b);if(c.empty)return null;let g=c.docs[0],h=g.data();return{id:g.id,...h,createdAt:h.createdAt?.toDate()||new Date,updatedAt:h.updatedAt?.toDate()||new Date}}catch(a){throw console.error("Get category by slug error:",a),Error("Erro ao buscar categoria")}}static async getAllCategories(){try{let a;try{let b=(0,d.P)((0,d.rJ)(e.db,f),(0,d.My)("order","asc"));a=await (0,d.GG)(b)}catch(b){console.warn("OrderBy failed, fetching without order:",b),a=await (0,d.GG)((0,d.rJ)(e.db,f))}return a.docs.map(a=>{let b=a.data();return{id:a.id,...b,createdAt:b.createdAt?.toDate()||new Date,updatedAt:b.updatedAt?.toDate()||new Date}}).sort((a,b)=>(a.order||0)-(b.order||0))}catch(a){throw console.error("Get all categories error:",a),Error("Erro ao buscar categorias")}}static async getActiveCategories(){try{let a;try{let b=(0,d.P)((0,d.rJ)(e.db,f),(0,d._M)("isActive","==",!0),(0,d.My)("order","asc"));a=await (0,d.GG)(b)}catch(c){console.warn("OrderBy failed for active categories, fetching without order:",c);let b=(0,d.P)((0,d.rJ)(e.db,f),(0,d._M)("isActive","==",!0));a=await (0,d.GG)(b)}return a.docs.map(a=>{let b=a.data();return{id:a.id,...b,createdAt:b.createdAt?.toDate()||new Date,updatedAt:b.updatedAt?.toDate()||new Date}}).sort((a,b)=>(a.order||0)-(b.order||0))}catch(a){throw console.error("Get active categories error:",a),Error("Erro ao buscar categorias ativas")}}static async getCategoriesWithCount(){try{let a=await this.getAllCategories(),b=[];for(let c of a){let a=(0,d.P)((0,d.rJ)(e.db,g),(0,d._M)("categoryId","==",c.id),(0,d._M)("isPublished","==",!0)),f=await (0,d.GG)(a);b.push({...c,newsCount:f.size})}return b}catch(a){throw console.error("Get categories with count error:",a),Error("Erro ao buscar categorias com contagem")}}static async updateCategoryOrder(a){try{let b=a.map((a,b)=>(0,d.mZ)((0,d.H9)(e.db,f,a),{order:b+1,updatedAt:(0,d.O5)()}));await Promise.all(b)}catch(a){throw console.error("Update category order error:",a),Error("Erro ao atualizar ordem das categorias")}}static generateSlug(a){return a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}static async isSlugUnique(a,b){try{let c=(0,d.P)((0,d.rJ)(e.db,f),(0,d._M)("slug","==",a)),g=await (0,d.GG)(c);if(b)return g.docs.every(a=>a.id!==b);return g.empty}catch(a){throw console.error("Check slug unique error:",a),Error("Erro ao verificar slug")}}static async getCategoryStats(){try{let a=await (0,d.GG)((0,d.rJ)(e.db,f)),b=await (0,d.GG)((0,d.rJ)(e.db,g)),c=a.docs.map(a=>({id:a.id,...a.data()})),h=b.docs.map(a=>({id:a.id,...a.data()})),i=c.filter(a=>a.isActive),j=c.filter(a=>h.some(b=>b.categoryId===a.id)),k=c.map(a=>{let b=h.filter(b=>b.categoryId===a.id),c=b.reduce((a,b)=>a+(b.views||0),0);return{categoryName:a.name,newsCount:b.length,views:c}}).sort((a,b)=>b.newsCount-a.newsCount).slice(0,10);return{totalCategories:c.length,activeCategories:i.length,categoriesWithNews:j.length,topCategories:k}}catch(a){throw console.error("Get category stats error:",a),Error("Erro ao buscar estat\xedsticas das categorias")}}}},39582:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{resolveManifest:function(){return g},resolveRobots:function(){return e},resolveRouteData:function(){return h},resolveSitemap:function(){return f}});let d=c(60096);function e(a){let b="";for(let c of Array.isArray(a.rules)?a.rules:[a.rules]){for(let a of(0,d.resolveArray)(c.userAgent||["*"]))b+=`User-Agent: ${a}
`;if(c.allow)for(let a of(0,d.resolveArray)(c.allow))b+=`Allow: ${a}
`;if(c.disallow)for(let a of(0,d.resolveArray)(c.disallow))b+=`Disallow: ${a}
`;c.crawlDelay&&(b+=`Crawl-delay: ${c.crawlDelay}
`),b+="\n"}return a.host&&(b+=`Host: ${a.host}
`),a.sitemap&&(0,d.resolveArray)(a.sitemap).forEach(a=>{b+=`Sitemap: ${a}
`}),b}function f(a){let b=a.some(a=>Object.keys(a.alternates??{}).length>0),c=a.some(a=>{var b;return!!(null==(b=a.images)?void 0:b.length)}),d=a.some(a=>{var b;return!!(null==(b=a.videos)?void 0:b.length)}),e="";for(let i of(e+='<?xml version="1.0" encoding="UTF-8"?>\n',e+='<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"',c&&(e+=' xmlns:image="http://www.google.com/schemas/sitemap-image/1.1"'),d&&(e+=' xmlns:video="http://www.google.com/schemas/sitemap-video/1.1"'),b?e+=' xmlns:xhtml="http://www.w3.org/1999/xhtml">\n':e+=">\n",a)){var f,g,h;e+="<url>\n",e+=`<loc>${i.url}</loc>
`;let a=null==(f=i.alternates)?void 0:f.languages;if(a&&Object.keys(a).length)for(let b in a)e+=`<xhtml:link rel="alternate" hreflang="${b}" href="${a[b]}" />
`;if(null==(g=i.images)?void 0:g.length)for(let a of i.images)e+=`<image:image>
<image:loc>${a}</image:loc>
</image:image>
`;if(null==(h=i.videos)?void 0:h.length)for(let a of i.videos)e+=["<video:video>",`<video:title>${a.title}</video:title>`,`<video:thumbnail_loc>${a.thumbnail_loc}</video:thumbnail_loc>`,`<video:description>${a.description}</video:description>`,a.content_loc&&`<video:content_loc>${a.content_loc}</video:content_loc>`,a.player_loc&&`<video:player_loc>${a.player_loc}</video:player_loc>`,a.duration&&`<video:duration>${a.duration}</video:duration>`,a.view_count&&`<video:view_count>${a.view_count}</video:view_count>`,a.tag&&`<video:tag>${a.tag}</video:tag>`,a.rating&&`<video:rating>${a.rating}</video:rating>`,a.expiration_date&&`<video:expiration_date>${a.expiration_date}</video:expiration_date>`,a.publication_date&&`<video:publication_date>${a.publication_date}</video:publication_date>`,a.family_friendly&&`<video:family_friendly>${a.family_friendly}</video:family_friendly>`,a.requires_subscription&&`<video:requires_subscription>${a.requires_subscription}</video:requires_subscription>`,a.live&&`<video:live>${a.live}</video:live>`,a.restriction&&`<video:restriction relationship="${a.restriction.relationship}">${a.restriction.content}</video:restriction>`,a.platform&&`<video:platform relationship="${a.platform.relationship}">${a.platform.content}</video:platform>`,a.uploader&&`<video:uploader${a.uploader.info&&` info="${a.uploader.info}"`}>${a.uploader.content}</video:uploader>`,`</video:video>
`].filter(Boolean).join("\n");if(i.lastModified){let a=i.lastModified instanceof Date?i.lastModified.toISOString():i.lastModified;e+=`<lastmod>${a}</lastmod>
`}i.changeFrequency&&(e+=`<changefreq>${i.changeFrequency}</changefreq>
`),"number"==typeof i.priority&&(e+=`<priority>${i.priority}</priority>
`),e+="</url>\n"}return e+"</urlset>\n"}function g(a){return JSON.stringify(a)}function h(a,b){return"robots"===b?e(a):"sitemap"===b?f(a):"manifest"===b?g(a):""}},44870:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},44979:(a,b,c)=>{"use strict";c.d(b,{IG:()=>j,db:()=>i});var d=c(47784),e=c(3644),f=c(33720),g=c(92435);let h=(0,d.Wp)({apiKey:"AIzaSyBjdbOl0xyru5TfEQtu2iC2wqIz3QvrRQM",authDomain:"aconexaogoias.firebaseapp.com",projectId:"aconexaogoias",storageBucket:"aconexaogoias.firebasestorage.app",messagingSenderId:"6509088743",appId:"1:6509088743:web:f1866c676e18c53204f742"});(0,e.xI)(h);let i=(0,f.aU)(h),j=(0,g.c7)(h)},55511:a=>{"use strict";a.exports=require("crypto")},56032:(a,b,c)=>{"use strict";c.d(b,{h:()=>j});var d=c(44979),e=c(33720),f=c(92435),g=c(17281);let h="settings",i="site";class j{static async getSettings(){try{let a=(0,e.H9)(d.db,h,i),b=await (0,e.x7)(a);if(b.exists()){let a=b.data();return{...g.a,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||new Date}}return g.a}catch(a){return console.error("Erro ao buscar configura\xe7\xf5es:",a),g.a}}static async updateSettings(a){try{let b=(0,e.H9)(d.db,h,i),c={...a,updatedAt:new Date};(await (0,e.x7)(b)).exists()?await (0,e.mZ)(b,c):await (0,e.BN)(b,{...g.a,...c,createdAt:new Date})}catch(a){throw console.error("Erro ao atualizar configura\xe7\xf5es:",a),Error("Falha ao salvar configura\xe7\xf5es")}}static async uploadFavicon(a){try{if(!a.type.startsWith("image/"))throw Error("Arquivo deve ser uma imagem");if(a.size>1048576)throw Error("Arquivo deve ter no m\xe1ximo 1MB");let b=Date.now(),c=`favicon-${b}.${a.name.split(".").pop()}`,e=(0,f.KR)(d.IG,`favicons/${c}`);return await (0,f.D)(e,a),await (0,f.qk)(e)}catch(a){throw console.error("Erro ao fazer upload do favicon:",a),Error("Falha ao fazer upload do favicon")}}static async deleteFavicon(a){try{if(!a)return;let b=new URL(a).pathname.match(/\/o\/(.+?)\?/);if(b){let a=decodeURIComponent(b[1]),c=(0,f.KR)(d.IG,a);await (0,f.XR)(c)}}catch(a){console.error("Erro ao deletar favicon antigo:",a)}}static async uploadLogo(a){try{if(!a.type.startsWith("image/"))throw Error("Arquivo deve ser uma imagem");if(a.size>2097152)throw Error("Arquivo deve ter no m\xe1ximo 2MB");let b=Date.now(),c=`logo_${b}.${a.name.split(".").pop()}`,e=(0,f.KR)(d.IG,`logos/${c}`);return await (0,f.D)(e,a),await (0,f.qk)(e)}catch(a){throw console.error("Erro ao fazer upload da logo:",a),a}}static async deleteLogo(a){try{if(!a)return;let b=new URL(a).pathname.match(/\/o\/(.+?)\?/);if(b){let a=decodeURIComponent(b[1]),c=(0,f.KR)(d.IG,a);await (0,f.XR)(c)}}catch(a){console.error("Erro ao deletar logo antiga:",a)}}static async updateFavicon(a){try{let b=await this.getSettings();b.faviconUrl&&await this.deleteFavicon(b.faviconUrl);let c=await this.uploadFavicon(a);return await this.updateSettings({faviconUrl:c}),c}catch(a){throw console.error("Erro ao atualizar favicon:",a),a}}static async updateLogo(a){try{let b=await this.getSettings();b.logoUrl&&await this.deleteLogo(b.logoUrl);let c=await this.uploadLogo(a);return await this.updateSettings({logoUrl:c}),c}catch(a){throw console.error("Erro ao atualizar logo:",a),a}}static async updateFooterLogo(a){try{let b=await this.getSettings();b.footerLogoUrl&&await this.deleteLogo(b.footerLogoUrl);let c=await this.uploadLogo(a);return await this.updateSettings({footerLogoUrl:c}),c}catch(a){throw console.error("Erro ao atualizar logo do footer:",a),a}}static isValidUrl(a){try{return new URL(a),!0}catch{return!1}}static isValidEmail(a){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)}static isValidPhone(a){return/^\(\d{2}\)\s\d{4,5}-\d{4}$/.test(a)}}},60096:(a,b)=>{"use strict";function c(a){return Array.isArray(a)?a:[a]}function d(a){if(null!=a)return c(a)}function e(a){let b;if("string"==typeof a)try{b=(a=new URL(a)).origin}catch{}return b}Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getOrigin:function(){return e},resolveArray:function(){return c},resolveAsArrayOrUndefined:function(){return d}})},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:a=>{"use strict";a.exports=require("http2")},74075:a=>{"use strict";a.exports=require("zlib")},78335:()=>{},79551:a=>{"use strict";a.exports=require("url")},81630:a=>{"use strict";a.exports=require("http")},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},91645:a=>{"use strict";a.exports=require("net")},94735:a=>{"use strict";a.exports=require("events")},96487:()=>{},97310:(a,b,c)=>{"use strict";c.r(b),c.d(b,{handler:()=>K,patchFetch:()=>J,routeModule:()=>F,serverHooks:()=>I,workAsyncStorage:()=>G,workUnitAsyncStorage:()=>H});var d={};c.r(d),c.d(d,{default:()=>B,dynamic:()=>z,revalidate:()=>A});var e={};c.r(e),c.d(e,{GET:()=>E,dynamic:()=>z,revalidate:()=>A});var f=c(95736),g=c(9117),h=c(4044),i=c(39326),j=c(32324),k=c(261),l=c(54290),m=c(85328),n=c(38928),o=c(46595),p=c(3421),q=c(17679),r=c(41681),s=c(63446),t=c(86439),u=c(51356),v=c(10641),w=c(32314),x=c(36435),y=c(56032);let z="force-static",A=3600;async function B(){let a=process.env.NEXT_PUBLIC_APP_URL||"http://localhost:3000";try{let[b,c,d]=await Promise.all([y.h.getSettings(),w.b.getRecentNews(1e3),x.M.getActiveCategories()]),e=b.siteUrl||a,f=[{url:e,lastModified:new Date,changeFrequency:"hourly",priority:1},{url:`${e}/sobre-nos`,lastModified:new Date,changeFrequency:"monthly",priority:.8},{url:`${e}/contato`,lastModified:new Date,changeFrequency:"monthly",priority:.8},{url:`${e}/politica-privacidade`,lastModified:new Date,changeFrequency:"yearly",priority:.5},{url:`${e}/termos-uso`,lastModified:new Date,changeFrequency:"yearly",priority:.5}],g=c.map(a=>({url:`${e}/noticia/${a.slug}`,lastModified:a.updatedAt,changeFrequency:"weekly",priority:a.isFeatured?.9:.7})),h=d.map(a=>({url:`${e}/categoria/${a.slug}`,lastModified:new Date,changeFrequency:"daily",priority:.8}));return[...f,...g,...h]}catch(b){return console.error("Error generating sitemap:",b),[{url:a,lastModified:new Date,changeFrequency:"hourly",priority:1}]}}var C=c(39582);let D={...d}.default;if("function"!=typeof D)throw Error('Default export is missing in "/Users/rafaelsalles/conexaogoias/src/app/sitemap.ts"');async function E(a,b){let{__metadata_id__:c,...d}=await b.params||{},e=!!c&&c.endsWith(".xml");if(c&&!e)return new v.NextResponse("Not Found",{status:404});let f=c&&e?c.slice(0,-4):void 0,g=await D({id:f}),h=(0,C.resolveRouteData)(g,"sitemap");return new v.NextResponse(h,{headers:{"Content-Type":"application/xml","Cache-Control":"public, max-age=0, must-revalidate"}})}let F=new f.AppRouteRouteModule({definition:{kind:g.RouteKind.APP_ROUTE,page:"/sitemap.xml/route",pathname:"/sitemap.xml",filename:"sitemap",bundlePath:"app/sitemap.xml/route"},distDir:".next",relativeProjectDir:"",resolvedPagePath:"next-metadata-route-loader?filePath=%2FUsers%2Frafaelsalles%2Fconexaogoias%2Fsrc%2Fapp%2Fsitemap.ts&isDynamicRouteExtension=1!?__next_metadata_route__",nextConfigOutput:"standalone",userland:e}),{workAsyncStorage:G,workUnitAsyncStorage:H,serverHooks:I}=F;function J(){return(0,h.patchFetch)({workAsyncStorage:G,workUnitAsyncStorage:H})}async function K(a,b,c){var d;let e="/sitemap.xml/route";"/index"===e&&(e="/");let f=await F.prepare(a,b,{srcPage:e,multiZoneDraftMode:!1});if(!f)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:h,params:v,nextConfig:w,isDraftMode:x,prerenderManifest:y,routerServerContext:z,isOnDemandRevalidate:A,revalidateOnlyGenerated:B,resolvedPathname:C}=f,D=(0,k.normalizeAppPath)(e),E=!!(y.dynamicRoutes[D]||y.routes[C]);if(E&&!x){let a=!!y.routes[C],b=y.dynamicRoutes[D];if(b&&!1===b.fallback&&!a)throw new t.NoFallbackError}let G=null;!E||F.isDev||x||(G="/index"===(G=C)?"/":G);let H=!0===F.isDev||!E,I=E&&!H,J=a.method||"GET",K=(0,j.getTracer)(),L=K.getActiveScopeSpan(),M={params:v,prerenderManifest:y,renderOpts:{experimental:{cacheComponents:!!w.experimental.cacheComponents,authInterrupts:!!w.experimental.authInterrupts},supportsDynamicResponse:H,incrementalCache:(0,i.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:null==(d=w.experimental)?void 0:d.cacheLife,isRevalidate:I,waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:void 0,onInstrumentationRequestError:(b,c,d)=>F.onRequestError(a,b,d,z)},sharedContext:{buildId:h}},N=new l.NodeNextRequest(a),O=new l.NodeNextResponse(b),P=m.NextRequestAdapter.fromNodeNextRequest(N,(0,m.signalFromNodeResponse)(b));try{let d=async c=>F.handle(P,M).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=K.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==n.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${J} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${J} ${a.url}`)}),f=async f=>{var h,j;let k=async({previousCacheEntry:g})=>{try{if(!(0,i.getRequestMeta)(a,"minimalMode")&&A&&B&&!g)return b.statusCode=404,b.setHeader("x-nextjs-cache","REVALIDATED"),b.end("This page could not be found"),null;let e=await d(f);a.fetchMetrics=M.renderOpts.fetchMetrics;let h=M.renderOpts.pendingWaitUntil;h&&c.waitUntil&&(c.waitUntil(h),h=void 0);let j=M.renderOpts.collectedTags;if(!E)return await (0,p.I)(N,O,e,M.renderOpts.pendingWaitUntil),null;{let a=await e.blob(),b=(0,q.toNodeOutgoingHttpHeaders)(e.headers);j&&(b[s.NEXT_CACHE_TAGS_HEADER]=j),!b["content-type"]&&a.type&&(b["content-type"]=a.type);let c=void 0!==M.renderOpts.collectedRevalidate&&!(M.renderOpts.collectedRevalidate>=s.INFINITE_CACHE)&&M.renderOpts.collectedRevalidate,d=void 0===M.renderOpts.collectedExpire||M.renderOpts.collectedExpire>=s.INFINITE_CACHE?void 0:M.renderOpts.collectedExpire;return{value:{kind:u.CachedRouteKind.APP_ROUTE,status:e.status,body:Buffer.from(await a.arrayBuffer()),headers:b},cacheControl:{revalidate:c,expire:d}}}}catch(b){throw(null==g?void 0:g.isStale)&&await F.onRequestError(a,b,{routerKind:"App Router",routePath:e,routeType:"route",revalidateReason:(0,o.c)({isRevalidate:I,isOnDemandRevalidate:A})},z),b}},l=await F.handleResponse({req:a,nextConfig:w,cacheKey:G,routeKind:g.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:y,isRoutePPREnabled:!1,isOnDemandRevalidate:A,revalidateOnlyGenerated:B,responseGenerator:k,waitUntil:c.waitUntil});if(!E)return null;if((null==l||null==(h=l.value)?void 0:h.kind)!==u.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==l||null==(j=l.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,i.getRequestMeta)(a,"minimalMode")||b.setHeader("x-nextjs-cache",A?"REVALIDATED":l.isMiss?"MISS":l.isStale?"STALE":"HIT"),x&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let m=(0,q.fromNodeOutgoingHttpHeaders)(l.value.headers);return(0,i.getRequestMeta)(a,"minimalMode")&&E||m.delete(s.NEXT_CACHE_TAGS_HEADER),!l.cacheControl||b.getHeader("Cache-Control")||m.get("Cache-Control")||m.set("Cache-Control",(0,r.getCacheControlHeader)(l.cacheControl)),await (0,p.I)(N,O,new Response(l.value.body,{headers:m,status:l.value.status||200})),null};L?await f(L):await K.withPropagatedContext(a.headers,()=>K.trace(n.BaseServerSpan.handleRequest,{spanName:`${J} ${a.url}`,kind:j.SpanKind.SERVER,attributes:{"http.method":J,"http.target":a.url}},f))}catch(b){if(b instanceof t.NoFallbackError||await F.onRequestError(a,b,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,o.c)({isRevalidate:I,isOnDemandRevalidate:A})}),E)throw b;return await (0,p.I)(N,O,new Response(null,{status:500})),null}}}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[4586,6912,1692,2314],()=>b(b.s=97310));module.exports=c})();