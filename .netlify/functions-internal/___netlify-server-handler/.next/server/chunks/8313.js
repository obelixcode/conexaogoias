"use strict";exports.id=8313,exports.ids=[8313],exports.modules={35284:(a,b,c)=>{c.d(b,{$:()=>i});var d=c(21124);c(38301);var e=c(96425),f=c(26691),g=c(44943);let h=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function i({className:a,variant:b,size:c,asChild:f=!1,...i}){let j=f?e.DX:"button";return(0,d.jsx)(j,{"data-slot":"button",className:(0,g.cn)(h({variant:b,size:c,className:a})),...i})}},44943:(a,b,c)=>{c.d(b,{cn:()=>f});var d=c(43249),e=c(58829);function f(...a){return(0,e.QP)((0,d.$)(a))}},45920:(a,b,c)=>{c.d(b,{b:()=>h});var d=c(67402),e=c(13737);let f="news",g="categories";class h{static async createNews(a,b){try{return(await (0,d.gS)((0,d.rJ)(e.db,f),{title:a.title,subtitle:a.subtitle,content:a.content,coverImage:b,categoryId:a.categoryId,author:a.author,tags:a.tags.split(",").map(a=>a.trim()).filter(a=>a),slug:a.slug,createdAt:(0,d.O5)(),updatedAt:(0,d.O5)(),publishedAt:a.isPublished?(0,d.O5)():null,isPublished:a.isPublished,isFeatured:a.isFeatured,featuredPosition:a.featuredPosition||null,views:0,metaDescription:a.metaDescription||"",metaKeywords:a.metaKeywords?.split(",").map(a=>a.trim()).filter(a=>a)||[]})).id}catch(a){throw console.error("Create news error:",a),Error("Erro ao criar not\xedcia")}}static async updateNews(a,b,c){try{let g={updatedAt:(0,d.O5)()};void 0!==b.title&&(g.title=b.title),void 0!==b.subtitle&&(g.subtitle=b.subtitle),void 0!==b.content&&(g.content=b.content),void 0!==b.categoryId&&(g.categoryId=b.categoryId),void 0!==b.author&&(g.author=b.author),void 0!==b.slug&&(g.slug=b.slug),void 0!==b.isPublished&&(g.isPublished=b.isPublished),void 0!==b.isFeatured&&(g.isFeatured=b.isFeatured),void 0!==b.featuredPosition&&null!==b.featuredPosition&&(g.featuredPosition=b.featuredPosition),void 0!==b.metaDescription&&(g.metaDescription=b.metaDescription),c&&(g.coverImage=c),b.tags&&(g.tags=b.tags.split(",").map(a=>a.trim()).filter(a=>a)),b.metaKeywords&&(g.metaKeywords=b.metaKeywords.split(",").map(a=>a.trim()).filter(a=>a)),b.isPublished&&!b.isPublished&&(g.publishedAt=(0,d.O5)()),await (0,d.mZ)((0,d.H9)(e.db,f,a),g)}catch(a){throw console.error("Update news error:",a),Error("Erro ao atualizar not\xedcia")}}static async deleteNews(a){try{await (0,d.kd)((0,d.H9)(e.db,f,a))}catch(a){throw console.error("Delete news error:",a),Error("Erro ao excluir not\xedcia")}}static async getNewsById(a){try{let b=await (0,d.x7)((0,d.H9)(e.db,f,a));if(!b.exists())return null;let c=b.data();return{id:b.id,...c,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date,publishedAt:c.publishedAt?.toDate()}}catch(a){throw console.error("Get news by ID error:",a),Error("Erro ao buscar not\xedcia")}}static async getNewsBySlug(a){try{console.log("Searching for news with slug:",a);let b=(0,d.P)((0,d.rJ)(e.db,f),(0,d._M)("slug","==",a),(0,d._M)("isPublished","==",!0)),c=await (0,d.GG)(b);if(console.log("Found news docs:",c.docs.length),c.empty)return console.log("No news found with slug:",a),null;let h=c.docs[0],i=h.data();console.log("News data:",{id:h.id,title:i.title,slug:i.slug,categoryId:i.categoryId});let j=await (0,d.x7)((0,d.H9)(e.db,g,i.categoryId)),k=j.data();return console.log("Category data:",k),{id:h.id,...i,createdAt:i.createdAt?.toDate()||new Date,updatedAt:i.updatedAt?.toDate()||new Date,publishedAt:i.publishedAt?.toDate(),category:{id:j.id,name:k?.name||"",slug:k?.slug||"",color:k?.color||"#000000"}}}catch(a){throw console.error("Get news by slug error:",a),Error("Erro ao buscar not\xedcia")}}static async incrementViews(a){try{await (0,d.mZ)((0,d.H9)(e.db,f,a),{views:(0,d.GV)(1)})}catch(a){console.error("Increment views error:",a)}}static async getFeaturedNews(){try{let a=(0,d.P)((0,d.rJ)(e.db,f),(0,d._M)("isFeatured","==",!0),(0,d._M)("isPublished","==",!0),(0,d.AB)(10)),b=await (0,d.GG)(a),c=[];for(let a of b.docs){let b=a.data(),f=(await (0,d.x7)((0,d.H9)(e.db,g,b.categoryId))).data();c.push({id:a.id,title:b.title,subtitle:b.subtitle,coverImage:b.coverImage,slug:b.slug,category:{id:b.categoryId,name:f?.name||"Sem categoria",slug:f?.slug||"",color:f?.color||"#000000"},publishedAt:b.publishedAt?.toDate()||new Date,views:b.views||0,position:b.featuredPosition||0})}return c.sort((a,b)=>a.position-b.position).slice(0,5)}catch(a){return console.error("Get featured news error:",a),[]}}static async getNewsByCategory(a,b={page:1,limit:10}){try{let c=(0,d.P)((0,d.rJ)(e.db,g),(0,d._M)("slug","==",a)),h=await (0,d.GG)(c);if(h.empty)return{data:[],pagination:{page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1}};let i=h.docs[0],j=i.data(),k=(0,d.P)((0,d.rJ)(e.db,f),(0,d._M)("categoryId","==",i.id),(0,d._M)("isPublished","==",!0),(0,d.My)("publishedAt","desc"),(0,d.AB)(b.limit)),l=await (0,d.GG)(k),m=[];for(let a of l.docs){let b=a.data();m.push({id:a.id,...b,createdAt:b.createdAt?.toDate()||new Date,updatedAt:b.updatedAt?.toDate()||new Date,publishedAt:b.publishedAt?.toDate(),category:{id:i.id,name:j.name,slug:j.slug,color:j.color}})}return{data:m,pagination:{page:b.page,limit:b.limit,total:m.length,totalPages:Math.ceil(m.length/b.limit),hasNext:m.length===b.limit,hasPrev:b.page>1}}}catch(a){throw console.error("Get news by category error:",a),Error("Erro ao buscar not\xedcias da categoria")}}static async getRecentNews(a=10){try{let b=(0,d.P)((0,d.rJ)(e.db,f),(0,d._M)("isPublished","==",!0),(0,d.My)("publishedAt","desc"),(0,d.AB)(a)),c=await (0,d.GG)(b),h=[];for(let a of c.docs){let b=a.data(),c=await (0,d.x7)((0,d.H9)(e.db,g,b.categoryId)),f=c.data();h.push({id:a.id,...b,createdAt:b.createdAt?.toDate()||new Date,updatedAt:b.updatedAt?.toDate()||new Date,publishedAt:b.publishedAt?.toDate(),category:{id:c.id,name:f?.name||"",slug:f?.slug||"",color:f?.color||"#000000"}})}return h}catch(a){throw console.error("Get recent news error:",a),Error("Erro ao buscar not\xedcias recentes")}}static async getMostReadNews(a=10){try{let b=new Date;b.setDate(b.getDate()-7);let c=(0,d.P)((0,d.rJ)(e.db,f),(0,d._M)("isPublished","==",!0),(0,d._M)("publishedAt",">=",b),(0,d.My)("publishedAt","desc"),(0,d.AB)(2*a)),h=await (0,d.GG)(c),i=[];for(let a of h.docs){let b=a.data(),c=await (0,d.x7)((0,d.H9)(e.db,g,b.categoryId)),f=c.data();i.push({id:a.id,...b,createdAt:b.createdAt?.toDate()||new Date,updatedAt:b.updatedAt?.toDate()||new Date,publishedAt:b.publishedAt?.toDate(),views:b.views||0,category:{id:c.id,name:f?.name||"",slug:f?.slug||"",color:f?.color||"#000000"}})}return i.sort((a,b)=>(b.views||0)-(a.views||0)).slice(0,a)}catch(b){return console.error("Get most read news error:",b),this.getRecentNews(a)}}static async getRelatedNews(a,b=3){try{let c=await this.getNewsById(a);if(!c)return[];let h=(0,d.P)((0,d.rJ)(e.db,f),(0,d._M)("isPublished","==",!0),(0,d._M)("categoryId","==",c.categoryId),(0,d.My)("publishedAt","desc")),i=await (0,d.GG)(h),j=[];for(let b of i.docs){if(b.id===a)continue;let f=b.data(),h=f.tags||[],i=c.tags.filter(a=>h.includes(a)).length/Math.max(c.tags.length,h.length),k=(await (0,d.x7)((0,d.H9)(e.db,g,f.categoryId))).data();j.push({id:b.id,title:f.title,coverImage:f.coverImage,slug:f.slug,categoryName:k?.name||"",publishedAt:f.publishedAt?.toDate()||new Date,similarity:i})}return j.sort((a,b)=>b.similarity-a.similarity).slice(0,b)}catch(a){throw console.error("Get related news error:",a),Error("Erro ao buscar not\xedcias relacionadas")}}static async searchNews(a,b){try{let c=(0,d.P)((0,d.rJ)(e.db,f),(0,d._M)("isPublished","==",!0));a.category&&(c=(0,d.P)(c,(0,d._M)("categoryId","==",a.category))),void 0!==a.isFeatured&&(c=(0,d.P)(c,(0,d._M)("isFeatured","==",a.isFeatured))),c=(0,d.P)(c,(0,d.My)("publishedAt","desc")),c=(0,d.P)(c,(0,d.AB)(b.limit));let h=await (0,d.GG)(c),i=[];for(let a of h.docs){let b=a.data(),c=await (0,d.x7)((0,d.H9)(e.db,g,b.categoryId)),f=c.data();i.push({id:a.id,...b,createdAt:b.createdAt?.toDate()||new Date,updatedAt:b.updatedAt?.toDate()||new Date,publishedAt:b.publishedAt?.toDate(),category:{id:c.id,name:f?.name||"",slug:f?.slug||"",color:f?.color||"#000000"}})}let j=i;if(a.query){let b=a.query.toLowerCase();j=i.filter(a=>a.title.toLowerCase().includes(b)||a.subtitle.toLowerCase().includes(b)||a.content.toLowerCase().includes(b))}return{data:j,pagination:{page:b.page,limit:b.limit,total:j.length,totalPages:Math.ceil(j.length/b.limit),hasNext:j.length===b.limit,hasPrev:b.page>1}}}catch(a){throw console.error("Search news error:",a),Error("Erro ao buscar not\xedcias")}}static async getAllNews(){try{let a=(0,d.P)((0,d.rJ)(e.db,f),(0,d.My)("createdAt","desc")),b=await (0,d.GG)(a),c=[];for(let a of b.docs){let b=a.data();c.push({id:a.id,...b,createdAt:b.createdAt?.toDate()||new Date,updatedAt:b.updatedAt?.toDate()||new Date,publishedAt:b.publishedAt?.toDate()})}return c}catch(a){throw console.error("Get all news error:",a),Error("Erro ao buscar todas as not\xedcias")}}static async getNewsStats(){try{let a=await (0,d.GG)((0,d.rJ)(e.db,f)),b=await (0,d.GG)((0,d.rJ)(e.db,g)),c=a.docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate()||new Date,updatedAt:a.data().updatedAt?.toDate()||new Date,publishedAt:a.data().publishedAt?.toDate()})),h=b.docs.map(a=>({id:a.id,...a.data()})),i=c.filter(a=>a.isPublished),j=c.filter(a=>!a.isPublished),k=c.reduce((a,b)=>a+(b.views||0),0),l=h.map(a=>({categoryName:a.name||"Unknown",count:c.filter(b=>b.categoryId===a.id).length})),m=i.sort((a,b)=>(b.publishedAt?.getTime()||0)-(a.publishedAt?.getTime()||0)).slice(0,10);return{totalNews:c.length,publishedNews:i.length,draftNews:j.length,totalViews:k,newsByCategory:l,recentNews:m}}catch(a){throw console.error("Get news stats error:",a),Error("Erro ao buscar estat\xedsticas")}}}}};