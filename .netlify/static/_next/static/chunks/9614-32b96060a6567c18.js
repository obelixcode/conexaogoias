"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9614],{9614:(e,r,s)=>{s.r(r),s.d(r,{Editor:()=>O});var n=s(95155),i=s(46098),t=s(10699),l=s(63660),a=s(56135),c=s(19148),o=s(43419),d=s(8624),u=s(21670),h=s(12751),g=s(77004),m=s(3998),f=s(67048),x=s(44615),v=s(3829),j=s(69602),A=s(9602),p=s(45833),b=s(57456),k=s(70355),w=s(80003),C=s(97239),N=s(5789),y=s(64813),z=s(40586),$=s(56860),E=s(66685),L=s(50859),T=s(30924),H=s(42196),R=s(39926),M=s(36458),S=s(40949),U=s(90651),q=s(37168),F=s(53419),I=s(93870),_=s(12115);function B(e){let{content:r="",onChange:s,placeholder:I="Comece a escrever...",className:B=""}=e,[O,Y]=(0,_.useState)(!1),{safeCreateElement:D,safeAppendChild:G,safeRemoveElement:J}=(0,F.h)(),P=(0,i.hG)({immediatelyRender:!1,extensions:[t.A.configure({heading:{levels:[1,2,3]},link:!1}),l.Ay.configure({HTMLAttributes:{class:"max-w-full h-auto rounded-lg"}}),a.Ay.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 underline hover:text-blue-800"}}),c.A.configure({types:["heading","paragraph"]}),o.A,d.xJ,u.A,h.Ay.configure({multicolor:!0}),g.A.configure({placeholder:I})],content:r,onUpdate:e=>{let{editor:r}=e;null==s||s(r.getHTML())},editorProps:{attributes:{class:"prose prose-lg max-w-none focus:outline-none min-h-[300px] p-4"}}});(0,_.useRef)(null),(0,_.useEffect)(()=>()=>{if(P&&!P.isDestroyed)try{P.off("update"),P.off("selectionUpdate"),P.off("transaction"),P.destroy()}catch(e){console.warn("Error destroying editor:",e)}},[P]);let V=async()=>{var e;if(!(null==(e=document)?void 0:e.body))return;let r=D("input",{type:"file",accept:"image/*",style:"display: none"});if(r)try{G(document.body,r)&&(r.onchange=async e=>{try{var s;let r=null==(s=e.target.files)?void 0:s[0];if(!r)return;let n=q.n.validateImageFile(r);if(!n.isValid)return void alert(n.error);Y(!0);try{let e=await q.n.uploadContentImage(r,e=>{console.log("Upload progress:",e)});null==P||P.chain().focus().setImage({src:e}).run()}catch(e){console.error("Error uploading image:",e),alert("Erro ao fazer upload da imagem")}finally{Y(!1)}}catch(e){console.warn("Error handling file upload:",e)}finally{setTimeout(()=>{J(r)},100)}},r.click())}catch(e){console.warn("Error creating file input:",e),J(r)}};return P?(0,n.jsxs)("div",{className:"border border-gray-300 rounded-lg ".concat(B),children:[(0,n.jsxs)("div",{className:"border-b border-gray-200 p-2 flex flex-wrap gap-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1 border-r border-gray-200 pr-2 mr-2",children:[(0,n.jsx)(m.$,{variant:P.isActive("bold")?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().toggleBold().run(),children:(0,n.jsx)(f.A,{className:"h-4 w-4"})}),(0,n.jsx)(m.$,{variant:P.isActive("italic")?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().toggleItalic().run(),children:(0,n.jsx)(x.A,{className:"h-4 w-4"})}),(0,n.jsx)(m.$,{variant:P.isActive("underline")?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().toggleUnderline().run(),children:(0,n.jsx)(v.A,{className:"h-4 w-4"})}),(0,n.jsx)(m.$,{variant:P.isActive("strike")?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().toggleStrike().run(),children:(0,n.jsx)(j.A,{className:"h-4 w-4"})}),(0,n.jsx)(m.$,{variant:P.isActive("code")?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().toggleCode().run(),children:(0,n.jsx)(A.A,{className:"h-4 w-4"})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 border-r border-gray-200 pr-2 mr-2",children:[(0,n.jsx)(m.$,{variant:P.isActive("heading",{level:1})?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().toggleHeading({level:1}).run(),children:(0,n.jsx)(p.A,{className:"h-4 w-4"})}),(0,n.jsx)(m.$,{variant:P.isActive("heading",{level:2})?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().toggleHeading({level:2}).run(),children:(0,n.jsx)(b.A,{className:"h-4 w-4"})}),(0,n.jsx)(m.$,{variant:P.isActive("heading",{level:3})?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().toggleHeading({level:3}).run(),children:(0,n.jsx)(k.A,{className:"h-4 w-4"})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 border-r border-gray-200 pr-2 mr-2",children:[(0,n.jsx)(m.$,{variant:P.isActive("bulletList")?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().toggleBulletList().run(),children:(0,n.jsx)(w.A,{className:"h-4 w-4"})}),(0,n.jsx)(m.$,{variant:P.isActive("orderedList")?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().toggleOrderedList().run(),children:(0,n.jsx)(C.A,{className:"h-4 w-4"})}),(0,n.jsx)(m.$,{variant:P.isActive("blockquote")?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().toggleBlockquote().run(),children:(0,n.jsx)(N.A,{className:"h-4 w-4"})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 border-r border-gray-200 pr-2 mr-2",children:[(0,n.jsx)(m.$,{variant:P.isActive({textAlign:"left"})?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().setTextAlign("left").run(),children:(0,n.jsx)(y.A,{className:"h-4 w-4"})}),(0,n.jsx)(m.$,{variant:P.isActive({textAlign:"center"})?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().setTextAlign("center").run(),children:(0,n.jsx)(z.A,{className:"h-4 w-4"})}),(0,n.jsx)(m.$,{variant:P.isActive({textAlign:"right"})?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().setTextAlign("right").run(),children:(0,n.jsx)($.A,{className:"h-4 w-4"})}),(0,n.jsx)(m.$,{variant:P.isActive({textAlign:"justify"})?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().setTextAlign("justify").run(),children:(0,n.jsx)(E.A,{className:"h-4 w-4"})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 border-r border-gray-200 pr-2 mr-2",children:[(0,n.jsx)(m.$,{variant:P.isActive("link")?"default":"ghost",size:"sm",onClick:()=>{let e=null==P?void 0:P.getAttributes("link").href,r=window.prompt("URL",e);if(null!==r){if(""===r){null==P||P.chain().focus().extendMarkRange("link").unsetLink().run();return}null==P||P.chain().focus().extendMarkRange("link").setLink({href:r}).run()}},children:(0,n.jsx)(L.A,{className:"h-4 w-4"})}),(0,n.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>P.chain().focus().unsetLink().run(),disabled:!P.isActive("link"),children:(0,n.jsx)(T.A,{className:"h-4 w-4"})}),(0,n.jsx)(m.$,{variant:"ghost",size:"sm",onClick:V,disabled:O,children:(0,n.jsx)(H.A,{className:"h-4 w-4"})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 border-r border-gray-200 pr-2 mr-2",children:[(0,n.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>P.chain().focus().setColor("#ef4444").run(),children:(0,n.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded"})}),(0,n.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>P.chain().focus().setColor("#f97316").run(),children:(0,n.jsx)("div",{className:"w-4 h-4 bg-orange-500 rounded"})}),(0,n.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>P.chain().focus().setColor("#eab308").run(),children:(0,n.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded"})}),(0,n.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>P.chain().focus().setColor("#22c55e").run(),children:(0,n.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded"})}),(0,n.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>P.chain().focus().setColor("#3b82f6").run(),children:(0,n.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded"})}),(0,n.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>P.chain().focus().setColor("#8b5cf6").run(),children:(0,n.jsx)("div",{className:"w-4 h-4 bg-purple-500 rounded"})}),(0,n.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>P.chain().focus().unsetColor().run(),children:(0,n.jsx)(R.A,{className:"h-4 w-4"})})]}),(0,n.jsx)("div",{className:"flex items-center gap-1 border-r border-gray-200 pr-2 mr-2",children:(0,n.jsx)(m.$,{variant:P.isActive("highlight")?"default":"ghost",size:"sm",onClick:()=>P.chain().focus().toggleHighlight().run(),children:(0,n.jsx)(M.A,{className:"h-4 w-4"})})}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>P.chain().focus().undo().run(),disabled:!P.can().undo(),children:(0,n.jsx)(S.A,{className:"h-4 w-4"})}),(0,n.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>P.chain().focus().redo().run(),disabled:!P.can().redo(),children:(0,n.jsx)(U.A,{className:"h-4 w-4"})})]})]}),(0,n.jsx)(i.$Z,{editor:P}),O&&(0,n.jsx)("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center",children:(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Fazendo upload da imagem..."})})]}):null}function O(e){return(0,n.jsx)(I.Y,{fallback:(0,n.jsx)("div",{className:"border border-gray-300 rounded-lg min-h-[300px] p-4 flex items-center justify-center",children:(0,n.jsx)("div",{className:"text-gray-500 text-sm",children:"Carregando editor..."})}),children:(0,n.jsx)(B,{...e})})}},53419:(e,r,s)=>{s.d(r,{h:()=>i});var n=s(12115);function i(){let e=(0,n.useRef)(new Set),r=r=>{if(!r)return!1;try{return r.remove?r.remove():r.parentNode&&r.parentNode.removeChild(r),e.current.delete(r),!0}catch(e){return console.warn("Error removing element:",e),!1}},s=e=>{if(!document)return null;try{return document.querySelectorAll(e)}catch(e){return console.warn("Error querying selector:",e),null}};return(0,n.useEffect)(()=>()=>{e.current.forEach(e=>{r(e)}),e.current.clear()},[]),{safeCreateElement:function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!document)return null;try{let n=document.createElement(r);return Object.entries(s).forEach(e=>{let[r,s]=e;n.setAttribute(r,s)}),e.current.add(n),n}catch(e){return console.warn("Error creating element:",e),null}},safeAppendChild:(e,r)=>{if(!e||!r)return!1;try{return e.appendChild(r),!0}catch(e){return console.warn("Error appending child:",e),!1}},safeRemoveElement:r,safeQuerySelector:s,safeRemoveElements:e=>{let n=s(e);if(!n)return 0;let i=0;return n.forEach(e=>{r(e)&&i++}),i}}}},93870:(e,r,s)=>{s.d(r,{Y:()=>t});var n=s(95155),i=s(12115);function t(e){let{children:r,fallback:s=null}=e,[t,l]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{l(!0)},[]),t)?(0,n.jsx)(n.Fragment,{children:r}):(0,n.jsx)(n.Fragment,{children:s})}}}]);