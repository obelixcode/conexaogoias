"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4109],{3998:(r,e,t)=>{t.d(e,{$:()=>d});var a=t(95155);t(12115);var o=t(32467),i=t(83101),s=t(64269);let n=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function d(r){let{className:e,variant:t,size:i,asChild:d=!1,...c}=r,l=d?o.DX:"button";return(0,a.jsx)(l,{"data-slot":"button",className:(0,s.cn)(n({variant:t,size:i,className:e})),...c})}},11647:(r,e,t)=>{t.d(e,{E:()=>d});var a=t(95155);t(12115);var o=t(32467),i=t(83101),s=t(64269);let n=(0,i.F)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(r){let{className:e,variant:t,asChild:i=!1,...d}=r,c=i?o.DX:"span";return(0,a.jsx)(c,{"data-slot":"badge",className:(0,s.cn)(n({variant:t}),e),...d})}},23739:(r,e,t)=>{t.d(e,{M:()=>n});var a=t(19708),o=t(14585);let i="categories",s="news";class n{static async createCategory(r){try{if(await this.getCategoryBySlug(r.slug))throw Error("J\xe1 existe uma categoria com este slug");return(await (0,a.gS)((0,a.rJ)(o.db,i),{name:r.name,slug:r.slug,color:r.color,description:r.description||"",order:r.order,isActive:r.isActive,createdAt:(0,a.O5)(),updatedAt:(0,a.O5)()})).id}catch(r){if(console.error("Create category error:",r),r instanceof Error&&r.message.includes("slug"))throw r;throw Error("Erro ao criar categoria")}}static async updateCategory(r,e){try{if(e.slug){let t=await this.getCategoryBySlug(e.slug);if(t&&t.id!==r)throw Error("J\xe1 existe uma categoria com este slug")}await (0,a.mZ)((0,a.H9)(o.db,i,r),{...e,updatedAt:(0,a.O5)()})}catch(r){if(console.error("Update category error:",r),r instanceof Error&&r.message.includes("slug"))throw r;throw Error("Erro ao atualizar categoria")}}static async deleteCategory(r){try{let e=(0,a.P)((0,a.rJ)(o.db,s),(0,a._M)("categoryId","==",r));if(!(await (0,a.GG)(e)).empty)throw Error("N\xe3o \xe9 poss\xedvel excluir categoria que possui not\xedcias");await (0,a.kd)((0,a.H9)(o.db,i,r))}catch(r){if(console.error("Delete category error:",r),r instanceof Error&&r.message.includes("not\xedcias"))throw r;throw Error("Erro ao excluir categoria")}}static async getCategoryById(r){try{var e,t;let s=await (0,a.x7)((0,a.H9)(o.db,i,r));if(!s.exists())return null;let n=s.data();return{id:s.id,...n,createdAt:(null==(e=n.createdAt)?void 0:e.toDate())||new Date,updatedAt:(null==(t=n.updatedAt)?void 0:t.toDate())||new Date}}catch(r){throw console.error("Get category by ID error:",r),Error("Erro ao buscar categoria")}}static async getCategoryBySlug(r){try{var e,t;let s=(0,a.P)((0,a.rJ)(o.db,i),(0,a._M)("slug","==",r)),n=await (0,a.GG)(s);if(n.empty)return null;let d=n.docs[0],c=d.data();return{id:d.id,...c,createdAt:(null==(e=c.createdAt)?void 0:e.toDate())||new Date,updatedAt:(null==(t=c.updatedAt)?void 0:t.toDate())||new Date}}catch(r){throw console.error("Get category by slug error:",r),Error("Erro ao buscar categoria")}}static async getAllCategories(){try{let r;try{let e=(0,a.P)((0,a.rJ)(o.db,i),(0,a.My)("order","asc"));r=await (0,a.GG)(e)}catch(e){console.warn("OrderBy failed, fetching without order:",e),r=await (0,a.GG)((0,a.rJ)(o.db,i))}return r.docs.map(r=>{var e,t;let a=r.data();return{id:r.id,...a,createdAt:(null==(e=a.createdAt)?void 0:e.toDate())||new Date,updatedAt:(null==(t=a.updatedAt)?void 0:t.toDate())||new Date}}).sort((r,e)=>(r.order||0)-(e.order||0))}catch(r){throw console.error("Get all categories error:",r),Error("Erro ao buscar categorias")}}static async getActiveCategories(){try{let r;try{let e=(0,a.P)((0,a.rJ)(o.db,i),(0,a._M)("isActive","==",!0),(0,a.My)("order","asc"));r=await (0,a.GG)(e)}catch(t){console.warn("OrderBy failed for active categories, fetching without order:",t);let e=(0,a.P)((0,a.rJ)(o.db,i),(0,a._M)("isActive","==",!0));r=await (0,a.GG)(e)}return r.docs.map(r=>{var e,t;let a=r.data();return{id:r.id,...a,createdAt:(null==(e=a.createdAt)?void 0:e.toDate())||new Date,updatedAt:(null==(t=a.updatedAt)?void 0:t.toDate())||new Date}}).sort((r,e)=>(r.order||0)-(e.order||0))}catch(r){throw console.error("Get active categories error:",r),Error("Erro ao buscar categorias ativas")}}static async getCategoriesWithCount(){try{let r=await this.getAllCategories(),e=[];for(let t of r){let r=(0,a.P)((0,a.rJ)(o.db,s),(0,a._M)("categoryId","==",t.id),(0,a._M)("isPublished","==",!0)),i=await (0,a.GG)(r);e.push({...t,newsCount:i.size})}return e}catch(r){throw console.error("Get categories with count error:",r),Error("Erro ao buscar categorias com contagem")}}static async updateCategoryOrder(r){try{let e=r.map((r,e)=>(0,a.mZ)((0,a.H9)(o.db,i,r),{order:e+1,updatedAt:(0,a.O5)()}));await Promise.all(e)}catch(r){throw console.error("Update category order error:",r),Error("Erro ao atualizar ordem das categorias")}}static generateSlug(r){return r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}static async isSlugUnique(r,e){try{let t=(0,a.P)((0,a.rJ)(o.db,i),(0,a._M)("slug","==",r)),s=await (0,a.GG)(t);if(e)return s.docs.every(r=>r.id!==e);return s.empty}catch(r){throw console.error("Check slug unique error:",r),Error("Erro ao verificar slug")}}static async getCategoryStats(){try{let r=await (0,a.GG)((0,a.rJ)(o.db,i)),e=await (0,a.GG)((0,a.rJ)(o.db,s)),t=r.docs.map(r=>({id:r.id,...r.data()})),n=e.docs.map(r=>({id:r.id,...r.data()})),d=t.filter(r=>r.isActive),c=t.filter(r=>n.some(e=>e.categoryId===r.id)),l=t.map(r=>{let e=n.filter(e=>e.categoryId===r.id),t=e.reduce((r,e)=>r+(e.views||0),0);return{categoryName:r.name,newsCount:e.length,views:t}}).sort((r,e)=>e.newsCount-r.newsCount).slice(0,10);return{totalCategories:t.length,activeCategories:d.length,categoriesWithNews:c.length,topCategories:l}}catch(r){throw console.error("Get category stats error:",r),Error("Erro ao buscar estat\xedsticas das categorias")}}}},65142:(r,e,t)=>{t.d(e,{p:()=>i});var a=t(95155);t(12115);var o=t(64269);function i(r){let{className:e,type:t,...i}=r;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,o.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}},86948:(r,e,t)=>{t.d(e,{BT:()=>d,Wu:()=>c,ZB:()=>n,Zp:()=>i,aR:()=>s});var a=t(95155);t(12115);var o=t(64269);function i(r){let{className:e,...t}=r;return(0,a.jsx)("div",{"data-slot":"card",className:(0,o.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function s(r){let{className:e,...t}=r;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,o.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function n(r){let{className:e,...t}=r;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,o.cn)("leading-none font-semibold",e),...t})}function d(r){let{className:e,...t}=r;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,o.cn)("text-muted-foreground text-sm",e),...t})}function c(r){let{className:e,...t}=r;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,o.cn)("px-6",e),...t})}},87270:(r,e,t)=>{t.d(e,{A0:()=>s,BF:()=>n,Hj:()=>d,XI:()=>i,nA:()=>l,nd:()=>c});var a=t(95155);t(12115);var o=t(64269);function i(r){let{className:e,...t}=r;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,o.cn)("w-full caption-bottom text-sm",e),...t})})}function s(r){let{className:e,...t}=r;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,o.cn)("[&_tr]:border-b",e),...t})}function n(r){let{className:e,...t}=r;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,o.cn)("[&_tr:last-child]:border-0",e),...t})}function d(r){let{className:e,...t}=r;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,o.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function c(r){let{className:e,...t}=r;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,o.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function l(r){let{className:e,...t}=r;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,o.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}}}]);