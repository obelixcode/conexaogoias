(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7471],{5917:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(71847).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},20063:(e,s,a)=>{"use strict";var r=a(47260);a.o(r,"useParams")&&a.d(s,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(s,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})},35626:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},72209:(e,s,a)=>{Promise.resolve().then(a.bind(a,92839))},92839:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>j});var r=a(95155),t=a(12115),i=a(20063),l=a(42196),c=a(71847);let n=(0,c.A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),d=(0,c.A)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);var o=a(89715),m=a(35626),x=a(5917),u=a(65229),h=a(21786),p=a(3512),f=a(61922),g=a(70903);function j(){let e=(0,i.useRouter)(),[s,a]=(0,t.useState)([]),[c,j]=(0,t.useState)(!1),[v,y]=(0,t.useState)(!1),N=async e=>{if(!e)return;let s=Array.from(e).map(e=>({id:Date.now().toString()+Math.random().toString(36).substr(2,9),file:e,url:"",status:"uploading",progress:0}));for(let e of(a(e=>[...e,...s]),y(!0),s))try{let s=await g.u.uploadMedia(e.file,{name:e.file.name,isPublic:!0},"admin"),r=await g.u.getMediaById(s);a(s=>s.map(s=>s.id===e.id?{...s,url:(null==r?void 0:r.url)||"",status:"success",progress:100}:s))}catch(s){console.error("Upload error:",s),a(s=>s.map(s=>s.id===e.id?{...s,status:"error",error:"Erro no upload"}:s))}y(!1)},b=s.filter(e=>"success"===e.status).length,w=s.filter(e=>"error"===e.status).length;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(f.a,{variant:"tertiary",onClick:()=>e.back(),children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Voltar"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Fazer Upload"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Envie arquivos para a biblioteca de m\xeddia"})]})]})}),s.length>0&&(0,r.jsx)(p.O,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,r.jsx)("span",{className:"font-medium",children:s.length})," arquivo(s) selecionado(s)"]}),b>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-green-600",children:[(0,r.jsx)(x.A,{className:"h-4 w-4"}),(0,r.jsxs)("span",{className:"text-sm font-medium",children:[b," enviado(s)"]})]}),w>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-red-600",children:[(0,r.jsx)(u.A,{className:"h-4 w-4"}),(0,r.jsxs)("span",{className:"text-sm font-medium",children:[w," erro(s)"]})]})]}),v&&(0,r.jsx)("div",{className:"text-sm text-blue-600 font-medium",children:"Enviando..."})]})}),(0,r.jsx)(p.O,{children:(0,r.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-12 text-center transition-colors ".concat(c?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragOver:e=>{e.preventDefault(),j(!0)},onDragLeave:e=>{e.preventDefault(),j(!1)},onDrop:e=>{e.preventDefault(),j(!1),N(e.dataTransfer.files)},children:[(0,r.jsx)(h.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Arraste arquivos aqui ou clique para selecionar"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Suporte para imagens, v\xeddeos, \xe1udios e documentos"}),(0,r.jsx)("input",{type:"file",multiple:!0,onChange:e=>N(e.target.files),className:"hidden",id:"file-upload",accept:"image/*,video/*,audio/*,.pdf,.doc,.docx,.txt"}),(0,r.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:[(0,r.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Selecionar Arquivos"]})]})}),s.length>0&&(0,r.jsx)(p.O,{title:"Arquivos Enviados",description:"Lista dos arquivos processados",children:(0,r.jsx)("div",{className:"space-y-3",children:s.map(e=>{var s;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(s=e.file).type.startsWith("image/")?(0,r.jsx)(l.A,{className:"h-8 w-8 text-blue-500"}):s.type.startsWith("video/")?(0,r.jsx)(n,{className:"h-8 w-8 text-green-500"}):s.type.startsWith("audio/")?(0,r.jsx)(d,{className:"h-8 w-8 text-purple-500"}):(0,r.jsx)(o.A,{className:"h-8 w-8 text-gray-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:e.file.name}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:(e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]})(e.file.size)})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:["uploading"===e.status&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"progress-bar h-full bg-blue-500",style:{width:"".concat(e.progress,"%")}})}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[e.progress,"%"]})]}),"success"===e.status&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,r.jsx)(x.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Enviado"})]}),"error"===e.status&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-red-600",children:[(0,r.jsx)(u.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:e.error})]}),(0,r.jsx)(f.a,{variant:"tertiary",size:"small",onClick:()=>{try{var s;s=e.id,a(e=>e.filter(e=>e.id!==s))}catch(e){console.warn("Error removing file:",e)}},children:(0,r.jsx)(u.A,{className:"h-4 w-4"})})]})]},e.id)})})}),s.length>0&&(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)(f.a,{variant:"secondary",onClick:()=>{try{a([])}catch(e){console.warn("Error clearing file list:",e)}},children:"Limpar Lista"}),(0,r.jsx)(f.a,{onClick:()=>{try{e.push("/admin/media/library")}catch(e){console.warn("Error navigating to library:",e)}},children:"Ver Biblioteca"})]})]})}}},e=>{e.O(0,[9135,7210,9779,3643,4761,8441,1255,7358],()=>e(e.s=72209)),_N_E=e.O()}]);