(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8733],{3512:(e,r,a)=>{"use strict";a.d(r,{O:()=>i});var t=a(95155),s=a(64269);function i(e){let{children:r,className:a="",title:i,description:o,footer:l}=e;return(0,t.jsxs)("div",{className:(0,s.cn)("bg-white border border-gray-200 rounded-lg shadow-sm",a),children:[(i||o)&&(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[i&&(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i}),o&&(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:o})]}),(0,t.jsx)("div",{className:"px-6 py-4",children:r}),l&&(0,t.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:l})]})}},14585:(e,r,a)=>{"use strict";a.d(r,{IG:()=>d,db:()=>c,j2:()=>n});var t=a(52078),s=a(81328),i=a(19708),o=a(79996);let l=(0,t.Wp)({apiKey:"AIzaSyBjdbOl0xyru5TfEQtu2iC2wqIz3QvrRQM",authDomain:"aconexaogoias.firebaseapp.com",projectId:"aconexaogoias",storageBucket:"aconexaogoias.firebasestorage.app",messagingSenderId:"6509088743",appId:"1:6509088743:web:f1866c676e18c53204f742"}),n=(0,s.xI)(l),c=(0,i.aU)(l),d=(0,o.c7)(l)},24681:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>U});var t=a(95155),s=a(12115),i=a(6191),o=a(86651),l=a(20508),n=a(23664),c=a(17910),d=a(16485),u=a(70532),m=a(57828),x=a(11010),h=a(71360),g=a(91169),v=a(3512),p=a(61922),y=a(94315),b=a(88114),f=a(81328),j=a(19708),w=a(14585);let A="users";class N{static async getAllUsers(){try{let e=await (0,j.GG)((0,j.P)((0,j.rJ)(w.db,A),(0,j.My)("createdAt","desc"))),r=[];return e.forEach(e=>{var a,t,s;let i=e.data();r.push({uid:e.id,name:i.name,email:i.email,role:i.role,isActive:i.isActive,createdAt:(null==(a=i.createdAt)?void 0:a.toDate())||new Date,updatedAt:(null==(t=i.updatedAt)?void 0:t.toDate())||new Date,lastLoginAt:(null==(s=i.lastLoginAt)?void 0:s.toDate())||null,avatar:i.avatar||null})}),r}catch(e){throw console.error("Error getting all users:",e),Error("Erro ao buscar usu\xe1rios")}}static async createUser(e){try{var r;let a=(await (0,f.eJ)(w.j2,e.email,e.password)).user,t={name:e.name,email:e.email,role:e.role,isActive:null==(r=e.isActive)||r,createdAt:new Date,updatedAt:new Date,lastLoginAt:void 0,avatar:void 0};return await (0,j.BN)((0,j.H9)(w.db,A,a.uid),t),a.uid}catch(e){throw console.error("Error creating user:",e),Error("Erro ao criar usu\xe1rio")}}static async updateUser(e,r){try{let a=(0,j.H9)(w.db,A,e);if(!(await (0,j.x7)(a)).exists())throw Error("Usu\xe1rio n\xe3o encontrado");let t={...r,updatedAt:new Date};await (0,j.mZ)(a,t),(r.email||r.password)&&console.warn("Email/password updates require Firebase Admin SDK or user re-authentication")}catch(e){throw console.error("Error updating user:",e),Error("Erro ao atualizar usu\xe1rio")}}static async deleteUser(e){try{await (0,j.kd)((0,j.H9)(w.db,A,e)),console.warn("User deleted from Firestore. Firebase Auth deletion requires Admin SDK")}catch(e){throw console.error("Error deleting user:",e),Error("Erro ao excluir usu\xe1rio")}}static async getUserById(e){try{var r,a,t;let s=await (0,j.x7)((0,j.H9)(w.db,A,e));if(!s.exists())return null;let i=s.data();return{uid:s.id,name:i.name,email:i.email,role:i.role,isActive:i.isActive,createdAt:(null==(r=i.createdAt)?void 0:r.toDate())||new Date,updatedAt:(null==(a=i.updatedAt)?void 0:a.toDate())||new Date,lastLoginAt:(null==(t=i.lastLoginAt)?void 0:t.toDate())||null,avatar:i.avatar||null}}catch(e){throw console.error("Error getting user by ID:",e),Error("Erro ao buscar usu\xe1rio")}}static async toggleUserStatus(e){try{let r=(0,j.H9)(w.db,A,e),a=await (0,j.x7)(r);if(!a.exists())throw Error("Usu\xe1rio n\xe3o encontrado");let t=a.data().isActive;await (0,j.mZ)(r,{isActive:!t,updatedAt:new Date})}catch(e){throw console.error("Error toggling user status:",e),Error("Erro ao alterar status do usu\xe1rio")}}static async searchUsers(e){try{let r=await (0,j.GG)((0,j.rJ)(w.db,A)),a=[];return r.forEach(r=>{var t,s,i;let o=r.data(),l={uid:r.id,name:o.name,email:o.email,role:o.role,isActive:o.isActive,createdAt:(null==(t=o.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(s=o.updatedAt)?void 0:s.toDate())||new Date,lastLoginAt:(null==(i=o.lastLoginAt)?void 0:i.toDate())||null,avatar:o.avatar||null};(l.name.toLowerCase().includes(e.toLowerCase())||l.email.toLowerCase().includes(e.toLowerCase()))&&a.push(l)}),a.sort((e,r)=>r.createdAt.getTime()-e.createdAt.getTime())}catch(e){throw console.error("Error searching users:",e),Error("Erro ao buscar usu\xe1rios")}}}var E=a(52817),C=a(29141);function U(){let{user:e,isLoading:r}=(0,C.J)(),[a,f]=(0,s.useState)([]),[j,w]=(0,s.useState)(!0),[A,U]=(0,s.useState)(""),[S,z]=(0,s.useState)("all"),[D,k]=(0,s.useState)("all"),[L,H]=(0,s.useState)([]),[_,P]=(0,s.useState)(!1),[I,q]=(0,s.useState)(null),[G,O]=(0,s.useState)({name:"",email:"",password:"",role:"editor",isActive:!0}),[F,M]=(0,s.useState)(!1),[T,B]=(0,s.useState)(null);(0,s.useEffect)(()=>{!r&&e&&J()},[r,e]);let J=async()=>{try{w(!0);let e=await N.getAllUsers();f(e)}catch(e){console.error("Error loading users:",e),B({type:"error",text:"Erro ao carregar usu\xe1rios"})}finally{w(!1)}},Q=async e=>{e.preventDefault();try{M(!0),B(null),I?(await N.updateUser(I.uid,{name:G.name,email:G.email,password:G.password||void 0,role:G.role,isActive:G.isActive}),B({type:"success",text:"Usu\xe1rio atualizado com sucesso!"})):(await N.createUser({name:G.name,email:G.email,password:G.password,role:G.role,isActive:G.isActive}),B({type:"success",text:"Usu\xe1rio criado com sucesso!"})),await J(),Y()}catch(e){console.error("Error saving user:",e),B({type:"error",text:e instanceof Error?e.message:"Erro ao salvar usu\xe1rio"})}finally{M(!1)}},Z=async e=>{let r=a.find(r=>r.uid===e);if((null==r?void 0:r.role)==="super_admin")return void B({type:"error",text:"Usu\xe1rios super admin n\xe3o podem ser exclu\xeddos"});if(confirm("Tem certeza que deseja excluir este usu\xe1rio?"))try{await N.deleteUser(e),B({type:"success",text:"Usu\xe1rio exclu\xeddo com sucesso!"}),await J()}catch(e){console.error("Error deleting user:",e),B({type:"error",text:e instanceof Error?e.message:"Erro ao excluir usu\xe1rio"})}},K=async e=>{if("super_admin"===e.role)return void B({type:"error",text:"Status de usu\xe1rios super admin n\xe3o pode ser alterado"});try{await N.toggleUserStatus(e.uid),B({type:"success",text:"Status do usu\xe1rio alterado com sucesso!"}),await J()}catch(e){console.error("Error updating user status:",e),B({type:"error",text:e instanceof Error?e.message:"Erro ao alterar status do usu\xe1rio"})}},Y=()=>{O({name:"",email:"",password:"",role:"editor",isActive:!0}),q(null),P(!1)},$=a.filter(e=>{let r=e.name.toLowerCase().includes(A.toLowerCase())||e.email.toLowerCase().includes(A.toLowerCase()),a="all"===S||e.role===S,t="all"===D||"active"===D&&e.isActive||"inactive"===D&&!e.isActive;return r&&a&&t});return r||j?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Usu\xe1rios"})}),(0,t.jsx)(v.O,{children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})})]}):e?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Usu\xe1rios"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Gerencie usu\xe1rios administradores"})]}),(0,t.jsxs)(p.a,{onClick:()=>P(!0),children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Novo Usu\xe1rio"]})]}),T&&(0,t.jsx)("div",{className:"p-4 rounded-md ".concat("success"===T.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{children:T.text}),(0,t.jsx)("button",{onClick:()=>B(null),className:"ml-4 text-gray-400 hover:text-gray-600",children:"\xd7"})]})}),_&&(0,t.jsx)(v.O,{title:I?"Editar Usu\xe1rio":"Novo Usu\xe1rio",children:(0,t.jsxs)("form",{onSubmit:Q,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),(0,t.jsx)("input",{type:"text",required:!0,value:G.name,onChange:e=>O(r=>({...r,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Jo\xe3o Silva"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,t.jsx)("input",{type:"email",required:!0,value:G.email,onChange:e=>O(r=>({...r,email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"exemplo@email.com"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Senha ",!I&&"*"]}),(0,t.jsx)("input",{type:"password",required:!I,value:G.password,onChange:e=>O(r=>({...r,password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:I?"Deixe em branco para manter a atual":"M\xednimo 6 caracteres"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fun\xe7\xe3o *"}),(0,t.jsxs)("select",{required:!0,value:G.role,onChange:e=>O(r=>({...r,role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Selecionar fun\xe7\xe3o do usu\xe1rio",children:[(0,t.jsx)("option",{value:"editor",children:"Editor"}),(0,t.jsx)("option",{value:"admin",children:"Administrador"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("input",{type:"checkbox",id:"isActive",checked:G.isActive,onChange:e=>O(r=>({...r,isActive:e.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,t.jsx)("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"Usu\xe1rio ativo"})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)(p.a,{type:"button",variant:"secondary",onClick:Y,disabled:F,children:"Cancelar"}),(0,t.jsxs)(p.a,{type:"submit",disabled:F,children:[F?"Salvando...":I?"Atualizar":"Criar"," Usu\xe1rio"]})]})]})}),(0,t.jsx)(v.O,{children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar usu\xe1rios...",value:A,onChange:e=>U(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Buscar usu\xe1rios"})]})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("select",{value:S,onChange:e=>z(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por fun\xe7\xe3o",children:[(0,t.jsx)("option",{value:"all",children:"Todas as fun\xe7\xf5es"}),(0,t.jsx)("option",{value:"admin",children:"Administradores"}),(0,t.jsx)("option",{value:"editor",children:"Editores"})]}),(0,t.jsxs)("select",{value:D,onChange:e=>k(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por status",children:[(0,t.jsx)("option",{value:"all",children:"Todos os status"}),(0,t.jsx)("option",{value:"active",children:"Ativos"}),(0,t.jsx)("option",{value:"inactive",children:"Inativos"})]})]})]})}),(0,t.jsxs)(v.O,{children:[(0,t.jsxs)(b.m_,{children:[(0,t.jsx)(b.$3,{children:(0,t.jsxs)(b.Ef,{children:[(0,t.jsx)(b.zz,{className:"w-12",children:(0,t.jsx)("input",{type:"checkbox",checked:L.length===$.length&&$.length>0,onChange:()=>{L.length===$.length?H([]):H($.map(e=>e.uid))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-label":"Selecionar todos os usu\xe1rios"})}),(0,t.jsx)(b.zz,{children:"Usu\xe1rio"}),(0,t.jsx)(b.zz,{children:"Fun\xe7\xe3o"}),(0,t.jsx)(b.zz,{children:"Status"}),(0,t.jsx)(b.zz,{children:"\xdaltimo Login"}),(0,t.jsx)(b.zz,{children:"Data de Cria\xe7\xe3o"}),(0,t.jsx)(b.zz,{className:"w-12",children:"A\xe7\xf5es"})]})}),(0,t.jsx)(b.Q3,{children:$.map(e=>(0,t.jsxs)(b.Ef,{isSelected:L.includes(e.uid),children:[(0,t.jsx)(b.w1,{children:(0,t.jsx)("input",{type:"checkbox",checked:L.includes(e.uid),onChange:()=>{var r;return r=e.uid,void H(e=>e.includes(r)?e.filter(e=>e!==r):[...e,r])},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-label":"Selecionar usu\xe1rio ".concat(e.name)})}),(0,t.jsx)(b.w1,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:(0,t.jsx)(l.A,{className:"h-5 w-5 text-gray-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,t.jsx)(n.A,{className:"h-3 w-3 mr-1"}),e.email]})]})]})}),(0,t.jsx)(b.w1,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.A,{className:"h-4 w-4 text-gray-400"}),(e=>{switch(e){case"admin":return(0,t.jsx)(y.b,{variant:"error",children:"Administrador"});case"editor":return(0,t.jsx)(y.b,{variant:"info",children:"Editor"});default:return(0,t.jsx)(y.b,{variant:"default",children:e})}})(e.role)]})}),(0,t.jsx)(b.w1,{children:(0,t.jsx)(y.b,{variant:e.isActive?"success":"warning",children:e.isActive?"Ativo":"Inativo"})}),(0,t.jsx)(b.w1,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-900",children:e.lastLoginAt?(0,E.Yq)(e.lastLoginAt.toISOString()):"Nunca"})]})}),(0,t.jsx)(b.w1,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-900",children:(0,E.Yq)(e.createdAt.toISOString())})]})}),(0,t.jsx)(b.w1,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:["super_admin"!==e.role&&(0,t.jsx)(p.a,{variant:"tertiary",size:"small",onClick:()=>K(e),children:e.isActive?(0,t.jsx)(u.A,{className:"h-4 w-4"}):(0,t.jsx)(m.A,{className:"h-4 w-4"})}),"super_admin"!==e.role&&(0,t.jsx)(p.a,{variant:"tertiary",size:"small",onClick:()=>(e=>{if("super_admin"===e.role)return void B({type:"error",text:"Usu\xe1rios super admin n\xe3o podem ser editados"});q(e),O({name:e.name,email:e.email,password:"",role:e.role,isActive:e.isActive}),P(!0)})(e),children:(0,t.jsx)(x.A,{className:"h-4 w-4"})}),"super_admin"!==e.role&&(0,t.jsx)(p.a,{variant:"tertiary",size:"small",onClick:()=>Z(e.uid),children:(0,t.jsx)(h.A,{className:"h-4 w-4"})}),"super_admin"===e.role&&(0,t.jsx)("span",{className:"text-xs text-gray-500 px-2 py-1 bg-gray-100 rounded",children:"Protegido"})]})})]},e.uid))})]}),0===$.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(g.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum usu\xe1rio encontrado"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:A||"all"!==S||"all"!==D?"Tente ajustar os filtros de busca.":"Comece criando seu primeiro usu\xe1rio."}),!A&&"all"===S&&"all"===D&&(0,t.jsxs)(p.a,{onClick:()=>P(!0),children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Novo Usu\xe1rio"]})]})]})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Usu\xe1rios"})}),(0,t.jsx)(v.O,{children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Acesso Negado"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Voc\xea precisa estar logado para acessar esta p\xe1gina."})]})})]})}},29141:(e,r,a)=>{"use strict";a.d(r,{J:()=>n,UserProvider:()=>l});var t=a(95155),s=a(12115),i=a(34426);let o=(0,s.createContext)(void 0);function l(e){let{children:r}=e,[a,l]=(0,s.useState)(null),[n,c]=(0,s.useState)(!0),d=async()=>{try{let e=await i.z.getCurrentUser();l(e)}catch(e){console.error("Error refreshing user:",e),l(null)}};return(0,s.useEffect)(()=>{d().finally(()=>c(!1))},[]),(0,t.jsx)(o.Provider,{value:{user:a,setUser:l,refreshUser:d,isLoading:n},children:r})}function n(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},34426:(e,r,a)=>{"use strict";a.d(r,{z:()=>l});var t=a(81328),s=a(19708),i=a(14585);let o="users";class l{static async login(e){try{let r=(await (0,t.x9)(i.j2,e.email,e.password)).user,a=await (0,s.x7)((0,s.H9)(i.db,o,r.uid));if(!a.exists())throw Error("Usu\xe1rio n\xe3o encontrado no sistema");let l=a.data();if(!l.isActive)throw Error("Usu\xe1rio desativado");return await (0,s.mZ)((0,s.H9)(i.db,o,r.uid),{lastLoginAt:new Date}),{uid:r.uid,email:r.email,name:l.name,role:l.role,isActive:l.isActive,avatar:l.avatar}}catch(e){throw console.error("Login error:",e),Error("Erro ao fazer login. Verifique suas credenciais.")}}static async logout(){try{await (0,t.CI)(i.j2)}catch(e){throw console.error("Logout error:",e),Error("Erro ao fazer logout")}}static async getCurrentUser(){return new Promise(e=>{let r=(0,t.hg)(i.j2,async a=>{if(r(),!a)return void e(null);try{let r=await (0,s.x7)((0,s.H9)(i.db,o,a.uid));if(!r.exists())return void e(null);let t=r.data();if(!t.isActive)return void e(null);e({uid:a.uid,email:a.email,name:t.name,role:t.role,isActive:t.isActive,avatar:t.avatar})}catch(r){console.error("Get current user error:",r),e(null)}})})}static async createAdminUser(e){try{throw Error("Cria\xe7\xe3o de usu\xe1rios deve ser feita via Firebase Console ou server-side function")}catch(e){throw console.error("Create admin user error:",e),Error("Erro ao criar usu\xe1rio administrador")}}static async updateAdminUser(e,r){try{await (0,s.mZ)((0,s.H9)(i.db,o,e),{...r,updatedAt:new Date})}catch(e){throw console.error("Update admin user error:",e),Error("Erro ao atualizar usu\xe1rio")}}static async getAdminUser(e){try{let r=await (0,s.x7)((0,s.H9)(i.db,o,e));if(!r.exists())return null;return r.data()}catch(e){throw console.error("Get admin user error:",e),Error("Erro ao buscar usu\xe1rio")}}static hasPermission(e,r){let a={editor:1,admin:2,super_admin:3};return a[e]>=a[r]}static onAuthStateChange(e){return(0,t.hg)(i.j2,async r=>{if(!r)return void e(null);try{let a=await (0,s.x7)((0,s.H9)(i.db,o,r.uid));if(!a.exists())return void e(null);let t=a.data();if(!t.isActive)return void e(null);e({uid:r.uid,email:r.email,name:t.name,role:t.role,isActive:t.isActive,avatar:t.avatar})}catch(r){console.error("Auth state change error:",r),e(null)}})}}},52817:(e,r,a)=>{"use strict";a.d(r,{Pp:()=>c,Yq:()=>n});var t=a(26467),s=a(25583),i=a(35504),o=a(47732),l=a(26206);function n(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",a="string"==typeof e?(0,t.H)(e):e;return(0,s.GP)(a,r,{locale:l.F})}function c(e){let r="string"==typeof e?(0,t.H)(e):e;return(0,i.c)(r)?"Agora, ".concat((0,s.GP)(r,"HH:mm")):(0,o.P)(r)?"Ontem, ".concat((0,s.GP)(r,"HH:mm")):(0,s.GP)(r,"dd/MM/yyyy",{locale:l.F})}},53621:(e,r,a)=>{Promise.resolve().then(a.bind(a,24681))},61922:(e,r,a)=>{"use strict";a.d(r,{a:()=>i});var t=a(95155),s=a(64269);function i(e){let{variant:r="primary",size:a="medium",children:i,className:o="",asChild:l=!1,...n}=e;return(0,t.jsx)("button",{className:(0,s.cn)("inline-flex items-center justify-center font-medium rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",tertiary:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",link:"bg-transparent text-blue-600 hover:text-blue-700 hover:underline focus:ring-blue-500"}[r],{small:"px-3 py-1.5 text-sm",medium:"px-4 py-2 text-sm",large:"px-6 py-3 text-base"}[a],o),...n,children:i})}},64269:(e,r,a)=>{"use strict";a.d(r,{cn:()=>i});var t=a(2821),s=a(75889);function i(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,s.QP)((0,t.$)(r))}},88114:(e,r,a)=>{"use strict";a.d(r,{$3:()=>o,Ef:()=>n,Q3:()=>l,m_:()=>i,w1:()=>c,zz:()=>d});var t=a(95155),s=a(64269);function i(e){let{children:r,className:a=""}=e;return(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsx)("table",{className:(0,s.cn)("w-full border-collapse bg-white border border-gray-200 rounded-lg",a),children:r})})}function o(e){let{children:r,className:a=""}=e;return(0,t.jsx)("thead",{className:(0,s.cn)("bg-gray-50",a),children:r})}function l(e){let{children:r,className:a=""}=e;return(0,t.jsx)("tbody",{className:(0,s.cn)("divide-y divide-gray-200",a),children:r})}function n(e){let{children:r,className:a="",isSelected:i=!1}=e;return(0,t.jsx)("tr",{className:(0,s.cn)("hover:bg-gray-50 transition-colors",i&&"bg-blue-50",a),children:r})}function c(e){let{children:r,className:a="",colSpan:i}=e;return(0,t.jsx)("td",{className:(0,s.cn)("px-6 py-4 text-sm text-gray-900",a),colSpan:i,children:r})}function d(e){let{children:r,className:a=""}=e;return(0,t.jsx)("th",{className:(0,s.cn)("px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",a),children:r})}},94315:(e,r,a)=>{"use strict";a.d(r,{b:()=>i});var t=a(95155),s=a(64269);function i(e){let{children:r,variant:a="default",size:i="small",className:o=""}=e;return(0,t.jsx)("span",{className:(0,s.cn)("inline-flex items-center font-medium rounded-full",{default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[a],{small:"px-2 py-1 text-xs",medium:"px-3 py-1 text-sm"}[i],o),children:r})}}},e=>{e.O(0,[9135,7210,9779,3643,4869,4750,8441,1255,7358],()=>e(e.s=53621)),_N_E=e.O()}]);