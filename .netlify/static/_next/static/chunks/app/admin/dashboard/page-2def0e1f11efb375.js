(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5957],{3512:(e,t,r)=>{"use strict";r.d(t,{O:()=>i});var a=r(95155),s=r(64269);function i(e){let{children:t,className:r="",title:i,description:o,footer:l}=e;return(0,a.jsxs)("div",{className:(0,s.cn)("bg-white border border-gray-200 rounded-lg shadow-sm",r),children:[(i||o)&&(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[i&&(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i}),o&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:o})]}),(0,a.jsx)("div",{className:"px-6 py-4",children:t}),l&&(0,a.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:l})]})}},23739:(e,t,r)=>{"use strict";r.d(t,{M:()=>l});var a=r(19708),s=r(14585);let i="categories",o="news";class l{static async createCategory(e){try{if(await this.getCategoryBySlug(e.slug))throw Error("J\xe1 existe uma categoria com este slug");return(await (0,a.gS)((0,a.rJ)(s.db,i),{name:e.name,slug:e.slug,color:e.color,description:e.description||"",order:e.order,isActive:e.isActive,createdAt:(0,a.O5)(),updatedAt:(0,a.O5)()})).id}catch(e){if(console.error("Create category error:",e),e instanceof Error&&e.message.includes("slug"))throw e;throw Error("Erro ao criar categoria")}}static async updateCategory(e,t){try{if(t.slug){let r=await this.getCategoryBySlug(t.slug);if(r&&r.id!==e)throw Error("J\xe1 existe uma categoria com este slug")}await (0,a.mZ)((0,a.H9)(s.db,i,e),{...t,updatedAt:(0,a.O5)()})}catch(e){if(console.error("Update category error:",e),e instanceof Error&&e.message.includes("slug"))throw e;throw Error("Erro ao atualizar categoria")}}static async deleteCategory(e){try{let t=(0,a.P)((0,a.rJ)(s.db,o),(0,a._M)("categoryId","==",e));if(!(await (0,a.GG)(t)).empty)throw Error("N\xe3o \xe9 poss\xedvel excluir categoria que possui not\xedcias");await (0,a.kd)((0,a.H9)(s.db,i,e))}catch(e){if(console.error("Delete category error:",e),e instanceof Error&&e.message.includes("not\xedcias"))throw e;throw Error("Erro ao excluir categoria")}}static async getCategoryById(e){try{var t,r;let o=await (0,a.x7)((0,a.H9)(s.db,i,e));if(!o.exists())return null;let l=o.data();return{id:o.id,...l,createdAt:(null==(t=l.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(r=l.updatedAt)?void 0:r.toDate())||new Date}}catch(e){throw console.error("Get category by ID error:",e),Error("Erro ao buscar categoria")}}static async getCategoryBySlug(e){try{var t,r;let o=(0,a.P)((0,a.rJ)(s.db,i),(0,a._M)("slug","==",e)),l=await (0,a.GG)(o);if(l.empty)return null;let n=l.docs[0],c=n.data();return{id:n.id,...c,createdAt:(null==(t=c.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(r=c.updatedAt)?void 0:r.toDate())||new Date}}catch(e){throw console.error("Get category by slug error:",e),Error("Erro ao buscar categoria")}}static async getAllCategories(){try{let e;try{let t=(0,a.P)((0,a.rJ)(s.db,i),(0,a.My)("order","asc"));e=await (0,a.GG)(t)}catch(t){console.warn("OrderBy failed, fetching without order:",t),e=await (0,a.GG)((0,a.rJ)(s.db,i))}return e.docs.map(e=>{var t,r;let a=e.data();return{id:e.id,...a,createdAt:(null==(t=a.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(r=a.updatedAt)?void 0:r.toDate())||new Date}}).sort((e,t)=>(e.order||0)-(t.order||0))}catch(e){throw console.error("Get all categories error:",e),Error("Erro ao buscar categorias")}}static async getActiveCategories(){try{let e;try{let t=(0,a.P)((0,a.rJ)(s.db,i),(0,a._M)("isActive","==",!0),(0,a.My)("order","asc"));e=await (0,a.GG)(t)}catch(r){console.warn("OrderBy failed for active categories, fetching without order:",r);let t=(0,a.P)((0,a.rJ)(s.db,i),(0,a._M)("isActive","==",!0));e=await (0,a.GG)(t)}return e.docs.map(e=>{var t,r;let a=e.data();return{id:e.id,...a,createdAt:(null==(t=a.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(r=a.updatedAt)?void 0:r.toDate())||new Date}}).sort((e,t)=>(e.order||0)-(t.order||0))}catch(e){throw console.error("Get active categories error:",e),Error("Erro ao buscar categorias ativas")}}static async getCategoriesWithCount(){try{let e=await this.getAllCategories(),t=[];for(let r of e){let e=(0,a.P)((0,a.rJ)(s.db,o),(0,a._M)("categoryId","==",r.id),(0,a._M)("isPublished","==",!0)),i=await (0,a.GG)(e);t.push({...r,newsCount:i.size})}return t}catch(e){throw console.error("Get categories with count error:",e),Error("Erro ao buscar categorias com contagem")}}static async updateCategoryOrder(e){try{let t=e.map((e,t)=>(0,a.mZ)((0,a.H9)(s.db,i,e),{order:t+1,updatedAt:(0,a.O5)()}));await Promise.all(t)}catch(e){throw console.error("Update category order error:",e),Error("Erro ao atualizar ordem das categorias")}}static generateSlug(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}static async isSlugUnique(e,t){try{let r=(0,a.P)((0,a.rJ)(s.db,i),(0,a._M)("slug","==",e)),o=await (0,a.GG)(r);if(t)return o.docs.every(e=>e.id!==t);return o.empty}catch(e){throw console.error("Check slug unique error:",e),Error("Erro ao verificar slug")}}static async getCategoryStats(){try{let e=await (0,a.GG)((0,a.rJ)(s.db,i)),t=await (0,a.GG)((0,a.rJ)(s.db,o)),r=e.docs.map(e=>({id:e.id,...e.data()})),l=t.docs.map(e=>({id:e.id,...e.data()})),n=r.filter(e=>e.isActive),c=r.filter(e=>l.some(t=>t.categoryId===e.id)),d=r.map(e=>{let t=l.filter(t=>t.categoryId===e.id),r=t.reduce((e,t)=>e+(t.views||0),0);return{categoryName:e.name,newsCount:t.length,views:r}}).sort((e,t)=>t.newsCount-e.newsCount).slice(0,10);return{totalCategories:r.length,activeCategories:n.length,categoriesWithNews:c.length,topCategories:d}}catch(e){throw console.error("Get category stats error:",e),Error("Erro ao buscar estat\xedsticas das categorias")}}}},23868:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>F});var a=r(95155),s=r(12115),i=r(52619),o=r.n(i),l=r(1524),n=r(6191),c=r(89715),d=r(57828),u=r(58734),g=r(39347),m=r(80534),h=r(3512),x=r(61922),p=r(94315),w=r(86706),v=r(23739),y=r(28669),f=r(19708),b=r(14585);let A="featured_news_config",j="current";class N{static async getFeaturedNewsConfig(){try{var e;let t=await (0,f.x7)((0,f.H9)(b.db,A,j));if(!t.exists())return null;let r=t.data();return{newsIds:r.newsIds||[],updatedAt:(null==(e=r.updatedAt)?void 0:e.toDate())||new Date,updatedBy:r.updatedBy||""}}catch(e){return console.error("Error getting featured news config:",e),null}}static async updateFeaturedNews(e,t){try{if(e.length>5)throw Error("M\xe1ximo de 5 not\xedcias em destaque permitidas");let r=(0,f.H9)(b.db,A,j),a={newsIds:e||[],updatedAt:new Date,updatedBy:t||"unknown"};(await (0,f.x7)(r)).exists()?await (0,f.mZ)(r,a):await (0,f.BN)(r,a)}catch(e){throw console.error("Error updating featured news:",e),Error("Erro ao atualizar not\xedcias em destaque: "+(e instanceof Error?e.message:"Erro desconhecido"))}}static async getFeaturedNewsWithData(){try{let e=await this.getFeaturedNewsConfig();if(!e||0===e.newsIds.length)return[];let t=(0,f.P)((0,f.rJ)(b.db,"news"),(0,f._M)("isPublished","==",!0)),r=await (0,f.GG)(t),a=new Map;r.forEach(t=>{let r=t.data();if(e.newsIds.includes(t.id)){var s,i,o,l,n,c;let e={id:t.id,title:r.title||"",subtitle:r.subtitle||"",content:r.content||"",coverImage:r.coverImage||"",categoryId:r.categoryId||"",author:r.author||"",tags:r.tags||[],slug:r.slug||"",createdAt:(null==(i=r.createdAt)||null==(s=i.toDate)?void 0:s.call(i))||new Date,updatedAt:(null==(l=r.updatedAt)||null==(o=l.toDate)?void 0:o.call(l))||new Date,publishedAt:(null==(c=r.publishedAt)||null==(n=c.toDate)?void 0:n.call(c))||new Date,isPublished:r.isPublished||!1,isFeatured:r.isFeatured||!1,views:r.views||0,metaDescription:r.metaDescription||"",metaKeywords:r.metaKeywords||[],category:{id:"",name:"",slug:"",color:""}};a.set(t.id,e)}});let s=await (0,f.GG)((0,f.rJ)(b.db,"categories")),i=new Map;s.forEach(e=>{var t,r,a,s;let o=e.data(),l={id:e.id,name:o.name||"",slug:o.slug||"",color:o.color||"#6B7280",description:o.description||"",order:o.order||0,isActive:o.isActive||!0,createdAt:(null==(r=o.createdAt)||null==(t=r.toDate)?void 0:t.call(r))||new Date,updatedAt:(null==(s=o.updatedAt)||null==(a=s.toDate)?void 0:a.call(s))||new Date};i.set(e.id,l)});let o=[];for(let t=0;t<e.newsIds.length;t++){let r=e.newsIds[t],s=a.get(r);if(s){let e=i.get(s.categoryId);o.push({id:r,title:s.title,subtitle:s.subtitle||"",coverImage:s.coverImage,slug:s.slug,category:{id:(null==e?void 0:e.id)||s.categoryId,name:(null==e?void 0:e.name)||"Sem categoria",slug:(null==e?void 0:e.slug)||"sem-categoria",color:(null==e?void 0:e.color)||"#6B7280"},publishedAt:s.publishedAt instanceof Date?s.publishedAt:new Date,views:s.views||0,position:t+1})}}return o}catch(e){throw console.error("Error getting featured news with data:",e),Error("Erro ao buscar not\xedcias em destaque")}}static async reorderFeaturedNews(e,t){try{if(e.length>5)throw Error("M\xe1ximo de 5 not\xedcias em destaque permitidas");await this.updateFeaturedNews(e,t)}catch(e){throw console.error("Error reordering featured news:",e),Error("Erro ao reordenar not\xedcias em destaque")}}static async getAvailableNewsForSelection(){try{let e=(0,f.P)((0,f.rJ)(b.db,"news"),(0,f._M)("isPublished","==",!0),(0,f.My)("publishedAt","desc")),t=await (0,f.GG)(e),r=[];t.forEach(e=>{var t,a,s,i,o,l;let n=e.data(),c={id:e.id,title:n.title||"",subtitle:n.subtitle||"",content:n.content||"",coverImage:n.coverImage||"",categoryId:n.categoryId||"",author:n.author||"",tags:n.tags||[],slug:n.slug||"",createdAt:(null==(a=n.createdAt)||null==(t=a.toDate)?void 0:t.call(a))||new Date,updatedAt:(null==(i=n.updatedAt)||null==(s=i.toDate)?void 0:s.call(i))||new Date,publishedAt:(null==(l=n.publishedAt)||null==(o=l.toDate)?void 0:o.call(l))||new Date,isPublished:n.isPublished||!1,isFeatured:n.isFeatured||!1,views:n.views||0,metaDescription:n.metaDescription||"",metaKeywords:n.metaKeywords||[],category:{id:"",name:"",slug:"",color:""}};r.push(c)});let a=await (0,f.GG)((0,f.rJ)(b.db,"categories")),s=new Map;return a.forEach(e=>{var t,r,a,i;let o=e.data(),l={id:e.id,name:o.name||"",slug:o.slug||"",color:o.color||"#6B7280",description:o.description||"",order:o.order||0,isActive:o.isActive||!0,createdAt:(null==(r=o.createdAt)||null==(t=r.toDate)?void 0:t.call(r))||new Date,updatedAt:(null==(i=o.updatedAt)||null==(a=i.toDate)?void 0:a.call(i))||new Date};s.set(e.id,l)}),r.map(e=>{let t=s.get(e.categoryId);return{...e,category:{id:(null==t?void 0:t.id)||e.categoryId,name:(null==t?void 0:t.name)||"Sem categoria",slug:(null==t?void 0:t.slug)||"sem-categoria",color:(null==t?void 0:t.color)||"#6B7280"}}})}catch(e){throw console.error("Error getting available news for selection:",e),Error("Erro ao buscar not\xedcias dispon\xedveis")}}static async initializeDefaultConfig(){try{if(!await this.getFeaturedNewsConfig()){let e=(await w.b.getRecentNews(5)).map(e=>e.id);await this.updateFeaturedNews(e,"system")}}catch(e){throw console.error("Error initializing default config:",e),Error("Erro ao inicializar configura\xe7\xe3o padr\xe3o")}}}var E=r(81402),D=r(29141),C=r(17787),G=r(49027),S=r(27587),k=r(49476),B=r(65229),I=r(86651);function P(e){let{news:t,index:r,onRemove:s}=e,{attributes:i,listeners:o,setNodeRef:l,transform:n,transition:c,isDragging:d}=(0,G.gl)({id:t.id}),u={transform:S.Ks.Transform.toString(n),transition:c,opacity:d?.5:1};return(0,a.jsxs)("div",{ref:l,style:u,className:"flex items-center space-x-3 p-3 bg-white border border-gray-200 rounded-lg ".concat(d?"shadow-lg":"hover:shadow-md"," transition-shadow"),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-semibold",children:r+1}),(0,a.jsx)("div",{...i,...o,className:"p-1 cursor-grab hover:bg-gray-100 rounded",children:(0,a.jsx)(k.A,{className:"h-4 w-4 text-gray-400"})})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:t.title}),(0,a.jsx)(p.b,{variant:"info",className:"text-white",children:t.category.name})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[t.views," visualiza\xe7\xf5es • ",new Date(t.publishedAt).toLocaleDateString("pt-BR")]})]}),(0,a.jsx)(x.a,{variant:"tertiary",size:"small",onClick:()=>{try{s(t.id)}catch(e){console.warn("Error removing news item:",e)}},className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(B.A,{className:"h-4 w-4"})})]})}function M(e){let{onClose:t,onSave:r,userId:i}=e,[,o]=(0,s.useState)(null),[l,c]=(0,s.useState)([]),[u,m]=(0,s.useState)([]),[h,w]=(0,s.useState)([]),[y,f]=(0,s.useState)(""),[b,A]=(0,s.useState)("all"),[j,E]=(0,s.useState)(!0),[D,S]=(0,s.useState)(!1),k=(0,C.FR)((0,C.MS)(C.AN),(0,C.MS)(C.uN,{coordinateGetter:G.JR}));(0,s.useEffect)(()=>{M()},[]);let M=async()=>{try{E(!0);let[e,t,r]=await Promise.all([N.getFeaturedNewsConfig(),N.getAvailableNewsForSelection(),v.M.getAllCategories()]);if(o(e),m(t),w(r),e&&e.newsIds.length>0){let e=await N.getFeaturedNewsWithData();c(e)}}catch(e){console.error("Error loading data:",e)}finally{E(!1)}},z=e=>{let t=l.find(t=>t.id===e);if(t){c(l.filter(t=>t.id!==e));let{position:r,...a}=t;m([...u,a])}},U=async()=>{try{S(!0);let e=l.map(e=>e.id);await N.updateFeaturedNews(e,i||"unknown"),r()}catch(e){console.error("Error saving featured news:",e),alert("Erro ao salvar not\xedcias em destaque: "+(e instanceof Error?e.message:"Erro desconhecido"))}finally{S(!1)}},F=u.filter(e=>{let t=e.title.toLowerCase().includes(y.toLowerCase()),r="all"===b||e.categoryId===b;return t&&r});return j?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})})}):(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gerenciar Not\xedcias em Destaque"}),(0,a.jsx)(x.a,{variant:"tertiary",onClick:t,children:(0,a.jsx)(B.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Not\xedcias em Destaque (",l.length,"/5)"]}),0===l.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(g.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"Nenhuma not\xedcia selecionada"}),(0,a.jsx)("p",{className:"text-sm",children:"Selecione not\xedcias da lista ao lado"})]}):(0,a.jsx)(C.Mp,{sensors:k,collisionDetection:C.fp,onDragEnd:e=>{let{active:t,over:r}=e;r&&t.id!==r.id&&c(e=>{let a=e.findIndex(e=>e.id===t.id),s=e.findIndex(e=>e.id===r.id);return(0,G.be)(e,a,s)})},children:(0,a.jsx)(G.gB,{items:l.map(e=>e.id),strategy:G._G,children:(0,a.jsx)("div",{className:"space-y-2",children:l.map((e,t)=>(0,a.jsx)(P,{news:e,index:t,onRemove:z},"selected-".concat(e.id)))})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Not\xedcias Dispon\xedveis"}),(0,a.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(I.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar not\xedcias...",value:y,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("select",{value:b,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por categoria",children:[(0,a.jsx)("option",{value:"all",children:"Todas as categorias"}),h.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[F.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,a.jsx)(p.b,{variant:"info",className:"text-white",children:e.category.name})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.views," visualiza\xe7\xf5es • ",new Date(e.publishedAt||e.createdAt).toLocaleDateString("pt-BR")]})]}),(0,a.jsx)(x.a,{variant:"primary",size:"small",onClick:()=>(e=>{if(l.length>=5)return void alert("M\xe1ximo de 5 not\xedcias em destaque permitidas");if(l.find(t=>t.id===e.id))return;let t={...e,position:l.length+1,publishedAt:e.publishedAt||e.createdAt};c([...l,t]),m(u.filter(t=>t.id!==e.id))})(e),disabled:l.length>=5,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})]},"available-".concat(e.id))),0===F.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(d.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"Nenhuma not\xedcia encontrada"}),(0,a.jsx)("p",{className:"text-sm",children:"Tente ajustar os filtros de busca"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[(0,a.jsx)(x.a,{variant:"secondary",onClick:t,children:"Cancelar"}),(0,a.jsx)(x.a,{variant:"primary",onClick:U,disabled:D||0===l.length,children:D?"Salvando...":"Salvar Altera\xe7\xf5es"})]})]})})}function z(e){let{title:t,value:r,description:s,icon:i,trend:o}=e;return(0,a.jsxs)(h.O,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:r}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:s}),o&&(0,a.jsxs)("div",{className:"flex items-center text-xs mt-2 ".concat(o.isPositive?"text-green-600":"text-red-600"),children:[(0,a.jsx)(l.A,{className:"h-3 w-3 mr-1"}),o.value,"% em rela\xe7\xe3o ao m\xeas anterior"]})]}),(0,a.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg",children:(0,a.jsx)(i,{className:"h-6 w-6 text-blue-600"})})]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:t})})]})}function U(){let{settings:e}=(0,E.M)(),{user:t}=(0,D.J)(),[r,i]=(0,s.useState)({totalNews:0,publishedNews:0,draftNews:0,featuredNews:0,totalViews:0,newsByCategory:[],recentNews:[]}),[l,f]=(0,s.useState)({totalCategories:0,activeCategories:0,categoriesWithNews:0,topCategories:[]}),[b,A]=(0,s.useState)({totalBanners:0,activeBanners:0,totalClicks:0,totalImpressions:0,clickThroughRate:0,bannersByPosition:[],topBanners:[]}),[,j]=(0,s.useState)(!0),[C,G]=(0,s.useState)(!1),[S,k]=(0,s.useState)([]),B=async()=>{try{let[e,t,r,a]=await Promise.allSettled([w.b.getNewsStats(),v.M.getCategoryStats(),y._.getBannerStats(),N.getFeaturedNewsWithData()]);"fulfilled"===e.status&&i({...e.value,featuredNews:e.value.featuredNews||0}),"fulfilled"===t.status&&f(t.value),"fulfilled"===r.status&&A(r.value),"fulfilled"===a.status&&k(a.value)}catch(e){console.error("Error loading stats:",e)}finally{j(!1)}};return(0,s.useEffect)(()=>{B()},[]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Vis\xe3o geral do ",e.siteDescription.toLowerCase()]})]}),(0,a.jsx)(x.a,{asChild:!0,children:(0,a.jsxs)(o(),{href:"/admin/editor",className:"flex items-center",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Nova Not\xedcia"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(z,{title:"Total de Not\xedcias",value:r.totalNews,description:"".concat(r.publishedNews," publicadas, ").concat(r.draftNews," rascunhos"),icon:c.A}),(0,a.jsx)(z,{title:"Visualiza\xe7\xf5es",value:r.totalViews.toLocaleString("pt-BR"),description:"Total de visualiza\xe7\xf5es",icon:d.A}),(0,a.jsx)(z,{title:"Categorias",value:l.totalCategories,description:"".concat(l.activeCategories," ativas"),icon:u.A}),(0,a.jsx)(z,{title:"Banners Ativos",value:b.activeBanners,description:"".concat(b.totalClicks," cliques totais"),icon:g.A})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(h.O,{title:"Not\xedcias por Categoria",description:"Distribui\xe7\xe3o de not\xedcias por categoria",children:(0,a.jsx)("div",{className:"space-y-4",children:r.newsByCategory.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.categoryName})]}),(0,a.jsx)(p.b,{variant:"info",children:e.count})]},t))})}),(0,a.jsx)(h.O,{title:"\xdaltimas Publica\xe7\xf5es",description:"Not\xedcias publicadas recentemente",children:(0,a.jsx)("div",{className:"space-y-4",children:r.recentNews.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.publishedAt?new Date(e.publishedAt).toLocaleDateString("pt-BR"):new Date(e.createdAt).toLocaleDateString("pt-BR")})]}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,a.jsx)(d.A,{className:"h-3 w-3 mr-1"}),e.views]})]},e.id))})})]}),(0,a.jsx)(h.O,{title:"Not\xedcias em Destaque",description:"Gerencie as 5 not\xedcias que aparecem na homepage",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Not\xedcias Atuais em Destaque"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[S.length," de 5 not\xedcias selecionadas"]})]}),(0,a.jsxs)(x.a,{onClick:()=>G(!0),className:"flex items-center space-x-2",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Gerenciar Destaques"})]})]}),S.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:S.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-semibold",children:t+1}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.category.name," • ",e.views," visualiza\xe7\xf5es"]})]})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(g.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{children:"Nenhuma not\xedcia em destaque configurada"}),(0,a.jsx)("p",{className:"text-sm",children:'Clique em "Gerenciar Destaques" para configurar'})]})]})}),(0,a.jsx)(h.O,{title:"A\xe7\xf5es R\xe1pidas",description:"Acesso r\xe1pido \xe0s principais funcionalidades",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(o(),{href:"/admin/editor",className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",prefetch:!1,children:[(0,a.jsx)(c.A,{className:"h-6 w-6 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:"Nova Not\xedcia"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Criar uma nova mat\xe9ria"})]})]}),(0,a.jsxs)(o(),{href:"/admin/posts/categories",className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",prefetch:!1,children:[(0,a.jsx)(u.A,{className:"h-6 w-6 text-green-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:"Gerenciar Categorias"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Organizar categorias"})]})]}),(0,a.jsxs)(o(),{href:"/admin/banners",className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",prefetch:!1,children:[(0,a.jsx)(m.A,{className:"h-6 w-6 text-purple-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:"Gerenciar Banners"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Configurar publicidade"})]})]})]})}),C&&(0,a.jsx)(M,{onClose:()=>G(!1),onSave:()=>{G(!1),B()},userId:null==t?void 0:t.uid})]})}function F(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Carregando..."})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,t)=>(0,a.jsx)(h.O,{children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-full"})]})},t))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(h.O,{title:"Carregando...",description:"Aguarde...",children:(0,a.jsx)("div",{className:"space-y-4",children:Array.from({length:5}).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-8 animate-pulse"})]},t))})}),(0,a.jsx)(h.O,{title:"Carregando...",description:"Aguarde...",children:(0,a.jsx)("div",{className:"space-y-4",children:Array.from({length:5}).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"h-2 w-2 bg-gray-200 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded flex-1 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-8 animate-pulse"})]},t))})})]})]}),children:(0,a.jsx)(U,{})})}},28669:(e,t,r)=>{"use strict";r.d(t,{_:()=>l});var a=r(19708),s=r(14585);let i="banners",o="bannerClicks";class l{static async createBanner(e,t){try{return(await (0,a.gS)((0,a.rJ)(s.db,i),{title:e.title,image:t,link:e.link,position:e.position,isActive:e.isActive,order:e.order,clicks:0,impressions:0,maxClicks:e.maxClicks||null,maxImpressions:e.maxImpressions||null,createdAt:(0,a.O5)(),updatedAt:(0,a.O5)(),startsAt:e.startsAt||null,expiresAt:e.expiresAt||null,targetAudience:e.targetAudience||""})).id}catch(e){throw console.error("Create banner error:",e),Error("Erro ao criar banner")}}static async updateBanner(e,t,r){try{let o={...t,updatedAt:(0,a.O5)()};r&&(o.image=r),await (0,a.mZ)((0,a.H9)(s.db,i,e),o)}catch(e){throw console.error("Update banner error:",e),Error("Erro ao atualizar banner")}}static async deleteBanner(e){try{await (0,a.kd)((0,a.H9)(s.db,i,e))}catch(e){throw console.error("Delete banner error:",e),Error("Erro ao excluir banner")}}static async getBannerById(e){try{var t,r,o,l;let n=await (0,a.x7)((0,a.H9)(s.db,i,e));if(!n.exists())return null;let c=n.data();return{id:n.id,...c,createdAt:(null==(t=c.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(r=c.updatedAt)?void 0:r.toDate())||new Date,startsAt:null==(o=c.startsAt)?void 0:o.toDate(),expiresAt:null==(l=c.expiresAt)?void 0:l.toDate()}}catch(e){throw console.error("Get banner by ID error:",e),Error("Erro ao buscar banner")}}static async getAllBanners(){try{let e=(0,a.P)((0,a.rJ)(s.db,i),(0,a.My)("createdAt","desc"));return(await (0,a.GG)(e)).docs.map(e=>{var t,r,a,s;let i=e.data();return{id:e.id,...i,createdAt:(null==(t=i.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(r=i.updatedAt)?void 0:r.toDate())||new Date,startsAt:null==(a=i.startsAt)?void 0:a.toDate(),expiresAt:null==(s=i.expiresAt)?void 0:s.toDate()}})}catch(e){throw console.error("Get all banners error:",e),Error("Erro ao buscar banners")}}static async getActiveBanners(){try{let e=(0,a.P)((0,a.rJ)(s.db,i),(0,a.My)("createdAt","desc")),t=await (0,a.GG)(e),r=new Date;return t.docs.map(e=>{var t,r,a,s;let i=e.data(),o=e=>{if(!e)return e;let t=decodeURIComponent(e);return t=(t=(t=(t=(t=t.replace(/^http:\/\/localhost:3000\/_next\/image\?url=/,"")).replace(/^https:\/\/localhost:3000\/_next\/image\?url=/,"")).replace(/&w=\d+&q=\d+$/,"")).replace(/&w=\d+$/,"")).replace(/&q=\d+$/,"")},l=o(i.image),n=o(i.link);return{id:e.id,...i,image:l,link:n,createdAt:(null==(t=i.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(r=i.updatedAt)?void 0:r.toDate())||new Date,startsAt:null==(a=i.startsAt)?void 0:a.toDate(),expiresAt:null==(s=i.expiresAt)?void 0:s.toDate()}}).filter(e=>!!e.isActive&&(!e.expiresAt||!(e.expiresAt<r))).sort((e,t)=>(e.order||0)-(t.order||0))}catch(e){throw console.error("Get active banners error:",e),Error("Erro ao buscar banners ativos")}}static async getActiveBannersByPosition(e){try{let t=new Date,r=(0,a.P)((0,a.rJ)(s.db,i),(0,a._M)("position","==",e),(0,a._M)("isActive","==",!0),(0,a.My)("order","asc"));return(await (0,a.GG)(r)).docs.map(e=>{var t,r,a,s;let i=e.data();return{id:e.id,...i,createdAt:(null==(t=i.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(r=i.updatedAt)?void 0:r.toDate())||new Date,startsAt:null==(a=i.startsAt)?void 0:a.toDate(),expiresAt:null==(s=i.expiresAt)?void 0:s.toDate()}}).filter(e=>!e.expiresAt||e.expiresAt>t)}catch(e){throw console.error("Get active banners by position error:",e),Error("Erro ao buscar banners ativos")}}static async recordBannerClick(e,t,r){try{await (0,a.gS)((0,a.rJ)(s.db,o),{bannerId:e,position:t,clickedAt:(0,a.O5)(),userAgent:(null==r?void 0:r.userAgent)||"",referrer:(null==r?void 0:r.referrer)||"",ipAddress:(null==r?void 0:r.ipAddress)||""}),await (0,a.mZ)((0,a.H9)(s.db,i,e),{clicks:(0,a.GV)(1)})}catch(e){console.error("Record banner click error:",e)}}static async recordBannerImpression(e){try{await (0,a.mZ)((0,a.H9)(s.db,i,e),{impressions:(0,a.GV)(1)})}catch(e){console.error("Record banner impression error:",e)}}static async updateBannerOrder(e){try{let t=e.map((e,t)=>(0,a.mZ)((0,a.H9)(s.db,i,e),{order:t+1,updatedAt:(0,a.O5)()}));await Promise.all(t)}catch(e){throw console.error("Update banner order error:",e),Error("Erro ao atualizar ordem dos banners")}}static async toggleBannerStatus(e){try{let t=await this.getBannerById(e);if(!t)throw Error("Banner n\xe3o encontrado");await (0,a.mZ)((0,a.H9)(s.db,i,e),{isActive:!t.isActive,updatedAt:(0,a.O5)()})}catch(e){throw console.error("Toggle banner status error:",e),Error("Erro ao alterar status do banner")}}static async getBannerStats(){try{if(console.log("Fetching banner stats..."),!s.db)throw Error("Firebase Firestore n\xe3o foi inicializado");let e=await (0,a.GG)((0,a.rJ)(s.db,i));console.log("Banners fetched:",e.docs.length);let t=await (0,a.GG)((0,a.rJ)(s.db,o));console.log("Clicks fetched:",t.docs.length);let r=e.docs.map(e=>{var t,r,a,s;let i=e.data();return{id:e.id,...i,createdAt:(null==(t=i.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(r=i.updatedAt)?void 0:r.toDate())||new Date,startsAt:null==(a=i.startsAt)?void 0:a.toDate(),expiresAt:null==(s=i.expiresAt)?void 0:s.toDate()}}),l=r.filter(e=>e.isActive),n=r.reduce((e,t)=>e+t.clicks,0),c=r.reduce((e,t)=>e+t.impressions,0),d=["sidebar-top","sidebar-bottom","header","content-top","content-bottom","between-news"].map(e=>{let t=r.filter(t=>t.position===e),a=t.reduce((e,t)=>e+t.clicks,0);return{position:e,count:t.length,clicks:a}}),u=r.map(e=>({id:e.id,title:e.title,clicks:e.clicks,impressions:e.impressions,ctr:e.impressions>0?e.clicks/e.impressions*100:0})).sort((e,t)=>t.clicks-e.clicks).slice(0,10);return{totalBanners:r.length,activeBanners:l.length,totalClicks:n,totalImpressions:c,clickThroughRate:c>0?n/c*100:0,bannersByPosition:d,topBanners:u}}catch(e){return console.error("Get banner stats error:",e),e instanceof Error&&(console.error("Error details:",e.message),console.error("Error stack:",e.stack)),{totalBanners:0,activeBanners:0,totalClicks:0,totalImpressions:0,clickThroughRate:0,bannersByPosition:[],topBanners:[]}}}static async getBannerClicks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{let r=new Date;r.setDate(r.getDate()-t);let i=(0,a.P)((0,a.rJ)(s.db,o),(0,a._M)("clickedAt",">=",r),(0,a.My)("clickedAt","desc"));return e&&(i=(0,a.P)((0,a.rJ)(s.db,o),(0,a._M)("bannerId","==",e),(0,a._M)("clickedAt",">=",r),(0,a.My)("clickedAt","desc"))),(await (0,a.GG)(i)).docs.map(e=>{var t;let r=e.data();return{id:e.id,bannerId:r.bannerId||"",position:r.position||"sidebar-top",clickedAt:(null==(t=r.clickedAt)?void 0:t.toDate())||new Date,userAgent:r.userAgent||"",referrer:r.referrer||""}})}catch(e){throw console.error("Get banner clicks error:",e),Error("Erro ao buscar cliques dos banners")}}static async cleanupExpiredBanners(){try{let e=new Date,t=(0,a.P)((0,a.rJ)(s.db,i),(0,a._M)("expiresAt","<=",e),(0,a._M)("isActive","==",!0)),r=(await (0,a.GG)(t)).docs.map(e=>(0,a.mZ)(e.ref,{isActive:!1,updatedAt:(0,a.O5)()}));await Promise.all(r)}catch(e){throw console.error("Cleanup expired banners error:",e),Error("Erro ao limpar banners expirados")}}}},29141:(e,t,r)=>{"use strict";r.d(t,{J:()=>n,UserProvider:()=>l});var a=r(95155),s=r(12115),i=r(34426);let o=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,s.useState)(null),[n,c]=(0,s.useState)(!0),d=async()=>{try{let e=await i.z.getCurrentUser();l(e)}catch(e){console.error("Error refreshing user:",e),l(null)}};return(0,s.useEffect)(()=>{d().finally(()=>c(!1))},[]),(0,a.jsx)(o.Provider,{value:{user:r,setUser:l,refreshUser:d,isLoading:n},children:t})}function n(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},31692:(e,t,r)=>{"use strict";r.d(t,{h:()=>c});var a=r(14585),s=r(19708),i=r(79996),o=r(96975);let l="settings",n="site";class c{static async getSettings(){try{let r=(0,s.H9)(a.db,l,n),i=await (0,s.x7)(r);if(i.exists()){var e,t;let r=i.data();return{...o.a,...r,createdAt:(null==(e=r.createdAt)?void 0:e.toDate())||new Date,updatedAt:(null==(t=r.updatedAt)?void 0:t.toDate())||new Date}}return o.a}catch(e){return console.error("Erro ao buscar configura\xe7\xf5es:",e),o.a}}static async updateSettings(e){try{let t=(0,s.H9)(a.db,l,n),r={...e,updatedAt:new Date};(await (0,s.x7)(t)).exists()?await (0,s.mZ)(t,r):await (0,s.BN)(t,{...o.a,...r,createdAt:new Date})}catch(e){throw console.error("Erro ao atualizar configura\xe7\xf5es:",e),Error("Falha ao salvar configura\xe7\xf5es")}}static async uploadFavicon(e){try{if(!e.type.startsWith("image/"))throw Error("Arquivo deve ser uma imagem");if(e.size>1048576)throw Error("Arquivo deve ter no m\xe1ximo 1MB");let t=Date.now(),r="favicon-".concat(t,".").concat(e.name.split(".").pop()),s=(0,i.KR)(a.IG,"favicons/".concat(r));return await (0,i.D)(s,e),await (0,i.qk)(s)}catch(e){throw console.error("Erro ao fazer upload do favicon:",e),Error("Falha ao fazer upload do favicon")}}static async deleteFavicon(e){try{if(!e)return;let t=new URL(e).pathname.match(/\/o\/(.+?)\?/);if(t){let e=decodeURIComponent(t[1]),r=(0,i.KR)(a.IG,e);await (0,i.XR)(r)}}catch(e){console.error("Erro ao deletar favicon antigo:",e)}}static async uploadLogo(e){try{if(!e.type.startsWith("image/"))throw Error("Arquivo deve ser uma imagem");if(e.size>2097152)throw Error("Arquivo deve ter no m\xe1ximo 2MB");let t=Date.now(),r="logo_".concat(t,".").concat(e.name.split(".").pop()),s=(0,i.KR)(a.IG,"logos/".concat(r));return await (0,i.D)(s,e),await (0,i.qk)(s)}catch(e){throw console.error("Erro ao fazer upload da logo:",e),e}}static async deleteLogo(e){try{if(!e)return;let t=new URL(e).pathname.match(/\/o\/(.+?)\?/);if(t){let e=decodeURIComponent(t[1]),r=(0,i.KR)(a.IG,e);await (0,i.XR)(r)}}catch(e){console.error("Erro ao deletar logo antiga:",e)}}static async updateFavicon(e){try{let t=await this.getSettings();t.faviconUrl&&await this.deleteFavicon(t.faviconUrl);let r=await this.uploadFavicon(e);return await this.updateSettings({faviconUrl:r}),r}catch(e){throw console.error("Erro ao atualizar favicon:",e),e}}static async updateLogo(e){try{let t=await this.getSettings();t.logoUrl&&await this.deleteLogo(t.logoUrl);let r=await this.uploadLogo(e);return await this.updateSettings({logoUrl:r}),r}catch(e){throw console.error("Erro ao atualizar logo:",e),e}}static async updateFooterLogo(e){try{let t=await this.getSettings();t.footerLogoUrl&&await this.deleteLogo(t.footerLogoUrl);let r=await this.uploadLogo(e);return await this.updateSettings({footerLogoUrl:r}),r}catch(e){throw console.error("Erro ao atualizar logo do footer:",e),e}}static isValidUrl(e){try{return new URL(e),!0}catch(e){return!1}}static isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}static isValidPhone(e){return/^\(\d{2}\)\s\d{4,5}-\d{4}$/.test(e)}}},34426:(e,t,r)=>{"use strict";r.d(t,{z:()=>l});var a=r(81328),s=r(19708),i=r(14585);let o="users";class l{static async login(e){try{let t=(await (0,a.x9)(i.j2,e.email,e.password)).user,r=await (0,s.x7)((0,s.H9)(i.db,o,t.uid));if(!r.exists())throw Error("Usu\xe1rio n\xe3o encontrado no sistema");let l=r.data();if(!l.isActive)throw Error("Usu\xe1rio desativado");return await (0,s.mZ)((0,s.H9)(i.db,o,t.uid),{lastLoginAt:new Date}),{uid:t.uid,email:t.email,name:l.name,role:l.role,isActive:l.isActive,avatar:l.avatar}}catch(e){throw console.error("Login error:",e),Error("Erro ao fazer login. Verifique suas credenciais.")}}static async logout(){try{await (0,a.CI)(i.j2)}catch(e){throw console.error("Logout error:",e),Error("Erro ao fazer logout")}}static async getCurrentUser(){return new Promise(e=>{let t=(0,a.hg)(i.j2,async r=>{if(t(),!r)return void e(null);try{let t=await (0,s.x7)((0,s.H9)(i.db,o,r.uid));if(!t.exists())return void e(null);let a=t.data();if(!a.isActive)return void e(null);e({uid:r.uid,email:r.email,name:a.name,role:a.role,isActive:a.isActive,avatar:a.avatar})}catch(t){console.error("Get current user error:",t),e(null)}})})}static async createAdminUser(e){try{throw Error("Cria\xe7\xe3o de usu\xe1rios deve ser feita via Firebase Console ou server-side function")}catch(e){throw console.error("Create admin user error:",e),Error("Erro ao criar usu\xe1rio administrador")}}static async updateAdminUser(e,t){try{await (0,s.mZ)((0,s.H9)(i.db,o,e),{...t,updatedAt:new Date})}catch(e){throw console.error("Update admin user error:",e),Error("Erro ao atualizar usu\xe1rio")}}static async getAdminUser(e){try{let t=await (0,s.x7)((0,s.H9)(i.db,o,e));if(!t.exists())return null;return t.data()}catch(e){throw console.error("Get admin user error:",e),Error("Erro ao buscar usu\xe1rio")}}static hasPermission(e,t){let r={editor:1,admin:2,super_admin:3};return r[e]>=r[t]}static onAuthStateChange(e){return(0,a.hg)(i.j2,async t=>{if(!t)return void e(null);try{let r=await (0,s.x7)((0,s.H9)(i.db,o,t.uid));if(!r.exists())return void e(null);let a=r.data();if(!a.isActive)return void e(null);e({uid:t.uid,email:t.email,name:a.name,role:a.role,isActive:a.isActive,avatar:a.avatar})}catch(t){console.error("Auth state change error:",t),e(null)}})}}},61922:(e,t,r)=>{"use strict";r.d(t,{a:()=>i});var a=r(95155),s=r(64269);function i(e){let{variant:t="primary",size:r="medium",children:i,className:o="",asChild:l=!1,...n}=e;return(0,a.jsx)("button",{className:(0,s.cn)("inline-flex items-center justify-center font-medium rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",tertiary:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",link:"bg-transparent text-blue-600 hover:text-blue-700 hover:underline focus:ring-blue-500"}[t],{small:"px-3 py-1.5 text-sm",medium:"px-4 py-2 text-sm",large:"px-6 py-3 text-base"}[r],o),...n,children:i})}},62773:(e,t,r)=>{Promise.resolve().then(r.bind(r,23868))},81402:(e,t,r)=>{"use strict";r.d(t,{SettingsProvider:()=>n,M:()=>c});var a=r(95155),s=r(12115),i=r(31692),o=r(96975);let l=(0,s.createContext)(void 0);function n(e){let{children:t}=e,r=function(){let[e,t]=(0,s.useState)(o.a),[r,a]=(0,s.useState)(!0),[l,n]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{try{a(!0),n(null);let e=await i.h.getSettings();t(e)}catch(e){console.error("Erro ao carregar configura\xe7\xf5es:",e),n("Erro ao carregar configura\xe7\xf5es do site"),t(o.a)}finally{a(!1)}})()},[]),{settings:e,isLoading:r,error:l,refreshSettings:async()=>{try{n(null);let e=await i.h.getSettings();t(e)}catch(e){console.error("Erro ao atualizar configura\xe7\xf5es:",e),n("Erro ao atualizar configura\xe7\xf5es do site")}}}}();return(0,a.jsx)(l.Provider,{value:r,children:t})}function c(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useSettingsContext must be used within a SettingsProvider");return e}},94315:(e,t,r)=>{"use strict";r.d(t,{b:()=>i});var a=r(95155),s=r(64269);function i(e){let{children:t,variant:r="default",size:i="small",className:o=""}=e;return(0,a.jsx)("span",{className:(0,s.cn)("inline-flex items-center font-medium rounded-full",{default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[r],{small:"px-2 py-1 text-xs",medium:"px-3 py-1 text-sm"}[i],o),children:t})}},96975:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});let a={siteName:"Conex\xe3o Goi\xe1s",siteDescription:"Portal de not\xedcias de Goi\xe1s. Informa\xe7\xe3o confi\xe1vel e atualizada.",siteUrl:"https://conexaogoias.com",contactEmail:"contato@conexaogoias.com",adminEmail:"admin@conexaogoias.com",phone1:"(62) 99999-9999",phone2:"(62) 3333-3333",address:"Rua das Flores, 123\nCentro - Goi\xe2nia/GO",socialMedia:{facebook:"https://facebook.com/conexaogoias",twitter:"https://twitter.com/conexaogoias",instagram:"https://instagram.com/conexaogoias",youtube:"https://youtube.com/@conexaogoias",whatsapp:"https://wa.me/5562999999999"},twitterHandle:"@conexaogoias",foundingYear:new Date().getFullYear(),faviconUrl:"",logoUrl:"",footerLogoUrl:"",createdAt:new Date,updatedAt:new Date}}},e=>{e.O(0,[9135,7210,9779,3643,2619,9784,4366,8441,1255,7358],()=>e(e.s=62773)),_N_E=e.O()}]);