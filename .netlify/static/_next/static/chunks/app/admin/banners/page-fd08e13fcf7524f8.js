(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5734],{2411:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>A});var a=t(95155),s=t(12115),n=t(15239),i=t(6191),l=t(86651),o=t(49238),c=t(57828),d=t(16485),u=t(70532),m=t(11010),x=t(71360),p=t(80534),g=t(3512),b=t(61922),h=t(94315),v=t(88114),y=t(63554),f=t(28669),j=t(52817);function A(){let[e,r]=(0,s.useState)([]),[t,A]=(0,s.useState)(!0),[w,N]=(0,s.useState)(""),[k,D]=(0,s.useState)("all"),[C,B]=(0,s.useState)([]),[E,I]=(0,s.useState)(!1),[S,G]=(0,s.useState)(null),[z,U]=(0,s.useState)({title:"",imageUrl:"",linkUrl:"",position:"header",isActive:!0,startDate:"",endDate:"",maxClicks:0,maxImpressions:0,order:0});(0,s.useEffect)(()=>{P()},[]);let P=async()=>{try{A(!0);let e=await f._.getAllBanners();r(e)}catch(e){console.error("Error loading banners:",e)}finally{A(!1)}},_=async t=>{if(t.preventDefault(),!z.imageUrl||!z.imageUrl.trim())return void alert("Por favor, fa\xe7a upload de uma imagem antes de salvar o banner.");if(!z.imageUrl.startsWith("http://")&&!z.imageUrl.startsWith("https://"))return void alert("A URL da imagem n\xe3o \xe9 v\xe1lida. Por favor, fa\xe7a upload de uma nova imagem.");try{if(S)await f._.updateBanner(S.id,{title:z.title,link:z.linkUrl,position:z.position,isActive:z.isActive,order:z.order,maxClicks:z.maxClicks||void 0,maxImpressions:z.maxImpressions||void 0,startsAt:z.startDate?new Date(z.startDate):void 0,expiresAt:z.endDate?new Date(z.endDate):void 0,targetAudience:""},z.imageUrl),r(e.map(e=>e.id===S.id?{...e,...z}:e));else{let t={title:z.title,link:z.linkUrl,position:z.position,isActive:z.isActive,order:e.length+1,maxClicks:z.maxClicks||void 0,maxImpressions:z.maxImpressions||void 0,startsAt:z.startDate?new Date(z.startDate):void 0,expiresAt:z.endDate?new Date(z.endDate):void 0,targetAudience:""},a=await f._.createBanner(t,z.imageUrl),s=await f._.getBannerById(a);s&&r([...e,s])}H()}catch(e){console.error("Error saving banner:",e),alert("Erro ao salvar o banner. Verifique se todos os campos est\xe3o preenchidos corretamente.")}},M=async e=>{if(confirm("Tem certeza que deseja excluir este banner?"))try{await f._.deleteBanner(e),r(r=>r.filter(r=>r.id!==e)),B(r=>r.filter(r=>r!==e))}catch(e){console.error("Error deleting banner:",e)}},O=async e=>{try{await f._.toggleBannerStatus(e.id),r(r=>r.map(r=>r.id===e.id?{...r,isActive:!r.isActive}:r))}catch(e){console.error("Error updating banner status:",e)}},H=()=>{U({title:"",imageUrl:"",linkUrl:"",position:"header",isActive:!0,startDate:"",endDate:"",maxClicks:0,maxImpressions:0,order:0}),G(null),I(!1)},q=(e||[]).filter(e=>{if(!e||!e.title)return!1;let r=e.title.toLowerCase().includes(w.toLowerCase()),t="all"===k||"active"===k&&e.isActive||"inactive"===k&&!e.isActive;return r&&t});return t?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Banners"})}),(0,a.jsx)(g.O,{children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Banners Publicit\xe1rios"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Gerencie os banners do portal"})]}),(0,a.jsxs)(b.a,{onClick:()=>I(!0),children:[(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Novo Banner"]})]}),E&&(0,a.jsx)(g.O,{title:S?"Editar Banner":"Novo Banner",children:(0,a.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xedtulo *"}),(0,a.jsx)("input",{type:"text",required:!0,value:z.title,onChange:e=>U(r=>({...r,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Banner Principal"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Posi\xe7\xe3o *"}),(0,a.jsxs)("select",{required:!0,value:z.position,onChange:e=>U(r=>({...r,position:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Selecionar posi\xe7\xe3o do banner",children:[(0,a.jsx)("option",{value:"header",children:"Cabe\xe7alho"}),(0,a.jsx)("option",{value:"content-top",children:"Topo do Conte\xfado"}),(0,a.jsx)("option",{value:"content-bottom",children:"Rodap\xe9 do Conte\xfado"}),(0,a.jsx)("option",{value:"sidebar-top",children:"Topo da Sidebar"}),(0,a.jsx)("option",{value:"sidebar-bottom",children:"Rodap\xe9 da Sidebar"}),(0,a.jsx)("option",{value:"between-news",children:"Entre Not\xedcias"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Imagem do Banner *"}),(0,a.jsx)(y.G,{onImageUploaded:e=>U(r=>({...r,imageUrl:e})),currentImage:z.imageUrl,aspectRatio:"banner",className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link de Destino"}),(0,a.jsx)("input",{type:"url",value:z.linkUrl,onChange:e=>U(r=>({...r,linkUrl:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://exemplo.com"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de In\xedcio"}),(0,a.jsx)("input",{type:"datetime-local",value:z.startDate,onChange:e=>U(r=>({...r,startDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Data de in\xedcio do banner"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Fim"}),(0,a.jsx)("input",{type:"datetime-local",value:z.endDate,onChange:e=>U(r=>({...r,endDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Data de fim do banner"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe1ximo de Cliques"}),(0,a.jsx)("input",{type:"number",min:"0",value:z.maxClicks,onChange:e=>U(r=>({...r,maxClicks:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0 = ilimitado"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe1ximo de Impress\xf5es"}),(0,a.jsx)("input",{type:"number",min:"0",value:z.maxImpressions,onChange:e=>U(r=>({...r,maxImpressions:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0 = ilimitado"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",id:"isActive",checked:z.isActive,onChange:e=>U(r=>({...r,isActive:e.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsx)("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"Banner ativo"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)(b.a,{type:"button",variant:"secondary",onClick:H,children:"Cancelar"}),(0,a.jsxs)(b.a,{type:"submit",disabled:!z.imageUrl||!z.imageUrl.trim()||!z.imageUrl.startsWith("http://")&&!z.imageUrl.startsWith("https://"),children:[S?"Atualizar":"Criar"," Banner"]})]})]})}),(0,a.jsx)(g.O,{children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar banners...",value:w,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Buscar banners"})]})}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)("select",{value:k,onChange:e=>D(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por status",children:[(0,a.jsx)("option",{value:"all",children:"Todos os status"}),(0,a.jsx)("option",{value:"active",children:"Ativos"}),(0,a.jsx)("option",{value:"inactive",children:"Inativos"})]})})]})}),(0,a.jsxs)(g.O,{children:[(0,a.jsxs)(v.m_,{children:[(0,a.jsx)(v.$3,{children:(0,a.jsxs)(v.Ef,{children:[(0,a.jsx)(v.zz,{className:"w-12",children:(0,a.jsx)("input",{type:"checkbox",checked:C.length===q.length&&q.length>0,onChange:()=>{C.length===q.length?B([]):B(q.map(e=>e.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-label":"Selecionar todos os banners"})}),(0,a.jsx)(v.zz,{children:"Banner"}),(0,a.jsx)(v.zz,{children:"Posi\xe7\xe3o"}),(0,a.jsx)(v.zz,{children:"Status"}),(0,a.jsx)(v.zz,{children:"Cliques"}),(0,a.jsx)(v.zz,{children:"Impress\xf5es"}),(0,a.jsx)(v.zz,{children:"Data"}),(0,a.jsx)(v.zz,{className:"w-12",children:"A\xe7\xf5es"})]})}),(0,a.jsx)(v.Q3,{children:q.map(e=>e&&e.id?(0,a.jsxs)(v.Ef,{isSelected:C.includes(e.id),children:[(0,a.jsx)(v.w1,{children:(0,a.jsx)("input",{type:"checkbox",checked:C.includes(e.id),onChange:()=>{var r;return r=e.id,void B(e=>e.includes(r)?e.filter(e=>e!==r):[...e,r])},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-label":"Selecionar banner ".concat(e.title)})}),(0,a.jsx)(v.w1,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-16 h-12 bg-gray-100 rounded flex items-center justify-center overflow-hidden relative",children:e.image?(0,a.jsx)(n.default,{src:e.image,alt:e.title,fill:!0,className:"object-cover",onError:e=>{e.target.style.display="none"}}):(0,a.jsx)("div",{className:"text-gray-400 text-xs",children:"Sem imagem"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),e.link&&(0,a.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.link})]})]})}),(0,a.jsx)(v.w1,{children:(0,a.jsx)(h.b,{variant:"info",children:(e=>{switch(e){case"header":return"Cabe\xe7alho";case"content-top":return"Topo do Conte\xfado";case"content-bottom":return"Rodap\xe9 do Conte\xfado";case"sidebar-top":return"Topo da Sidebar";case"sidebar-bottom":return"Rodap\xe9 da Sidebar";case"between-news":return"Entre Not\xedcias";default:return e}})(e.position)})}),(0,a.jsx)(v.w1,{children:(0,a.jsx)(h.b,{variant:e.isActive?"success":"warning",children:e.isActive?"Ativo":"Inativo"})}),(0,a.jsx)(v.w1,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:e.clicks||0})]})}),(0,a.jsx)(v.w1,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:e.impressions||0})]})}),(0,a.jsx)(v.w1,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:(0,j.Yq)(e.createdAt)})]})}),(0,a.jsx)(v.w1,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(b.a,{variant:"tertiary",size:"small",onClick:()=>O(e),children:e.isActive?(0,a.jsx)(u.A,{className:"h-4 w-4"}):(0,a.jsx)(c.A,{className:"h-4 w-4"})}),(0,a.jsx)(b.a,{variant:"tertiary",size:"small",onClick:()=>{G(e),U({title:e.title,imageUrl:e.image,linkUrl:e.link,position:e.position,isActive:e.isActive,startDate:e.startsAt?new Date(e.startsAt).toISOString().slice(0,16):"",endDate:e.expiresAt?new Date(e.expiresAt).toISOString().slice(0,16):"",maxClicks:e.maxClicks||0,maxImpressions:e.maxImpressions||0,order:e.order||0}),I(!0)},children:(0,a.jsx)(m.A,{className:"h-4 w-4"})}),(0,a.jsx)(b.a,{variant:"tertiary",size:"small",onClick:()=>M(e.id),children:(0,a.jsx)(x.A,{className:"h-4 w-4"})})]})})]},e.id):null)})]}),0===q.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(p.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum banner encontrado"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:w||"all"!==k?"Tente ajustar os filtros de busca.":"Comece criando seu primeiro banner."}),!w&&"all"===k&&(0,a.jsxs)(b.a,{onClick:()=>I(!0),children:[(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Novo Banner"]})]})]})]})}},3512:(e,r,t)=>{"use strict";t.d(r,{O:()=>n});var a=t(95155),s=t(64269);function n(e){let{children:r,className:t="",title:n,description:i,footer:l}=e;return(0,a.jsxs)("div",{className:(0,s.cn)("bg-white border border-gray-200 rounded-lg shadow-sm",t),children:[(n||i)&&(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[n&&(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:n}),i&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:i})]}),(0,a.jsx)("div",{className:"px-6 py-4",children:r}),l&&(0,a.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:l})]})}},14585:(e,r,t)=>{"use strict";t.d(r,{IG:()=>d,db:()=>c,j2:()=>o});var a=t(52078),s=t(81328),n=t(19708),i=t(79996);let l=(0,a.Wp)({apiKey:"AIzaSyBjdbOl0xyru5TfEQtu2iC2wqIz3QvrRQM",authDomain:"aconexaogoias.firebaseapp.com",projectId:"aconexaogoias",storageBucket:"aconexaogoias.firebasestorage.app",messagingSenderId:"6509088743",appId:"1:6509088743:web:f1866c676e18c53204f742"}),o=(0,s.xI)(l),c=(0,n.aU)(l),d=(0,i.c7)(l)},28669:(e,r,t)=>{"use strict";t.d(r,{_:()=>l});var a=t(19708),s=t(14585);let n="banners",i="bannerClicks";class l{static async createBanner(e,r){try{return(await (0,a.gS)((0,a.rJ)(s.db,n),{title:e.title,image:r,link:e.link,position:e.position,isActive:e.isActive,order:e.order,clicks:0,impressions:0,maxClicks:e.maxClicks||null,maxImpressions:e.maxImpressions||null,createdAt:(0,a.O5)(),updatedAt:(0,a.O5)(),startsAt:e.startsAt||null,expiresAt:e.expiresAt||null,targetAudience:e.targetAudience||""})).id}catch(e){throw console.error("Create banner error:",e),Error("Erro ao criar banner")}}static async updateBanner(e,r,t){try{let i={...r,updatedAt:(0,a.O5)()};t&&(i.image=t),await (0,a.mZ)((0,a.H9)(s.db,n,e),i)}catch(e){throw console.error("Update banner error:",e),Error("Erro ao atualizar banner")}}static async deleteBanner(e){try{await (0,a.kd)((0,a.H9)(s.db,n,e))}catch(e){throw console.error("Delete banner error:",e),Error("Erro ao excluir banner")}}static async getBannerById(e){try{var r,t,i,l;let o=await (0,a.x7)((0,a.H9)(s.db,n,e));if(!o.exists())return null;let c=o.data();return{id:o.id,...c,createdAt:(null==(r=c.createdAt)?void 0:r.toDate())||new Date,updatedAt:(null==(t=c.updatedAt)?void 0:t.toDate())||new Date,startsAt:null==(i=c.startsAt)?void 0:i.toDate(),expiresAt:null==(l=c.expiresAt)?void 0:l.toDate()}}catch(e){throw console.error("Get banner by ID error:",e),Error("Erro ao buscar banner")}}static async getAllBanners(){try{let e=(0,a.P)((0,a.rJ)(s.db,n),(0,a.My)("createdAt","desc"));return(await (0,a.GG)(e)).docs.map(e=>{var r,t,a,s;let n=e.data();return{id:e.id,...n,createdAt:(null==(r=n.createdAt)?void 0:r.toDate())||new Date,updatedAt:(null==(t=n.updatedAt)?void 0:t.toDate())||new Date,startsAt:null==(a=n.startsAt)?void 0:a.toDate(),expiresAt:null==(s=n.expiresAt)?void 0:s.toDate()}})}catch(e){throw console.error("Get all banners error:",e),Error("Erro ao buscar banners")}}static async getActiveBanners(){try{let e=(0,a.P)((0,a.rJ)(s.db,n),(0,a.My)("createdAt","desc")),r=await (0,a.GG)(e),t=new Date;return r.docs.map(e=>{var r,t,a,s;let n=e.data(),i=e=>{if(!e)return e;let r=decodeURIComponent(e);return r=(r=(r=(r=(r=r.replace(/^http:\/\/localhost:3000\/_next\/image\?url=/,"")).replace(/^https:\/\/localhost:3000\/_next\/image\?url=/,"")).replace(/&w=\d+&q=\d+$/,"")).replace(/&w=\d+$/,"")).replace(/&q=\d+$/,"")},l=i(n.image),o=i(n.link);return{id:e.id,...n,image:l,link:o,createdAt:(null==(r=n.createdAt)?void 0:r.toDate())||new Date,updatedAt:(null==(t=n.updatedAt)?void 0:t.toDate())||new Date,startsAt:null==(a=n.startsAt)?void 0:a.toDate(),expiresAt:null==(s=n.expiresAt)?void 0:s.toDate()}}).filter(e=>!!e.isActive&&(!e.expiresAt||!(e.expiresAt<t))).sort((e,r)=>(e.order||0)-(r.order||0))}catch(e){throw console.error("Get active banners error:",e),Error("Erro ao buscar banners ativos")}}static async getActiveBannersByPosition(e){try{let r=new Date,t=(0,a.P)((0,a.rJ)(s.db,n),(0,a._M)("position","==",e),(0,a._M)("isActive","==",!0),(0,a.My)("order","asc"));return(await (0,a.GG)(t)).docs.map(e=>{var r,t,a,s;let n=e.data();return{id:e.id,...n,createdAt:(null==(r=n.createdAt)?void 0:r.toDate())||new Date,updatedAt:(null==(t=n.updatedAt)?void 0:t.toDate())||new Date,startsAt:null==(a=n.startsAt)?void 0:a.toDate(),expiresAt:null==(s=n.expiresAt)?void 0:s.toDate()}}).filter(e=>!e.expiresAt||e.expiresAt>r)}catch(e){throw console.error("Get active banners by position error:",e),Error("Erro ao buscar banners ativos")}}static async recordBannerClick(e,r,t){try{await (0,a.gS)((0,a.rJ)(s.db,i),{bannerId:e,position:r,clickedAt:(0,a.O5)(),userAgent:(null==t?void 0:t.userAgent)||"",referrer:(null==t?void 0:t.referrer)||"",ipAddress:(null==t?void 0:t.ipAddress)||""}),await (0,a.mZ)((0,a.H9)(s.db,n,e),{clicks:(0,a.GV)(1)})}catch(e){console.error("Record banner click error:",e)}}static async recordBannerImpression(e){try{await (0,a.mZ)((0,a.H9)(s.db,n,e),{impressions:(0,a.GV)(1)})}catch(e){console.error("Record banner impression error:",e)}}static async updateBannerOrder(e){try{let r=e.map((e,r)=>(0,a.mZ)((0,a.H9)(s.db,n,e),{order:r+1,updatedAt:(0,a.O5)()}));await Promise.all(r)}catch(e){throw console.error("Update banner order error:",e),Error("Erro ao atualizar ordem dos banners")}}static async toggleBannerStatus(e){try{let r=await this.getBannerById(e);if(!r)throw Error("Banner n\xe3o encontrado");await (0,a.mZ)((0,a.H9)(s.db,n,e),{isActive:!r.isActive,updatedAt:(0,a.O5)()})}catch(e){throw console.error("Toggle banner status error:",e),Error("Erro ao alterar status do banner")}}static async getBannerStats(){try{if(console.log("Fetching banner stats..."),!s.db)throw Error("Firebase Firestore n\xe3o foi inicializado");let e=await (0,a.GG)((0,a.rJ)(s.db,n));console.log("Banners fetched:",e.docs.length);let r=await (0,a.GG)((0,a.rJ)(s.db,i));console.log("Clicks fetched:",r.docs.length);let t=e.docs.map(e=>{var r,t,a,s;let n=e.data();return{id:e.id,...n,createdAt:(null==(r=n.createdAt)?void 0:r.toDate())||new Date,updatedAt:(null==(t=n.updatedAt)?void 0:t.toDate())||new Date,startsAt:null==(a=n.startsAt)?void 0:a.toDate(),expiresAt:null==(s=n.expiresAt)?void 0:s.toDate()}}),l=t.filter(e=>e.isActive),o=t.reduce((e,r)=>e+r.clicks,0),c=t.reduce((e,r)=>e+r.impressions,0),d=["sidebar-top","sidebar-bottom","header","content-top","content-bottom","between-news"].map(e=>{let r=t.filter(r=>r.position===e),a=r.reduce((e,r)=>e+r.clicks,0);return{position:e,count:r.length,clicks:a}}),u=t.map(e=>({id:e.id,title:e.title,clicks:e.clicks,impressions:e.impressions,ctr:e.impressions>0?e.clicks/e.impressions*100:0})).sort((e,r)=>r.clicks-e.clicks).slice(0,10);return{totalBanners:t.length,activeBanners:l.length,totalClicks:o,totalImpressions:c,clickThroughRate:c>0?o/c*100:0,bannersByPosition:d,topBanners:u}}catch(e){return console.error("Get banner stats error:",e),e instanceof Error&&(console.error("Error details:",e.message),console.error("Error stack:",e.stack)),{totalBanners:0,activeBanners:0,totalClicks:0,totalImpressions:0,clickThroughRate:0,bannersByPosition:[],topBanners:[]}}}static async getBannerClicks(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{let t=new Date;t.setDate(t.getDate()-r);let n=(0,a.P)((0,a.rJ)(s.db,i),(0,a._M)("clickedAt",">=",t),(0,a.My)("clickedAt","desc"));return e&&(n=(0,a.P)((0,a.rJ)(s.db,i),(0,a._M)("bannerId","==",e),(0,a._M)("clickedAt",">=",t),(0,a.My)("clickedAt","desc"))),(await (0,a.GG)(n)).docs.map(e=>{var r;let t=e.data();return{id:e.id,bannerId:t.bannerId||"",position:t.position||"sidebar-top",clickedAt:(null==(r=t.clickedAt)?void 0:r.toDate())||new Date,userAgent:t.userAgent||"",referrer:t.referrer||""}})}catch(e){throw console.error("Get banner clicks error:",e),Error("Erro ao buscar cliques dos banners")}}static async cleanupExpiredBanners(){try{let e=new Date,r=(0,a.P)((0,a.rJ)(s.db,n),(0,a._M)("expiresAt","<=",e),(0,a._M)("isActive","==",!0)),t=(await (0,a.GG)(r)).docs.map(e=>(0,a.mZ)(e.ref,{isActive:!1,updatedAt:(0,a.O5)()}));await Promise.all(t)}catch(e){throw console.error("Cleanup expired banners error:",e),Error("Erro ao limpar banners expirados")}}}},46492:(e,r,t)=>{Promise.resolve().then(t.bind(t,2411))},52817:(e,r,t)=>{"use strict";t.d(r,{Pp:()=>c,Yq:()=>o});var a=t(26467),s=t(25583),n=t(35504),i=t(47732),l=t(26206);function o(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",t="string"==typeof e?(0,a.H)(e):e;return(0,s.GP)(t,r,{locale:l.F})}function c(e){let r="string"==typeof e?(0,a.H)(e):e;return(0,n.c)(r)?"Agora, ".concat((0,s.GP)(r,"HH:mm")):(0,i.P)(r)?"Ontem, ".concat((0,s.GP)(r,"HH:mm")):(0,s.GP)(r,"dd/MM/yyyy",{locale:l.F})}},61922:(e,r,t)=>{"use strict";t.d(r,{a:()=>n});var a=t(95155),s=t(64269);function n(e){let{variant:r="primary",size:t="medium",children:n,className:i="",asChild:l=!1,...o}=e;return(0,a.jsx)("button",{className:(0,s.cn)("inline-flex items-center justify-center font-medium rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",tertiary:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",link:"bg-transparent text-blue-600 hover:text-blue-700 hover:underline focus:ring-blue-500"}[r],{small:"px-3 py-1.5 text-sm",medium:"px-4 py-2 text-sm",large:"px-6 py-3 text-base"}[t],i),...o,children:n})}},64269:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var a=t(2821),s=t(75889);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}},88114:(e,r,t)=>{"use strict";t.d(r,{$3:()=>i,Ef:()=>o,Q3:()=>l,m_:()=>n,w1:()=>c,zz:()=>d});var a=t(95155),s=t(64269);function n(e){let{children:r,className:t=""}=e;return(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsx)("table",{className:(0,s.cn)("w-full border-collapse bg-white border border-gray-200 rounded-lg",t),children:r})})}function i(e){let{children:r,className:t=""}=e;return(0,a.jsx)("thead",{className:(0,s.cn)("bg-gray-50",t),children:r})}function l(e){let{children:r,className:t=""}=e;return(0,a.jsx)("tbody",{className:(0,s.cn)("divide-y divide-gray-200",t),children:r})}function o(e){let{children:r,className:t="",isSelected:n=!1}=e;return(0,a.jsx)("tr",{className:(0,s.cn)("hover:bg-gray-50 transition-colors",n&&"bg-blue-50",t),children:r})}function c(e){let{children:r,className:t="",colSpan:n}=e;return(0,a.jsx)("td",{className:(0,s.cn)("px-6 py-4 text-sm text-gray-900",t),colSpan:n,children:r})}function d(e){let{children:r,className:t=""}=e;return(0,a.jsx)("th",{className:(0,s.cn)("px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",t),children:r})}},94315:(e,r,t)=>{"use strict";t.d(r,{b:()=>n});var a=t(95155),s=t(64269);function n(e){let{children:r,variant:t="default",size:n="small",className:i=""}=e;return(0,a.jsx)("span",{className:(0,s.cn)("inline-flex items-center font-medium rounded-full",{default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[t],{small:"px-2 py-1 text-xs",medium:"px-3 py-1 text-sm"}[n],i),children:r})}}},e=>{e.O(0,[9135,7210,9779,3643,5239,4869,104,3554,8441,1255,7358],()=>e(e.s=46492)),_N_E=e.O()}]);