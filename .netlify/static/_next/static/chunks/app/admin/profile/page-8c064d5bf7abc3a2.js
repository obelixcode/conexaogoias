(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8808],{3512:(e,r,t)=>{"use strict";t.d(r,{O:()=>o});var a=t(95155),s=t(64269);function o(e){let{children:r,className:t="",title:o,description:n,footer:i}=e;return(0,a.jsxs)("div",{className:(0,s.cn)("bg-white border border-gray-200 rounded-lg shadow-sm",t),children:[(o||n)&&(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[o&&(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:o}),n&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:n})]}),(0,a.jsx)("div",{className:"px-6 py-4",children:r}),i&&(0,a.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:i})]})}},6132:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},10489:(e,r,t)=>{"use strict";t.d(r,{b:()=>i});var a=t(12115),s=t(97602),o=t(95155),n=a.forwardRef((e,r)=>(0,o.jsx)(s.sG.label,{...e,ref:r,onMouseDown:r=>{var t;r.target.closest("button, input, select, textarea")||(null==(t=e.onMouseDown)||t.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));n.displayName="Label";var i=n},11914:(e,r,t)=>{"use strict";t.d(r,{Y:()=>u});var a=t(95155),s=t(12115),o=t(42529),n=t(6132),i=t(52056),l=t(23327),c=t(65229),d=t(64269);function u(e){let{children:r,type:t="info",dismissible:u=!1,onDismiss:m,className:h=""}=e,[p,g]=(0,s.useState)(!1);if(p)return null;let x={success:{icon:o.A,bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800",iconColor:"text-green-400"},error:{icon:n.A,bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-800",iconColor:"text-red-400"},warning:{icon:i.A,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-800",iconColor:"text-yellow-400"},info:{icon:l.A,bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-800",iconColor:"text-blue-400"}}[t],f=x.icon;return(0,a.jsx)("div",{className:(0,d.cn)("border rounded-md p-4",x.bgColor,x.borderColor,h),children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"shrink-0",children:(0,a.jsx)(f,{className:(0,d.cn)("h-5 w-5",x.iconColor)})}),(0,a.jsx)("div",{className:"ml-3 flex-1",children:(0,a.jsx)("p",{className:(0,d.cn)("text-sm font-medium",x.textColor),children:r})}),u&&(0,a.jsx)("div",{className:"ml-auto pl-3",children:(0,a.jsx)("div",{className:"-mx-1.5 -my-1.5",children:(0,a.jsxs)("button",{type:"button",className:(0,d.cn)("inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2",x.textColor,"hover:bg-opacity-20"),onClick:()=>{g(!0),null==m||m()},children:[(0,a.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,a.jsx)(c.A,{className:"h-4 w-4"})]})})})]})})}},14585:(e,r,t)=>{"use strict";t.d(r,{IG:()=>d,db:()=>c,j2:()=>l});var a=t(52078),s=t(81328),o=t(19708),n=t(79996);let i=(0,a.Wp)({apiKey:"AIzaSyBjdbOl0xyru5TfEQtu2iC2wqIz3QvrRQM",authDomain:"aconexaogoias.firebaseapp.com",projectId:"aconexaogoias",storageBucket:"aconexaogoias.firebasestorage.app",messagingSenderId:"6509088743",appId:"1:6509088743:web:f1866c676e18c53204f742"}),l=(0,s.xI)(i),c=(0,o.aU)(i),d=(0,n.c7)(i)},17910:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},20063:(e,r,t)=>{"use strict";var a=t(47260);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},20508:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},21786:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},23327:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},29141:(e,r,t)=>{"use strict";t.d(r,{J:()=>l,UserProvider:()=>i});var a=t(95155),s=t(12115),o=t(34426);let n=(0,s.createContext)(void 0);function i(e){let{children:r}=e,[t,i]=(0,s.useState)(null),[l,c]=(0,s.useState)(!0),d=async()=>{try{let e=await o.z.getCurrentUser();i(e)}catch(e){console.error("Error refreshing user:",e),i(null)}};return(0,s.useEffect)(()=>{d().finally(()=>c(!1))},[]),(0,a.jsx)(n.Provider,{value:{user:t,setUser:i,refreshUser:d,isLoading:l},children:r})}function l(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},32467:(e,r,t)=>{"use strict";t.d(r,{DX:()=>i,TL:()=>n});var a=t(12115),s=t(94446),o=t(95155);function n(e){let r=function(e){let r=a.forwardRef((e,r)=>{let{children:t,...o}=e;if(a.isValidElement(t)){var n;let e,i,l=(n=t,(i=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(i=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),c=function(e,r){let t={...r};for(let a in r){let s=e[a],o=r[a];/^on[A-Z]/.test(a)?s&&o?t[a]=(...e)=>{let r=o(...e);return s(...e),r}:s&&(t[a]=s):"style"===a?t[a]={...s,...o}:"className"===a&&(t[a]=[s,o].filter(Boolean).join(" "))}return{...e,...t}}(o,t.props);return t.type!==a.Fragment&&(c.ref=r?(0,s.t)(r,l):l),a.cloneElement(t,c)}return a.Children.count(t)>1?a.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}(e),t=a.forwardRef((e,t)=>{let{children:s,...n}=e,i=a.Children.toArray(s),l=i.find(c);if(l){let e=l.props.children,s=i.map(r=>r!==l?r:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,o.jsx)(r,{...n,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,s):null})}return(0,o.jsx)(r,{...n,ref:t,children:s})});return t.displayName=`${e}.Slot`,t}var i=n("Slot"),l=Symbol("radix.slottable");function c(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}},34426:(e,r,t)=>{"use strict";t.d(r,{z:()=>i});var a=t(81328),s=t(19708),o=t(14585);let n="users";class i{static async login(e){try{let r=(await (0,a.x9)(o.j2,e.email,e.password)).user,t=await (0,s.x7)((0,s.H9)(o.db,n,r.uid));if(!t.exists())throw Error("Usu\xe1rio n\xe3o encontrado no sistema");let i=t.data();if(!i.isActive)throw Error("Usu\xe1rio desativado");return await (0,s.mZ)((0,s.H9)(o.db,n,r.uid),{lastLoginAt:new Date}),{uid:r.uid,email:r.email,name:i.name,role:i.role,isActive:i.isActive,avatar:i.avatar}}catch(e){throw console.error("Login error:",e),Error("Erro ao fazer login. Verifique suas credenciais.")}}static async logout(){try{await (0,a.CI)(o.j2)}catch(e){throw console.error("Logout error:",e),Error("Erro ao fazer logout")}}static async getCurrentUser(){return new Promise(e=>{let r=(0,a.hg)(o.j2,async t=>{if(r(),!t)return void e(null);try{let r=await (0,s.x7)((0,s.H9)(o.db,n,t.uid));if(!r.exists())return void e(null);let a=r.data();if(!a.isActive)return void e(null);e({uid:t.uid,email:t.email,name:a.name,role:a.role,isActive:a.isActive,avatar:a.avatar})}catch(r){console.error("Get current user error:",r),e(null)}})})}static async createAdminUser(e){try{throw Error("Cria\xe7\xe3o de usu\xe1rios deve ser feita via Firebase Console ou server-side function")}catch(e){throw console.error("Create admin user error:",e),Error("Erro ao criar usu\xe1rio administrador")}}static async updateAdminUser(e,r){try{await (0,s.mZ)((0,s.H9)(o.db,n,e),{...r,updatedAt:new Date})}catch(e){throw console.error("Update admin user error:",e),Error("Erro ao atualizar usu\xe1rio")}}static async getAdminUser(e){try{let r=await (0,s.x7)((0,s.H9)(o.db,n,e));if(!r.exists())return null;return r.data()}catch(e){throw console.error("Get admin user error:",e),Error("Erro ao buscar usu\xe1rio")}}static hasPermission(e,r){let t={editor:1,admin:2,super_admin:3};return t[e]>=t[r]}static onAuthStateChange(e){return(0,a.hg)(o.j2,async r=>{if(!r)return void e(null);try{let t=await (0,s.x7)((0,s.H9)(o.db,n,r.uid));if(!t.exists())return void e(null);let a=t.data();if(!a.isActive)return void e(null);e({uid:r.uid,email:r.email,name:a.name,role:a.role,isActive:a.isActive,avatar:a.avatar})}catch(r){console.error("Auth state change error:",r),e(null)}})}}},35626:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},37168:(e,r,t)=>{"use strict";t.d(r,{n:()=>o});var a=t(79996),s=t(14585);class o{static async uploadImage(e,r,t){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;if(!s.IG)return console.warn("Firebase Storage not available, using fallback URL"),this.getFallbackImageUrl(e);try{if(!(0,a.KR)(s.IG,"test"))throw Error("Storage not properly initialized")}catch(r){return console.warn("Firebase Storage not properly configured, using fallback URL:",r),this.getFallbackImageUrl(e)}let n=null;for(let i=1;i<=o;i++)try{let o=await this.compressImage(e),l=(0,a.KR)(s.IG,r);if(!l)throw Error("Storage reference could not be created");if(t){let e=(0,a.bp)(l,o);return new Promise((r,s)=>{e.on("state_changed",e=>{let r=e.bytesTransferred/e.totalBytes*100;t(r)},e=>{console.error("Upload attempt ".concat(i," failed:"),e),n=e,s(e)},async()=>{try{let t=await (0,a.qk)(e.snapshot.ref);r(t)}catch(e){console.error("Get download URL attempt ".concat(i," failed:"),e),n=e,s(e)}})})}{let e=await (0,a.D)(l,o),t=await (0,a.qk)(e.ref);console.log("Upload successful:",{path:r,downloadURL:t});try{let e=await fetch(t,{method:"HEAD"});if(!e.ok)throw console.warn("Uploaded file not accessible:",e.status),Error("File not accessible: ".concat(e.status));console.log("File accessibility test passed")}catch(e){throw console.warn("File accessibility test failed:",e),Error("Uploaded file is not accessible")}return t}}catch(t){if(n=t,console.error("Upload attempt ".concat(i," failed:"),t),t instanceof Error&&t.message.includes("permission"))return console.warn("Permission denied, using fallback URL"),this.getFallbackImageUrl(e);if(i===o)break;let r=1e3*Math.pow(2,i);await new Promise(e=>setTimeout(e,r))}return console.error("All upload attempts failed, using fallback:",n),this.getFallbackImageUrl(e)}static getFallbackImageUrl(e){return"https://placehold.co/800x400/3B82F6/FFFFFF/png?text=".concat(encodeURIComponent(e.name))}static async testStorageConnection(){try{if(!s.IG)return console.error("Firebase Storage not initialized"),!1;if(!(0,a.KR)(s.IG,"test-connection"))return console.error("Could not create storage reference"),!1;return console.log("Firebase Storage connection test successful"),!0}catch(e){return console.error("Firebase Storage connection test failed:",e),!1}}static async uploadCoverImage(e,r,t){let a=Date.now(),s="cover-".concat(r,"-").concat(a,".").concat(e.name.split(".").pop());return this.uploadImage(e,"covers/".concat(s),t)}static async uploadContentImage(e,r){let t=Date.now(),a="content-".concat(t,".").concat(e.name.split(".").pop());return this.uploadImage(e,"content/".concat(a),r)}static async uploadBannerImage(e,r,t){let a=Date.now(),s=Math.random().toString(36).substring(2,8),o="banner-temp-".concat(a,"-").concat(s,".").concat(e.name.split(".").pop()),n="banners/".concat(o);console.log("Uploading banner image:",{fileName:o,path:n});try{let r=await this.uploadImage(e,n,t);return console.log("Banner upload completed:",r),r}catch(r){return console.error("Banner upload failed:",r),this.getFallbackImageUrl(e)}}static async deleteImage(e){try{let r=(0,a.KR)(s.IG,e);await (0,a.XR)(r)}catch(e){console.error("Delete image error:",e)}}static async compressImage(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1920,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return new Promise(a=>{let s=document.createElement("canvas"),o=s.getContext("2d"),n=new Image;n.onload=()=>{let{width:i,height:l}=n;i>r&&(l=l*r/i,i=r),s.width=i,s.height=l,null==o||o.drawImage(n,0,0,i,l),s.toBlob(r=>{r?a(new File([r],e.name,{type:e.type,lastModified:Date.now()})):a(e)},e.type,t)},n.src=URL.createObjectURL(e)})}static getFileSizeMB(e){return e.size/1048576}static validateImageFile(e){return["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)?this.getFileSizeMB(e)>5?{isValid:!1,error:"Arquivo muito grande. M\xe1ximo ".concat(5,"MB.")}:{isValid:!0}:{isValid:!1,error:"Tipo de arquivo n\xe3o suportado. Use JPG, PNG ou WebP."}}static generateUniqueFilename(e,r){let t=Date.now(),a=Math.random().toString(36).substring(2,8),s=e.split(".").pop(),o=e.split(".").slice(0,-1).join(".").toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").trim();return"".concat(r?"".concat(r,"-"):"").concat(o,"-").concat(t,"-").concat(a,".").concat(s)}static extractPathFromUrl(e){try{let r=new URL(e).pathname.match(/\/o\/(.+)\?/);return r?decodeURIComponent(r[1]):null}catch(e){return null}}static async cleanupOrphanedImages(e){try{let r=e.map(e=>this.deleteImage(e));await Promise.all(r)}catch(e){throw console.error("Cleanup orphaned images error:",e),Error("Erro ao limpar imagens \xf3rf\xe3s")}}}},42529:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},46046:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},52056:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},57828:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},61922:(e,r,t)=>{"use strict";t.d(r,{a:()=>o});var a=t(95155),s=t(64269);function o(e){let{variant:r="primary",size:t="medium",children:o,className:n="",asChild:i=!1,...l}=e;return(0,a.jsx)("button",{className:(0,s.cn)("inline-flex items-center justify-center font-medium rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",tertiary:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",link:"bg-transparent text-blue-600 hover:text-blue-700 hover:underline focus:ring-blue-500"}[r],{small:"px-3 py-1.5 text-sm",medium:"px-4 py-2 text-sm",large:"px-6 py-3 text-base"}[t],n),...l,children:o})}},64269:(e,r,t)=>{"use strict";t.d(r,{cn:()=>o});var a=t(2821),s=t(75889);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}},65142:(e,r,t)=>{"use strict";t.d(r,{p:()=>o});var a=t(95155);t(12115);var s=t(64269);function o(e){let{className:r,type:t,...o}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...o})}},65229:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},70532:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},76444:(e,r,t)=>{"use strict";t.d(r,{J:()=>n});var a=t(95155);t(12115);var s=t(10489),o=t(64269);function n(e){let{className:r,...t}=e;return(0,a.jsx)(s.b,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...t})}},88321:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>j});var a=t(95155),s=t(12115),o=t(20063),n=t(15239),i=t(35626),l=t(20508),c=t(21786),d=t(17910),u=t(70532),m=t(57828),h=t(46046),p=t(3512),g=t(61922),x=t(11914),f=t(65142),y=t(76444),v=t(34426),b=t(37168),w=t(29141);function j(){let e=(0,o.useRouter)(),{user:r,refreshUser:t}=(0,w.J)(),[j,N]=(0,s.useState)(null),[A,C]=(0,s.useState)({name:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""}),[k,P]=(0,s.useState)(!0),[E,S]=(0,s.useState)(!1),[F,I]=(0,s.useState)(!1),[U,M]=(0,s.useState)({current:!1,new:!1,confirm:!1}),[z,R]=(0,s.useState)(null),[D,L]=(0,s.useState)(null),[G,O]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{if(r)try{P(!0);let e=await v.z.getAdminUser(r.uid);e&&(N(e),C({name:e.name,email:e.email,currentPassword:"",newPassword:"",confirmPassword:""}),O(e.avatar||""))}catch(e){console.error("Error loading user data:",e),R({type:"error",text:"Erro ao carregar dados do usu\xe1rio"})}finally{P(!1)}})()},[r]);let q=(e,r)=>{C(t=>({...t,[e]:r})),R(null)},B=async()=>{if(D&&r)try{I(!0);let e="avatar-".concat(r.uid,"-").concat(Date.now(),".").concat(D.name.split(".").pop()),a=await b.n.uploadImage(D,"avatars/".concat(e));await v.z.updateAdminUser(r.uid,{avatar:a}),R({type:"success",text:"Foto de perfil atualizada com sucesso!"}),L(null),await t()}catch(e){console.error("Error uploading avatar:",e),R({type:"error",text:"Erro ao fazer upload da foto de perfil"})}finally{I(!1)}},H=async()=>{if(r)try{if(S(!0),R(null),!A.name.trim())return void R({type:"error",text:"Nome \xe9 obrigat\xf3rio"});if(!A.email.trim())return void R({type:"error",text:"Email \xe9 obrigat\xf3rio"});if(await v.z.updateAdminUser(r.uid,{name:A.name.trim(),email:A.email.trim()}),A.newPassword){if(A.newPassword!==A.confirmPassword)return void R({type:"error",text:"Nova senha e confirma\xe7\xe3o n\xe3o coincidem"});if(A.newPassword.length<6)return void R({type:"error",text:"Nova senha deve ter pelo menos 6 caracteres"});R({type:"success",text:"Perfil atualizado! (Nota: Altera\xe7\xe3o de senha requer re-autentica\xe7\xe3o)"})}else R({type:"success",text:"Perfil atualizado com sucesso!"});C(e=>({...e,currentPassword:"",newPassword:"",confirmPassword:""})),await t()}catch(e){console.error("Error updating profile:",e),R({type:"error",text:"Erro ao atualizar perfil"})}finally{S(!1)}},V=e=>{M(r=>({...r,[e]:!r[e]}))};return k?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Meu Perfil"})}),(0,a.jsx)(p.O,{children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})})]}):r?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(g.a,{variant:"tertiary",onClick:()=>e.back(),children:[(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Voltar"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Meu Perfil"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Gerencie suas informa\xe7\xf5es pessoais"})]})]})}),z&&(0,a.jsx)(x.Y,{type:z.type,children:z.text}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(p.O,{title:"Foto de Perfil",description:"Atualize sua foto de perfil",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:G?(0,a.jsx)(n.default,{src:G,alt:"Avatar",width:96,height:96,className:"w-full h-full object-cover"}):(0,a.jsx)(l.A,{className:"h-12 w-12 text-gray-400"})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:r.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:r.email}),(0,a.jsx)("p",{className:"text-xs text-gray-400 capitalize",children:r.role})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var r;let t=null==(r=e.target.files)?void 0:r[0];t&&(L(t),O(URL.createObjectURL(t)))},className:"hidden",id:"avatar-upload"}),(0,a.jsxs)("label",{htmlFor:"avatar-upload",className:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),D?"Arquivo Selecionado":"Escolher Foto"]}),D&&(0,a.jsx)(g.a,{onClick:B,disabled:F,className:"w-full mt-2",children:F?"Enviando...":"Salvar Foto"})]})]})})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(p.O,{title:"Informa\xe7\xf5es Pessoais",description:"Atualize suas informa\xe7\xf5es b\xe1sicas",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(y.J,{htmlFor:"name",children:"Nome Completo"}),(0,a.jsx)(f.p,{id:"name",type:"text",value:A.name,onChange:e=>q("name",e.target.value),placeholder:"Seu nome completo"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(y.J,{htmlFor:"email",children:"Email"}),(0,a.jsx)(f.p,{id:"email",type:"email",value:A.email,onChange:e=>q("email",e.target.value),placeholder:"seu@email.com"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(y.J,{children:"Fun\xe7\xe3o"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-md bg-gray-50",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:r.role})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(y.J,{children:"Status"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-md bg-gray-50",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(r.isActive?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:r.isActive?"Ativo":"Inativo"})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Alterar Senha"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(y.J,{htmlFor:"currentPassword",children:"Senha Atual"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.p,{id:"currentPassword",type:U.current?"text":"password",value:A.currentPassword,onChange:e=>q("currentPassword",e.target.value),placeholder:"Digite sua senha atual"}),(0,a.jsx)("button",{type:"button",onClick:()=>V("current"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:U.current?(0,a.jsx)(u.A,{className:"h-4 w-4"}):(0,a.jsx)(m.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(y.J,{htmlFor:"newPassword",children:"Nova Senha"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.p,{id:"newPassword",type:U.new?"text":"password",value:A.newPassword,onChange:e=>q("newPassword",e.target.value),placeholder:"Digite a nova senha"}),(0,a.jsx)("button",{type:"button",onClick:()=>V("new"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:U.new?(0,a.jsx)(u.A,{className:"h-4 w-4"}):(0,a.jsx)(m.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(y.J,{htmlFor:"confirmPassword",children:"Confirmar Nova Senha"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.p,{id:"confirmPassword",type:U.confirm?"text":"password",value:A.confirmPassword,onChange:e=>q("confirmPassword",e.target.value),placeholder:"Confirme a nova senha"}),(0,a.jsx)("button",{type:"button",onClick:()=>V("confirm"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:U.confirm?(0,a.jsx)(u.A,{className:"h-4 w-4"}):(0,a.jsx)(m.A,{className:"h-4 w-4"})})]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,a.jsx)(g.a,{variant:"secondary",onClick:()=>{C({name:(null==j?void 0:j.name)||"",email:(null==j?void 0:j.email)||"",currentPassword:"",newPassword:"",confirmPassword:""}),R(null)},children:"Cancelar"}),(0,a.jsx)(g.a,{onClick:H,disabled:E,children:E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Salvando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Salvar Altera\xe7\xf5es"]})})]})]})})})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Meu Perfil"})}),(0,a.jsx)(x.Y,{type:"error",children:"Usu\xe1rio n\xe3o encontrado. Fa\xe7a login novamente."})]})}},94446:(e,r,t)=>{"use strict";t.d(r,{s:()=>n,t:()=>o});var a=t(12115);function s(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}function o(...e){return r=>{let t=!1,a=e.map(e=>{let a=s(e,r);return t||"function"!=typeof a||(t=!0),a});if(t)return()=>{for(let r=0;r<a.length;r++){let t=a[r];"function"==typeof t?t():s(e[r],null)}}}}function n(...e){return a.useCallback(o(...e),e)}},96250:(e,r,t)=>{Promise.resolve().then(t.bind(t,88321))},97602:(e,r,t)=>{"use strict";t.d(r,{hO:()=>l,sG:()=>i});var a=t(12115),s=t(47650),o=t(32467),n=t(95155),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let t=(0,o.TL)(`Primitive.${r}`),s=a.forwardRef((e,a)=>{let{asChild:s,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(s?t:r,{...o,ref:a})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{});function l(e,r){e&&s.flushSync(()=>e.dispatchEvent(r))}}},e=>{e.O(0,[9135,7210,9779,3643,5239,8441,1255,7358],()=>e(e.s=96250)),_N_E=e.O()}]);