(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2855],{11186:(e,s,t)=>{"use strict";t.d(s,{Select:()=>d,SelectContent:()=>h,SelectItem:()=>u,SelectTrigger:()=>x,SelectValue:()=>o});var a=t(95155);t(12115);var l=t(51010),r=t(24033),i=t(5917),c=t(12108),n=t(64269);function d(e){let{...s}=e;return(0,a.jsx)(l.bL,{"data-slot":"select",...s})}function o(e){let{...s}=e;return(0,a.jsx)(l.WT,{"data-slot":"select-value",...s})}function x(e){let{className:s,size:t="default",children:i,...c}=e;return(0,a.jsxs)(l.l9,{"data-slot":"select-trigger","data-size":t,className:(0,n.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...c,children:[i,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(r.A,{className:"size-4 opacity-50"})})]})}function h(e){let{className:s,children:t,position:r="popper",align:i="center",...c}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{"data-slot":"select-content",className:(0,n.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,align:i,...c,children:[(0,a.jsx)(m,{}),(0,a.jsx)(l.LM,{className:(0,n.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(j,{})]})})}function u(e){let{className:s,children:t,...r}=e;return(0,a.jsxs)(l.q7,{"data-slot":"select-item",className:(0,n.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(i.A,{className:"size-4"})})}),(0,a.jsx)(l.p4,{children:t})]})}function m(e){let{className:s,...t}=e;return(0,a.jsx)(l.PP,{"data-slot":"select-scroll-up-button",className:(0,n.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(c.A,{className:"size-4"})})}function j(e){let{className:s,...t}=e;return(0,a.jsx)(l.wn,{"data-slot":"select-scroll-down-button",className:(0,n.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(r.A,{className:"size-4"})})}},49576:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var a=t(95155),l=t(12115),r=t(52619),i=t.n(r),c=t(6191),n=t(86651),d=t(20508),o=t(39347),x=t(16485),h=t(57828),u=t(70532),m=t(38843),j=t(11010),g=t(71360),v=t(3998),p=t(65142),f=t(11186),b=t(86948),N=t(11647),y=t(87270),w=t(86706),S=t(23739),A=t(52817);function C(){let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)([]),[C,P]=(0,l.useState)(!0),[z,k]=(0,l.useState)(""),[E,I]=(0,l.useState)("all"),[T,_]=(0,l.useState)("all"),[V,F]=(0,l.useState)("createdAt"),[L,q]=(0,l.useState)("desc");(0,l.useEffect)(()=>{(async()=>{try{let[e,t]=await Promise.all([w.b.searchNews({query:z,category:"all"!==E?E:void 0,isPublished:"all"===T?void 0:"published"===T},{page:1,limit:50,sortBy:V,sortOrder:L}),S.M.getActiveCategories()]);s(e.data),r(t)}catch(e){console.error("Error loading data:",e),alert("Erro ao carregar dados")}finally{P(!1)}})()},[z,E,T,V,L]);let H=async(e,t)=>{try{await w.b.updateNews(e,{isPublished:!t}),s(s=>s.map(s=>s.id===e?{...s,isPublished:!t}:s))}catch(e){console.error("Error toggling publish status:",e),alert("Erro ao alterar status de publica\xe7\xe3o")}},Z=async(e,t)=>{try{await w.b.updateNews(e,{isFeatured:!t}),s(s=>s.map(s=>s.id===e?{...s,isFeatured:!t}:s))}catch(e){console.error("Error toggling featured status:",e),alert("Erro ao alterar status de destaque")}},D=async(e,t)=>{if(confirm('Tem certeza que deseja excluir a not\xedcia "'.concat(t,'"? Esta a\xe7\xe3o n\xe3o pode ser desfeita.')))try{await w.b.deleteNews(e),s(s=>s.filter(s=>s.id!==e)),alert("Not\xedcia exclu\xedda com sucesso!")}catch(e){console.error("Error deleting news:",e),alert("Erro ao excluir not\xedcia")}},W=e.filter(e=>{var s;return""===z||e.title.toLowerCase().includes(z.toLowerCase())||(null==(s=e.subtitle)?void 0:s.toLowerCase().includes(z.toLowerCase()))||e.author.toLowerCase().includes(z.toLowerCase())});return C?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse mb-2"}),(0,a.jsx)("div",{className:"h-4 w-64 bg-gray-200 rounded animate-pulse"})]}),(0,a.jsx)("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,s)=>(0,a.jsx)("div",{className:"h-20 bg-gray-200 rounded animate-pulse"},s))}),(0,a.jsx)("div",{className:"h-96 bg-gray-200 rounded animate-pulse"})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Not\xedcias"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Gerencie todas as not\xedcias do portal"})]}),(0,a.jsx)(v.$,{asChild:!0,children:(0,a.jsxs)(i(),{href:"/admin/editor",className:"flex items-center",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Nova Not\xedcia"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(b.Zp,{children:(0,a.jsx)(b.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.length}),(0,a.jsx)("div",{className:"ml-2 text-sm text-gray-600",children:"Total"})]})})}),(0,a.jsx)(b.Zp,{children:(0,a.jsx)(b.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>e.isPublished).length}),(0,a.jsx)("div",{className:"ml-2 text-sm text-gray-600",children:"Publicadas"})]})})}),(0,a.jsx)(b.Zp,{children:(0,a.jsx)(b.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:e.filter(e=>!e.isPublished).length}),(0,a.jsx)("div",{className:"ml-2 text-sm text-gray-600",children:"Rascunhos"})]})})}),(0,a.jsx)(b.Zp,{children:(0,a.jsx)(b.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(e=>e.isFeatured).length}),(0,a.jsx)("div",{className:"ml-2 text-sm text-gray-600",children:"Destaques"})]})})})]}),(0,a.jsx)(b.Zp,{children:(0,a.jsx)(b.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Buscar"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(p.p,{placeholder:"T\xedtulo, autor...",value:z,onChange:e=>k(e.target.value),className:"pl-10"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Categoria"}),(0,a.jsxs)(f.Select,{value:E,onValueChange:I,children:[(0,a.jsx)(f.SelectTrigger,{children:(0,a.jsx)(f.SelectValue,{})}),(0,a.jsxs)(f.SelectContent,{children:[(0,a.jsx)(f.SelectItem,{value:"all",children:"Todas"}),t.map(e=>(0,a.jsx)(f.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Status"}),(0,a.jsxs)(f.Select,{value:T,onValueChange:_,children:[(0,a.jsx)(f.SelectTrigger,{children:(0,a.jsx)(f.SelectValue,{})}),(0,a.jsxs)(f.SelectContent,{children:[(0,a.jsx)(f.SelectItem,{value:"all",children:"Todos"}),(0,a.jsx)(f.SelectItem,{value:"published",children:"Publicadas"}),(0,a.jsx)(f.SelectItem,{value:"draft",children:"Rascunhos"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Ordenar por"}),(0,a.jsxs)(f.Select,{value:V,onValueChange:F,children:[(0,a.jsx)(f.SelectTrigger,{children:(0,a.jsx)(f.SelectValue,{})}),(0,a.jsxs)(f.SelectContent,{children:[(0,a.jsx)(f.SelectItem,{value:"createdAt",children:"Data de cria\xe7\xe3o"}),(0,a.jsx)(f.SelectItem,{value:"publishedAt",children:"Data de publica\xe7\xe3o"}),(0,a.jsx)(f.SelectItem,{value:"title",children:"T\xedtulo"}),(0,a.jsx)(f.SelectItem,{value:"views",children:"Visualiza\xe7\xf5es"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Ordem"}),(0,a.jsxs)(f.Select,{value:L,onValueChange:e=>q(e),children:[(0,a.jsx)(f.SelectTrigger,{children:(0,a.jsx)(f.SelectValue,{})}),(0,a.jsxs)(f.SelectContent,{children:[(0,a.jsx)(f.SelectItem,{value:"desc",children:"Decrescente"}),(0,a.jsx)(f.SelectItem,{value:"asc",children:"Crescente"})]})]})]})]})})}),(0,a.jsxs)(b.Zp,{children:[(0,a.jsxs)(b.aR,{children:[(0,a.jsx)(b.ZB,{children:"Lista de Not\xedcias"}),(0,a.jsxs)(b.BT,{children:[W.length," not\xedcia(s) encontrada(s)"]})]}),(0,a.jsx)(b.Wu,{children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(y.XI,{children:[(0,a.jsx)(y.A0,{children:(0,a.jsxs)(y.Hj,{children:[(0,a.jsx)(y.nd,{children:"T\xedtulo"}),(0,a.jsx)(y.nd,{children:"Categoria"}),(0,a.jsx)(y.nd,{children:"Autor"}),(0,a.jsx)(y.nd,{children:"Status"}),(0,a.jsx)(y.nd,{children:"Data"}),(0,a.jsx)(y.nd,{children:"Views"}),(0,a.jsx)(y.nd,{children:"A\xe7\xf5es"})]})}),(0,a.jsx)(y.BF,{children:W.map(e=>(0,a.jsxs)(y.Hj,{children:[(0,a.jsx)(y.nA,{children:(0,a.jsxs)("div",{className:"max-w-xs",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 truncate",children:e.title}),e.subtitle&&(0,a.jsx)("div",{className:"text-sm text-gray-500 truncate",children:e.subtitle})]})}),(0,a.jsx)(y.nA,{children:(0,a.jsx)(N.E,{variant:"secondary",style:{backgroundColor:e.category.color+"20",color:e.category.color},children:e.category.name})}),(0,a.jsx)(y.nA,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm",children:e.author})]})}),(0,a.jsx)(y.nA,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(N.E,{variant:e.isPublished?"default":"secondary",children:e.isPublished?"Publicada":"Rascunho"}),e.isFeatured&&(0,a.jsxs)(N.E,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:[(0,a.jsx)(o.A,{className:"h-3 w-3 mr-1"}),"Destaque"]})]})}),(0,a.jsx)(y.nA,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:(0,A.Pp)(e.publishedAt||e.createdAt)})]})}),(0,a.jsx)(y.nA,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm",children:e.views})]})}),(0,a.jsx)(y.nA,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(v.$,{variant:"ghost",size:"sm",onClick:()=>H(e.id,e.isPublished),title:e.isPublished?"Despublicar":"Publicar",children:e.isPublished?(0,a.jsx)(u.A,{className:"h-4 w-4"}):(0,a.jsx)(h.A,{className:"h-4 w-4"})}),(0,a.jsx)(v.$,{variant:"ghost",size:"sm",onClick:()=>Z(e.id,e.isFeatured),title:e.isFeatured?"Remover destaque":"Adicionar destaque",children:e.isFeatured?(0,a.jsx)(m.A,{className:"h-4 w-4"}):(0,a.jsx)(o.A,{className:"h-4 w-4"})}),(0,a.jsx)(v.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsx)(i(),{href:"/admin/editor/".concat(e.id),children:(0,a.jsx)(j.A,{className:"h-4 w-4"})})}),(0,a.jsx)(v.$,{variant:"ghost",size:"sm",onClick:()=>D(e.id,e.title),className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})]})})]},e.id))})]})})})]})]})}},52817:(e,s,t)=>{"use strict";t.d(s,{Pp:()=>d,Yq:()=>n});var a=t(26467),l=t(25583),r=t(35504),i=t(47732),c=t(26206);function n(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",t="string"==typeof e?(0,a.H)(e):e;return(0,l.GP)(t,s,{locale:c.F})}function d(e){let s="string"==typeof e?(0,a.H)(e):e;return(0,r.c)(s)?"Agora, ".concat((0,l.GP)(s,"HH:mm")):(0,i.P)(s)?"Ontem, ".concat((0,l.GP)(s,"HH:mm")):(0,l.GP)(s,"dd/MM/yyyy",{locale:c.F})}},55043:(e,s,t)=>{Promise.resolve().then(t.bind(t,49576))}},e=>{e.O(0,[9135,7210,9779,3643,2619,4869,3148,4127,477,2211,3156,4366,4109,8441,1255,7358],()=>e(e.s=55043)),_N_E=e.O()}]);