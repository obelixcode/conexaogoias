(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5640],{54528:(e,s,a)=>{Promise.resolve().then(a.bind(a,67317))},67317:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var t=a(95155),l=a(12115),r=a(20063),i=a(39068),n=a(99708),c=a(70532),o=a(35626),d=a(57828),u=a(46046),m=a(15870),x=a(89715),p=a(3512),g=a(61922),h=a(26017),j=a(72301);let f=[{value:"privacy",label:"Pol\xedtica de Privacidade"},{value:"terms",label:"Termos de Uso"},{value:"about",label:"Sobre N\xf3s"},{value:"contact",label:"Contato"},{value:"custom",label:"P\xe1gina Personalizada"}];function b(){var e;let s=(0,r.useRouter)(),a=(0,r.useSearchParams)(),[b,v]=(0,l.useState)(!1),[y,N]=(0,l.useState)(!1),w=a.get("type")||"footer",[T,C]=(0,l.useState)({title:"",slug:"",content:"",status:"draft",type:w,footerType:"footer"===w?"custom":void 0,metaDescription:"",seoTitle:""}),[S,P]=(0,l.useState)({});(0,l.useEffect)(()=>{if(T.title&&!T.slug){let e=T.title.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();C(s=>({...s,slug:e}))}},[T.title,T.slug]);let k=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"draft";if((()=>{let e={};return T.title.trim()||(e.title="T\xedtulo \xe9 obrigat\xf3rio"),T.slug.trim()?/^[a-z0-9-]+$/.test(T.slug)||(e.slug="Slug deve conter apenas letras min\xfasculas, n\xfameros e h\xedfens"):e.slug="Slug \xe9 obrigat\xf3rio",T.content.trim()||(e.content="Conte\xfado \xe9 obrigat\xf3rio"),"footer"!==T.type||T.footerType||(e.footerType="Tipo de p\xe1gina do rodap\xe9 \xe9 obrigat\xf3rio"),P(e),0===Object.keys(e).length})()){v(!0);try{if(!await j.B.isSlugAvailable(T.slug)){P(e=>({...e,slug:"Este slug j\xe1 est\xe1 sendo usado"})),v(!1);return}let a={title:T.title,slug:T.slug,content:T.content,status:e,type:T.type,footerType:T.footerType,metaDescription:T.metaDescription,seoTitle:T.seoTitle,author:"Admin"};await j.B.createPage(a),s.push("/admin/pages")}catch(e){console.error("Erro ao salvar p\xe1gina:",e),P(e=>({...e,general:"Erro ao salvar p\xe1gina. Tente novamente."}))}finally{v(!1)}}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(g.a,{variant:"secondary",onClick:()=>s.back(),children:[(0,t.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Voltar"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:T.id?"Editar P\xe1gina":"Nova P\xe1gina"}),(0,t.jsx)("p",{className:"text-gray-600",children:"footer"===T.type?"Criar p\xe1gina do rodap\xe9":"Criar p\xe1gina geral"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(g.a,{variant:"secondary",onClick:()=>{N(!y)},children:[(0,t.jsx)(d.A,{className:"h-4 w-4 mr-2"}),y?"Editar":"Visualizar"]}),(0,t.jsxs)(g.a,{variant:"secondary",onClick:()=>k("draft"),disabled:b,children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2"}),b?"Salvando...":"Salvar Rascunho"]}),(0,t.jsxs)(g.a,{onClick:()=>k("published"),disabled:b,children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2"}),b?"Publicando...":"Publicar"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)(p.O,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xedtulo da P\xe1gina *"}),(0,t.jsx)("input",{type:"text",value:T.title,onChange:e=>{C(s=>({...s,title:e.target.value})),(S.title||S.general)&&P(e=>({...e,title:"",general:""}))},className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(S.title?"border-red-500":"border-gray-300"),placeholder:"Digite o t\xedtulo da p\xe1gina"}),S.title&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:S.title})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug *"}),(0,t.jsx)("input",{type:"text",value:T.slug,onChange:e=>C(s=>({...s,slug:e.target.value})),className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(S.slug?"border-red-500":"border-gray-300"),placeholder:"url-da-pagina"}),S.slug&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:S.slug})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,t.jsxs)("select",{value:T.status,onChange:e=>{let s=e.target.value;C(e=>({...e,status:s}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Status da p\xe1gina",children:[(0,t.jsx)("option",{value:"draft",children:"Rascunho"}),(0,t.jsx)("option",{value:"published",children:"Publicado"}),(0,t.jsx)("option",{value:"private",children:"Privado"})]})]})]}),"footer"===T.type&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de P\xe1gina do Rodap\xe9 *"}),(0,t.jsxs)("select",{value:T.footerType||"",onChange:e=>{let s=e.target.value;C(e=>({...e,footerType:s||void 0}))},className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(S.footerType?"border-red-500":"border-gray-300"),"aria-label":"Tipo de p\xe1gina do rodap\xe9",children:[(0,t.jsx)("option",{value:"",children:"Selecione o tipo"}),f.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}),S.footerType&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:S.footerType})]})]})}),(0,t.jsx)(p.O,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Conte\xfado da P\xe1gina *"}),y?(0,t.jsx)("div",{className:"border border-gray-300 rounded-lg p-4 min-h-[300px] bg-white",children:(0,t.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:T.content||'<p class="text-gray-500">Nenhum conte\xfado para visualizar</p>'}})}):(0,t.jsx)(h.d,{content:T.content,onChange:e=>C(s=>({...s,content:e})),placeholder:"Digite o conte\xfado da p\xe1gina aqui..."}),S.content&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:S.content}),S.general&&(0,t.jsx)("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,t.jsx)("p",{className:"text-sm text-red-600",children:S.general})})]})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(p.O,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,t.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"Status"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Status atual:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(e=>{switch(e){case"published":return(0,t.jsx)(i.A,{className:"h-4 w-4"});case"private":return(0,t.jsx)(n.A,{className:"h-4 w-4"});default:return(0,t.jsx)(c.A,{className:"h-4 w-4"})}})(T.status),(0,t.jsx)("span",{className:"text-sm font-medium",children:(e=>{switch(e){case"published":return"Publicado";case"private":return"Privado";default:return"Rascunho"}})(T.status)})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Tipo:"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"footer"===T.type?"P\xe1gina do Rodap\xe9":"P\xe1gina Geral"})]}),T.footerType&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Categoria:"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:null==(e=f.find(e=>e.value===T.footerType))?void 0:e.label})]})]})]})}),(0,t.jsx)(p.O,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,t.jsx)(x.A,{className:"h-5 w-5 mr-2"}),"SEO"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xedtulo SEO"}),(0,t.jsx)("input",{type:"text",value:T.seoTitle,onChange:e=>C(s=>({...s,seoTitle:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"T\xedtulo para SEO (opcional)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Descri\xe7\xe3o"}),(0,t.jsx)("textarea",{value:T.metaDescription,onChange:e=>C(s=>({...s,metaDescription:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descri\xe7\xe3o para SEO (opcional)"})]})]})]})}),(0,t.jsx)(p.O,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"A\xe7\xf5es R\xe1pidas"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(g.a,{variant:"secondary",size:"small",className:"w-full justify-start",onClick:()=>C(e=>({...e,status:"draft"})),children:[(0,t.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Salvar como Rascunho"]}),(0,t.jsxs)(g.a,{variant:"secondary",size:"small",className:"w-full justify-start",onClick:()=>C(e=>({...e,status:"private"})),children:[(0,t.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Tornar Privado"]}),(0,t.jsxs)(g.a,{size:"small",className:"w-full justify-start",onClick:()=>C(e=>({...e,status:"published"})),children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Publicar Agora"]})]})]})})]})]})]})}}},e=>{e.O(0,[9135,7210,9779,3643,6693,8441,1255,7358],()=>e(e.s=54528)),_N_E=e.O()}]);