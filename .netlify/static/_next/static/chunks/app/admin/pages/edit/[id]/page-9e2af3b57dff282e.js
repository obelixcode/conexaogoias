(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2540],{40224:(e,s,a)=>{Promise.resolve().then(a.bind(a,54029))},54029:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var t=a(95155),r=a(12115),l=a(20063),i=a(39068),n=a(99708),o=a(70532),c=a(35626),d=a(89715),m=a(57828),x=a(46046),u=a(15870),p=a(3512),h=a(61922),g=a(26017),j=a(72301);let f=[{value:"privacy",label:"Pol\xedtica de Privacidade"},{value:"terms",label:"Termos de Uso"},{value:"about",label:"Sobre N\xf3s"},{value:"contact",label:"Contato"},{value:"custom",label:"P\xe1gina Personalizada"}];function b(){var e;let s=(0,l.useRouter)(),a=(0,l.useParams)().id,[b,y]=(0,r.useState)(!0),[v,N]=(0,r.useState)(!1),[w,T]=(0,r.useState)(!1),[k,P]=(0,r.useState)(!1),[S,C]=(0,r.useState)({title:"",slug:"",content:"",status:"draft",type:"footer",footerType:"custom",metaDescription:"",seoTitle:""}),[E,A]=(0,r.useState)({});(0,r.useEffect)(()=>{let e=async()=>{try{y(!0);let e=await j.B.getPageById(a);if(!e){console.log("Page not found in Firestore, using mock data for development");C({id:a,title:"P\xe1gina de Exemplo",slug:"pagina-exemplo",content:"<p>Este \xe9 um exemplo de conte\xfado da p\xe1gina. Voc\xea pode editar este texto usando o editor de texto rico.</p><p>Use as ferramentas da barra superior para formatar o texto, adicionar links, imagens e muito mais.</p>",status:"draft",type:"footer",footerType:"custom",metaDescription:"Descri\xe7\xe3o de exemplo para SEO",seoTitle:"T\xedtulo de exemplo para SEO"});return}C({id:e.id,title:e.title,slug:e.slug,content:e.content,status:e.status,type:e.type,footerType:e.footerType,metaDescription:e.metaDescription,seoTitle:e.seoTitle})}catch(e){console.error("Error loading page:",e),P(!0)}finally{y(!1)}};a&&e()},[a]);let O=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"draft";if((()=>{let e={};return S.title.trim()||(e.title="T\xedtulo \xe9 obrigat\xf3rio"),S.slug.trim()?/^[a-z0-9-]+$/.test(S.slug)||(e.slug="Slug deve conter apenas letras min\xfasculas, n\xfameros e h\xedfens"):e.slug="Slug \xe9 obrigat\xf3rio",S.content.trim()||(e.content="Conte\xfado \xe9 obrigat\xf3rio"),"footer"!==S.type||S.footerType||(e.footerType="Tipo de p\xe1gina do rodap\xe9 \xe9 obrigat\xf3rio"),A(e),0===Object.keys(e).length})()){N(!0);try{if(!await j.B.isSlugAvailable(S.slug,a)){A(e=>({...e,slug:"Este slug j\xe1 est\xe1 sendo usado"})),N(!1);return}let t={id:a,title:S.title,slug:S.slug,content:S.content,status:e,type:S.type,footerType:S.footerType,metaDescription:S.metaDescription,seoTitle:S.seoTitle};await j.B.updatePage(t),s.push("/admin/pages")}catch(e){console.error("Erro ao salvar p\xe1gina:",e),A(e=>({...e,general:"Erro ao salvar p\xe1gina. Tente novamente."}))}finally{N(!1)}}};return b?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(h.a,{variant:"secondary",onClick:()=>s.back(),children:[(0,t.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Voltar"]}),(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Carregando..."})})]})}),(0,t.jsx)(p.O,{children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})})]}):k?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(h.a,{variant:"secondary",onClick:()=>s.back(),children:[(0,t.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Voltar"]}),(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"P\xe1gina n\xe3o encontrada"})})]})}),(0,t.jsx)(p.O,{children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(d.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"P\xe1gina n\xe3o encontrada"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"A p\xe1gina que voc\xea est\xe1 tentando editar n\xe3o existe ou foi removida."}),(0,t.jsx)(h.a,{onClick:()=>s.push("/admin/pages"),children:"Voltar para Lista de P\xe1ginas"})]})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(h.a,{variant:"secondary",onClick:()=>s.back(),children:[(0,t.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Voltar"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Editar P\xe1gina"}),(0,t.jsx)("p",{className:"text-gray-600",children:"footer"===S.type?"Editar p\xe1gina do rodap\xe9":"Editar p\xe1gina geral"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(h.a,{variant:"secondary",onClick:()=>{T(!w)},children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2"}),w?"Editar":"Visualizar"]}),(0,t.jsxs)(h.a,{variant:"secondary",onClick:()=>O("draft"),disabled:v,children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2"}),v?"Salvando...":"Salvar Rascunho"]}),(0,t.jsxs)(h.a,{onClick:()=>O("published"),disabled:v,children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2"}),v?"Publicando...":"Publicar"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)(p.O,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xedtulo da P\xe1gina *"}),(0,t.jsx)("input",{type:"text",value:S.title,onChange:e=>C(s=>({...s,title:e.target.value})),className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(E.title?"border-red-500":"border-gray-300"),placeholder:"Digite o t\xedtulo da p\xe1gina"}),E.title&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.title})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug *"}),(0,t.jsx)("input",{type:"text",value:S.slug,onChange:e=>C(s=>({...s,slug:e.target.value})),className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(E.slug?"border-red-500":"border-gray-300"),placeholder:"url-da-pagina"}),E.slug&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.slug})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,t.jsxs)("select",{value:S.status,onChange:e=>{let s=e.target.value;C(e=>({...e,status:s}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Status da p\xe1gina",children:[(0,t.jsx)("option",{value:"draft",children:"Rascunho"}),(0,t.jsx)("option",{value:"published",children:"Publicado"}),(0,t.jsx)("option",{value:"private",children:"Privado"})]})]})]}),"footer"===S.type&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de P\xe1gina do Rodap\xe9 *"}),(0,t.jsxs)("select",{value:S.footerType||"",onChange:e=>{let s=e.target.value;C(e=>({...e,footerType:s||void 0}))},className:"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(E.footerType?"border-red-500":"border-gray-300"),"aria-label":"Tipo de p\xe1gina do rodap\xe9",children:[(0,t.jsx)("option",{value:"",children:"Selecione o tipo"}),f.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}),E.footerType&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.footerType})]})]})}),(0,t.jsx)(p.O,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Conte\xfado da P\xe1gina *"}),w?(0,t.jsx)("div",{className:"border border-gray-300 rounded-lg p-4 min-h-[300px] bg-white",children:(0,t.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:S.content||'<p class="text-gray-500">Nenhum conte\xfado para visualizar</p>'}})}):(0,t.jsx)(g.d,{content:S.content,onChange:e=>C(s=>({...s,content:e})),placeholder:"Digite o conte\xfado da p\xe1gina aqui..."}),E.content&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.content}),E.general&&(0,t.jsx)("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,t.jsx)("p",{className:"text-sm text-red-600",children:E.general})})]})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(p.O,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,t.jsx)(u.A,{className:"h-5 w-5 mr-2"}),"Status"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Status atual:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(e=>{switch(e){case"published":return(0,t.jsx)(i.A,{className:"h-4 w-4"});case"private":return(0,t.jsx)(n.A,{className:"h-4 w-4"});default:return(0,t.jsx)(o.A,{className:"h-4 w-4"})}})(S.status),(0,t.jsx)("span",{className:"text-sm font-medium",children:(e=>{switch(e){case"published":return"Publicado";case"private":return"Privado";default:return"Rascunho"}})(S.status)})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Tipo:"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"footer"===S.type?"P\xe1gina do Rodap\xe9":"P\xe1gina Geral"})]}),S.footerType&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Categoria:"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:null==(e=f.find(e=>e.value===S.footerType))?void 0:e.label})]})]})]})}),(0,t.jsx)(p.O,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,t.jsx)(d.A,{className:"h-5 w-5 mr-2"}),"SEO"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xedtulo SEO"}),(0,t.jsx)("input",{type:"text",value:S.seoTitle,onChange:e=>C(s=>({...s,seoTitle:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"T\xedtulo para SEO (opcional)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Descri\xe7\xe3o"}),(0,t.jsx)("textarea",{value:S.metaDescription,onChange:e=>C(s=>({...s,metaDescription:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descri\xe7\xe3o para SEO (opcional)"})]})]})]})}),(0,t.jsx)(p.O,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"A\xe7\xf5es R\xe1pidas"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.a,{variant:"secondary",size:"small",className:"w-full justify-start",onClick:()=>C(e=>({...e,status:"draft"})),children:[(0,t.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Salvar como Rascunho"]}),(0,t.jsxs)(h.a,{variant:"secondary",size:"small",className:"w-full justify-start",onClick:()=>C(e=>({...e,status:"private"})),children:[(0,t.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Tornar Privado"]}),(0,t.jsxs)(h.a,{size:"small",className:"w-full justify-start",onClick:()=>C(e=>({...e,status:"published"})),children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Publicar Agora"]})]})]})})]})]})]})}}},e=>{e.O(0,[9135,7210,9779,3643,6693,8441,1255,7358],()=>e(e.s=40224)),_N_E=e.O()}]);