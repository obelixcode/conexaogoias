(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3474],{10840:(e,a,t)=>{Promise.resolve().then(t.bind(t,84909))},31692:(e,a,t)=>{"use strict";t.d(a,{h:()=>n});var r=t(14585),s=t(19708),o=t(79996),i=t(96975);let c="settings",l="site";class n{static async getSettings(){try{let t=(0,s.H9)(r.db,c,l),o=await (0,s.x7)(t);if(o.exists()){var e,a;let t=o.data();return{...i.a,...t,createdAt:(null==(e=t.createdAt)?void 0:e.toDate())||new Date,updatedAt:(null==(a=t.updatedAt)?void 0:a.toDate())||new Date}}return i.a}catch(e){return console.error("Erro ao buscar configura\xe7\xf5es:",e),i.a}}static async updateSettings(e){try{let a=(0,s.H9)(r.db,c,l),t={...e,updatedAt:new Date};(await (0,s.x7)(a)).exists()?await (0,s.mZ)(a,t):await (0,s.BN)(a,{...i.a,...t,createdAt:new Date})}catch(e){throw console.error("Erro ao atualizar configura\xe7\xf5es:",e),Error("Falha ao salvar configura\xe7\xf5es")}}static async uploadFavicon(e){try{if(!e.type.startsWith("image/"))throw Error("Arquivo deve ser uma imagem");if(e.size>1048576)throw Error("Arquivo deve ter no m\xe1ximo 1MB");let a=Date.now(),t="favicon-".concat(a,".").concat(e.name.split(".").pop()),s=(0,o.KR)(r.IG,"favicons/".concat(t));return await (0,o.D)(s,e),await (0,o.qk)(s)}catch(e){throw console.error("Erro ao fazer upload do favicon:",e),Error("Falha ao fazer upload do favicon")}}static async deleteFavicon(e){try{if(!e)return;let a=new URL(e).pathname.match(/\/o\/(.+?)\?/);if(a){let e=decodeURIComponent(a[1]),t=(0,o.KR)(r.IG,e);await (0,o.XR)(t)}}catch(e){console.error("Erro ao deletar favicon antigo:",e)}}static async uploadLogo(e){try{if(!e.type.startsWith("image/"))throw Error("Arquivo deve ser uma imagem");if(e.size>2097152)throw Error("Arquivo deve ter no m\xe1ximo 2MB");let a=Date.now(),t="logo_".concat(a,".").concat(e.name.split(".").pop()),s=(0,o.KR)(r.IG,"logos/".concat(t));return await (0,o.D)(s,e),await (0,o.qk)(s)}catch(e){throw console.error("Erro ao fazer upload da logo:",e),e}}static async deleteLogo(e){try{if(!e)return;let a=new URL(e).pathname.match(/\/o\/(.+?)\?/);if(a){let e=decodeURIComponent(a[1]),t=(0,o.KR)(r.IG,e);await (0,o.XR)(t)}}catch(e){console.error("Erro ao deletar logo antiga:",e)}}static async updateFavicon(e){try{let a=await this.getSettings();a.faviconUrl&&await this.deleteFavicon(a.faviconUrl);let t=await this.uploadFavicon(e);return await this.updateSettings({faviconUrl:t}),t}catch(e){throw console.error("Erro ao atualizar favicon:",e),e}}static async updateLogo(e){try{let a=await this.getSettings();a.logoUrl&&await this.deleteLogo(a.logoUrl);let t=await this.uploadLogo(e);return await this.updateSettings({logoUrl:t}),t}catch(e){throw console.error("Erro ao atualizar logo:",e),e}}static async updateFooterLogo(e){try{let a=await this.getSettings();a.footerLogoUrl&&await this.deleteLogo(a.footerLogoUrl);let t=await this.uploadLogo(e);return await this.updateSettings({footerLogoUrl:t}),t}catch(e){throw console.error("Erro ao atualizar logo do footer:",e),e}}static isValidUrl(e){try{return new URL(e),!0}catch(e){return!1}}static isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}static isValidPhone(e){return/^\(\d{2}\)\s\d{4,5}-\d{4}$/.test(e)}}},81402:(e,a,t)=>{"use strict";t.d(a,{SettingsProvider:()=>l,M:()=>n});var r=t(95155),s=t(12115),o=t(31692),i=t(96975);let c=(0,s.createContext)(void 0);function l(e){let{children:a}=e,t=function(){let[e,a]=(0,s.useState)(i.a),[t,r]=(0,s.useState)(!0),[c,l]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{try{r(!0),l(null);let e=await o.h.getSettings();a(e)}catch(e){console.error("Erro ao carregar configura\xe7\xf5es:",e),l("Erro ao carregar configura\xe7\xf5es do site"),a(i.a)}finally{r(!1)}})()},[]),{settings:e,isLoading:t,error:c,refreshSettings:async()=>{try{l(null);let e=await o.h.getSettings();a(e)}catch(e){console.error("Erro ao atualizar configura\xe7\xf5es:",e),l("Erro ao atualizar configura\xe7\xf5es do site")}}}}();return(0,r.jsx)(c.Provider,{value:t,children:a})}function n(){let e=(0,s.useContext)(c);if(void 0===e)throw Error("useSettingsContext must be used within a SettingsProvider");return e}},84909:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>E});var r=t(95155),s=t(12115),o=t(20063),i=t(22544),c=t(35626),l=t(57828),n=t(46046),d=t(3998),u=t(65142),h=t(76444),g=t(31120),m=t(86948),p=t(9614),x=t(63554),v=t(86706),j=t(23739),f=t(90955),w=t(56618),y=t(81402),b=t(82118),N=t(82167),S=t(32549);function E(){let{settings:e}=(0,y.M)(),a=(0,o.useRouter)(),[,t]=(0,s.useState)([]),[E,D]=(0,s.useState)(!0),[C,R]=(0,s.useState)(!1),[A,F]=(0,s.useState)(""),[U,I]=(0,s.useState)(""),[P,L]=(0,s.useState)(!1),[T,B]=(0,s.useState)(!1),[z,k]=(0,s.useState)(""),{register:Z,handleSubmit:G,watch:J,setValue:q,formState:{isDirty:K}}=(0,i.mN)({defaultValues:{title:"",subtitle:"",content:"",categoryId:"",author:"Reda\xe7\xe3o ".concat(e.siteName),tags:"",slug:"",publishedAt:"",isPublished:!1,isFeatured:!1,featuredPosition:void 0,metaDescription:"",metaKeywords:""}}),M=K||P,W=J("title");(0,s.useEffect)(()=>{W&&q("slug",(0,w.Yv)(W))},[W,q]),(0,s.useEffect)(()=>{(async()=>{try{let e=await j.M.getActiveCategories();t(e)}catch(e){console.error("Error loading categories:",e)}finally{D(!1)}})()},[]);let _=async e=>{let a=String(e.title||"").trim(),t=String(e.subtitle||"").trim(),r=String(e.content||"").trim(),s=String(e.categoryId||""),o=String(e.tags||"").trim(),i=e.publishedAt?String(e.publishedAt):"",c=!!e.isPublished;if(!a)return void alert("T\xedtulo \xe9 obrigat\xf3rio");if(!t)return void alert("Resumo \xe9 obrigat\xf3rio");if(!r||r.length<50)return void alert("Conte\xfado \xe9 obrigat\xf3rio e deve ter pelo menos 50 caracteres");if(!s)return void alert("Categoria \xe9 obrigat\xf3ria");if(!o)return void alert("Tags s\xe3o obrigat\xf3rias");if(!A)return void alert("Por favor, fa\xe7a upload de uma imagem de capa");if(!i&&c)return void alert("Por favor, selecione uma data de publica\xe7\xe3o");R(!0);try{let a=await f.w.createTagsFromString(o),t={...e,publishedAt:i?new Date(i):new Date,tagIds:a};await v.b.createNews(t,A),c?k("Sua not\xedcia foi publicada com sucesso! Ela j\xe1 est\xe1 dispon\xedvel no site."):k("Rascunho salvo com sucesso! Voc\xea pode continuar editando ou publicar quando estiver pronto."),B(!0)}catch(e){console.error("Error creating news:",e),alert("Erro ao salvar not\xedcia")}finally{R(!1)}};return E?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"h-8 w-8 bg-gray-200 rounded animate-pulse"}),(0,r.jsx)("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsx)("div",{className:"h-64 bg-gray-200 rounded animate-pulse"}),(0,r.jsx)("div",{className:"h-96 bg-gray-200 rounded animate-pulse"})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"h-64 bg-gray-200 rounded animate-pulse"}),(0,r.jsx)("div",{className:"h-32 bg-gray-200 rounded animate-pulse"})]})]})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>a.back(),children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Voltar"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Nova Not\xedcia"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Crie uma nova mat\xe9ria para o portal"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)(d.$,{variant:"outline",size:"sm",disabled:!M,children:[(0,r.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Preview"]}),(0,r.jsxs)(d.$,{onClick:G(_),disabled:C||!M,children:[(0,r.jsx)(n.A,{className:"h-4 w-4 mr-2"}),C?"Salvando...":"Salvar"]})]})]}),(0,r.jsx)("form",{onSubmit:G(_),className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)(m.Zp,{children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:"T\xedtulo"}),(0,r.jsx)(m.BT,{children:"T\xedtulo principal da not\xedcia"})]}),(0,r.jsx)(m.Wu,{children:(0,r.jsx)(u.p,{...Z("title"),placeholder:"Digite o t\xedtulo da not\xedcia"})})]}),(0,r.jsxs)(m.Zp,{children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:"Resumo *"}),(0,r.jsx)(m.BT,{children:"Resumo da not\xedcia (obrigat\xf3rio)"})]}),(0,r.jsx)(m.Wu,{children:(0,r.jsx)(g.T,{...Z("subtitle"),placeholder:"Digite o resumo da not\xedcia",rows:3})})]}),(0,r.jsxs)(m.Zp,{children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:"Conte\xfado"}),(0,r.jsx)(m.BT,{children:"Corpo principal da not\xedcia"})]}),(0,r.jsx)(m.Wu,{children:(0,r.jsx)(p.Editor,{content:U,onChange:e=>{I(e),q("content",e),L(!0)},placeholder:"Comece a escrever o conte\xfado da not\xedcia..."})})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(m.Zp,{children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:"Imagem de Capa *"}),(0,r.jsx)(m.BT,{children:"Imagem principal da not\xedcia (obrigat\xf3ria)"})]}),(0,r.jsxs)(m.Wu,{children:[(0,r.jsx)(x.G,{onImageUploaded:e=>{F(e),L(!0)},currentImage:A,aspectRatio:"video"}),!A&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:"Imagem de capa \xe9 obrigat\xf3ria"})]})]}),(0,r.jsxs)(m.Zp,{children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:"Configura\xe7\xf5es"}),(0,r.jsx)(m.BT,{children:"Op\xe7\xf5es de publica\xe7\xe3o"})]}),(0,r.jsxs)(m.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(h.J,{htmlFor:"categoryId",children:"Categoria *"}),(0,r.jsx)(b.A,{value:J("categoryId"),onChange:e=>{q("categoryId",e),L(!0)},placeholder:"Selecione uma categoria"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h.J,{htmlFor:"author",children:"Autor"}),(0,r.jsx)(u.p,{...Z("author"),placeholder:"Nome do autor"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h.J,{htmlFor:"tags",children:"Tags *"}),(0,r.jsx)(N.A,{value:J("tags"),onChange:e=>{q("tags",e),L(!0)},placeholder:"Digite as tags separadas por v\xedrgula..."}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separe as tags por v\xedrgula. Tags existentes aparecer\xe3o como sugest\xe3o."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h.J,{htmlFor:"publishedAt",children:"Data de Publica\xe7\xe3o"}),(0,r.jsx)(u.p,{type:"datetime-local",...Z("publishedAt")}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Deixe em branco para usar a data atual"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h.J,{htmlFor:"slug",children:"URL (Slug)"}),(0,r.jsx)(u.p,{...Z("slug"),placeholder:"url-da-noticia"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"isPublished",...Z("isPublished"),className:"rounded"}),(0,r.jsx)(h.J,{htmlFor:"isPublished",children:"Publicar imediatamente"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"isFeatured",...Z("isFeatured"),className:"rounded"}),(0,r.jsx)(h.J,{htmlFor:"isFeatured",children:"Destaque na homepage"})]})]})]})]}),(0,r.jsxs)(m.Zp,{children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:"SEO"}),(0,r.jsx)(m.BT,{children:"Configura\xe7\xf5es para busca"})]}),(0,r.jsxs)(m.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(h.J,{htmlFor:"metaDescription",children:"Meta Description"}),(0,r.jsx)(g.T,{...Z("metaDescription"),placeholder:"Descri\xe7\xe3o para buscadores",rows:3})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h.J,{htmlFor:"metaKeywords",children:"Meta Keywords"}),(0,r.jsx)(u.p,{...Z("metaKeywords"),placeholder:"palavra1, palavra2, palavra3"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separe as palavras-chave por v\xedrgula"})]})]})]})]})]})}),(0,r.jsx)(S.D,{isOpen:T,onClose:()=>B(!1),title:"Sucesso!",message:z,redirectTo:"/admin/posts"})]})}},96975:(e,a,t)=>{"use strict";t.d(a,{a:()=>r});let r={siteName:"Conex\xe3o Goi\xe1s",siteDescription:"Portal de not\xedcias de Goi\xe1s. Informa\xe7\xe3o confi\xe1vel e atualizada.",siteUrl:"https://conexaogoias.com",contactEmail:"contato@conexaogoias.com",adminEmail:"admin@conexaogoias.com",phone1:"(62) 99999-9999",phone2:"(62) 3333-3333",address:"Rua das Flores, 123\nCentro - Goi\xe2nia/GO",socialMedia:{facebook:"https://facebook.com/conexaogoias",twitter:"https://twitter.com/conexaogoias",instagram:"https://instagram.com/conexaogoias",youtube:"https://youtube.com/@conexaogoias",whatsapp:"https://wa.me/5562999999999"},twitterHandle:"@conexaogoias",foundingYear:new Date().getFullYear(),faviconUrl:"",logoUrl:"",footerLogoUrl:"",createdAt:new Date,updatedAt:new Date}}},e=>{e.O(0,[9135,7210,5004,277,9779,3643,5239,3446,912,4366,3554,9614,8628,8441,1255,7358],()=>e(e.s=10840)),_N_E=e.O()}]);