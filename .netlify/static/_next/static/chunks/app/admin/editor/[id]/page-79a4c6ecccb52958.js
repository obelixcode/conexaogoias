(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9592],{4725:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>k});var t=a(95155),i=a(12115),r=a(20063),l=a(22544),c=a(66942),d=a(41508),o=a(35626),n=a(57828),x=a(71360),u=a(46046),m=a(3998),h=a(65142),p=a(76444),j=a(31120),g=a(86948),v=a(9614),N=a(63554),y=a(86706),b=a(90955),f=a(56618),w=a(82118),S=a(82167),P=a(32549);let C=d.Ikc({title:d.YjP().min(1,"T\xedtulo \xe9 obrigat\xf3rio"),subtitle:d.YjP().optional(),content:d.YjP().min(1,"Conte\xfado \xe9 obrigat\xf3rio"),categoryId:d.YjP().min(1,"Categoria \xe9 obrigat\xf3ria"),author:d.YjP().min(1,"Autor \xe9 obrigat\xf3rio"),tags:d.YjP().optional(),slug:d.YjP().min(1,"Slug \xe9 obrigat\xf3rio"),isPublished:d.zMY(),isFeatured:d.zMY(),featuredPosition:d.aig().optional(),metaDescription:d.YjP().optional(),metaKeywords:d.YjP().optional()});function k(e){let{params:s}=e,a=(0,i.use)(s),d=(0,r.useRouter)(),[k,E]=(0,i.useState)(null),[A,D]=(0,i.useState)(!0),[I,T]=(0,i.useState)(!1),[B,F]=(0,i.useState)(!1),[Z,z]=(0,i.useState)(""),[Y,R]=(0,i.useState)(""),[M,J]=(0,i.useState)(!1),[V,W]=(0,i.useState)(!1),[_,K]=(0,i.useState)(""),{register:O,handleSubmit:$,watch:q,setValue:L,formState:{errors:U,isDirty:G}}=(0,l.mN)({resolver:(0,c.u)(C)}),H=G||M,Q=q("title");(0,i.useEffect)(()=>{Q&&!G&&L("slug",(0,f.Yv)(Q))},[Q,L,G]),(0,i.useEffect)(()=>{(async()=>{try{var e;let s=await y.b.getNewsById(a.id);if(!s){alert("Not\xedcia n\xe3o encontrada"),d.push("/admin/editor");return}E(s),z(s.coverImage),R(s.content),L("title",s.title),L("subtitle",s.subtitle||""),L("content",s.content),L("categoryId",s.categoryId),L("author",s.author),L("tags",Array.isArray(s.tags)?s.tags.join(", "):s.tags||""),L("slug",s.slug),L("isPublished",s.isPublished),L("isFeatured",s.isFeatured),L("featuredPosition",s.featuredPosition||void 0),L("metaDescription",s.metaDescription||""),L("metaKeywords",(null==(e=s.metaKeywords)?void 0:e.join(", "))||"")}catch(e){console.error("Error loading data:",e),alert("Erro ao carregar dados")}finally{D(!1)}})()},[a.id,d,L]);let X=async e=>{if(!Z)return void alert("Por favor, fa\xe7a upload de uma imagem de capa");T(!0);try{let s=[];e.tags&&e.tags.trim()&&(s=await b.w.createTagsFromString(e.tags));let t={...e,tagIds:s};await y.b.updateNews(a.id,t,Z),e.isPublished?(K("Sua not\xedcia foi atualizada e publicada com sucesso! Ela j\xe1 est\xe1 dispon\xedvel no site."),W(!0)):(K("Not\xedcia atualizada com sucesso! Voc\xea pode continuar editando ou publicar quando estiver pronto."),W(!0),J(!1))}catch(e){console.error("Error updating news:",e),alert("Erro ao atualizar not\xedcia")}finally{T(!1)}},ee=async()=>{if(confirm("Tem certeza que deseja excluir esta not\xedcia? Esta a\xe7\xe3o n\xe3o pode ser desfeita.")){F(!0);try{await y.b.deleteNews(a.id),alert("Not\xedcia exclu\xedda com sucesso!"),d.push("/admin/editor")}catch(e){console.error("Error deleting news:",e),alert("Erro ao excluir not\xedcia")}finally{F(!1)}}};return A?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"h-8 w-8 bg-gray-200 rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)("div",{className:"h-64 bg-gray-200 rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-96 bg-gray-200 rounded animate-pulse"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"h-64 bg-gray-200 rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-32 bg-gray-200 rounded animate-pulse"})]})]})]}):k?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(m.$,{variant:"outline",size:"sm",onClick:()=>d.back(),children:[(0,t.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Voltar"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Editar Not\xedcia"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Atualize o conte\xfado da mat\xe9ria"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(m.$,{variant:"outline",size:"sm",onClick:()=>window.open("/noticia/".concat(k.slug),"_blank"),children:[(0,t.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Ver no Site"]}),(0,t.jsxs)(m.$,{variant:"destructive",size:"sm",onClick:ee,disabled:B,children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2"}),B?"Excluindo...":"Excluir"]}),(0,t.jsxs)(m.$,{onClick:$(X),disabled:I||!H,children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2"}),I?"Salvando...":"Salvar"]})]})]}),(0,t.jsx)(g.Zp,{className:"bg-blue-50 border-blue-200",children:(0,t.jsx)(g.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-900",children:"Criada em:"}),(0,t.jsx)("p",{className:"text-gray-600",children:new Date(k.createdAt).toLocaleDateString("pt-BR")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-900",children:"\xdaltima atualiza\xe7\xe3o:"}),(0,t.jsx)("p",{className:"text-gray-600",children:new Date(k.updatedAt).toLocaleDateString("pt-BR")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-900",children:"Visualiza\xe7\xf5es:"}),(0,t.jsx)("p",{className:"text-gray-600",children:k.views})]})]})})}),(0,t.jsx)("form",{onSubmit:$(X),className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)(g.Zp,{children:[(0,t.jsxs)(g.aR,{children:[(0,t.jsx)(g.ZB,{children:"T\xedtulo"}),(0,t.jsx)(g.BT,{children:"T\xedtulo principal da not\xedcia"})]}),(0,t.jsxs)(g.Wu,{children:[(0,t.jsx)(h.p,{...O("title"),placeholder:"Digite o t\xedtulo da not\xedcia",className:U.title?"border-red-500":""}),U.title&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:U.title.message})]})]}),(0,t.jsxs)(g.Zp,{children:[(0,t.jsxs)(g.aR,{children:[(0,t.jsx)(g.ZB,{children:"Subt\xedtulo"}),(0,t.jsx)(g.BT,{children:"Subt\xedtulo ou resumo da not\xedcia (opcional)"})]}),(0,t.jsx)(g.Wu,{children:(0,t.jsx)(j.T,{...O("subtitle"),placeholder:"Digite o subt\xedtulo da not\xedcia",rows:3})})]}),(0,t.jsxs)(g.Zp,{children:[(0,t.jsxs)(g.aR,{children:[(0,t.jsx)(g.ZB,{children:"Conte\xfado"}),(0,t.jsx)(g.BT,{children:"Corpo principal da not\xedcia"})]}),(0,t.jsxs)(g.Wu,{children:[(0,t.jsx)(v.Editor,{content:Y,onChange:e=>{R(e),L("content",e),J(!0)},placeholder:"Comece a escrever o conte\xfado da not\xedcia..."}),U.content&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-2",children:U.content.message})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(g.Zp,{children:[(0,t.jsxs)(g.aR,{children:[(0,t.jsx)(g.ZB,{children:"Imagem de Capa"}),(0,t.jsx)(g.BT,{children:"Imagem principal da not\xedcia"})]}),(0,t.jsx)(g.Wu,{children:(0,t.jsx)(N.G,{onImageUploaded:e=>{z(e),J(!0)},currentImage:Z,aspectRatio:"video"})})]}),(0,t.jsxs)(g.Zp,{children:[(0,t.jsxs)(g.aR,{children:[(0,t.jsx)(g.ZB,{children:"Configura\xe7\xf5es"}),(0,t.jsx)(g.BT,{children:"Op\xe7\xf5es de publica\xe7\xe3o"})]}),(0,t.jsxs)(g.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(p.J,{htmlFor:"categoryId",children:"Categoria *"}),(0,t.jsx)(w.A,{value:q("categoryId"),onChange:e=>{L("categoryId",e),J(!0)},placeholder:"Selecione uma categoria"}),U.categoryId&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:U.categoryId.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p.J,{htmlFor:"author",children:"Autor"}),(0,t.jsx)(h.p,{...O("author"),placeholder:"Nome do autor"}),U.author&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:U.author.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p.J,{htmlFor:"tags",children:"Tags"}),(0,t.jsx)(S.A,{value:q("tags")||"",onChange:e=>{L("tags",e),J(!0)},placeholder:"Digite as tags separadas por v\xedrgula..."}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separe as tags por v\xedrgula. Tags existentes aparecer\xe3o como sugest\xe3o."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p.J,{htmlFor:"slug",children:"URL (Slug)"}),(0,t.jsx)(h.p,{...O("slug"),placeholder:"url-da-noticia"}),U.slug&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:U.slug.message})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"isPublished",...O("isPublished"),className:"rounded"}),(0,t.jsx)(p.J,{htmlFor:"isPublished",children:"Publicado"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"isFeatured",...O("isFeatured"),className:"rounded"}),(0,t.jsx)(p.J,{htmlFor:"isFeatured",children:"Destaque na homepage"})]})]})]})]}),(0,t.jsxs)(g.Zp,{children:[(0,t.jsxs)(g.aR,{children:[(0,t.jsx)(g.ZB,{children:"SEO"}),(0,t.jsx)(g.BT,{children:"Configura\xe7\xf5es para busca"})]}),(0,t.jsxs)(g.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(p.J,{htmlFor:"metaDescription",children:"Meta Description"}),(0,t.jsx)(j.T,{...O("metaDescription"),placeholder:"Descri\xe7\xe3o para buscadores",rows:3})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p.J,{htmlFor:"metaKeywords",children:"Meta Keywords"}),(0,t.jsx)(h.p,{...O("metaKeywords"),placeholder:"palavra1, palavra2, palavra3"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separe as palavras-chave por v\xedrgula"})]})]})]})]})]})}),(0,t.jsx)(P.D,{isOpen:V,onClose:()=>W(!1),title:"Sucesso!",message:_,redirectTo:"/admin/posts"})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Not\xedcia n\xe3o encontrada"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"A not\xedcia que voc\xea est\xe1 procurando n\xe3o existe."}),(0,t.jsx)(m.$,{onClick:()=>d.push("/admin/editor"),children:"Voltar para Editor"})]})}},20562:(e,s,a)=>{Promise.resolve().then(a.bind(a,4725))},71360:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])}},e=>{e.O(0,[9135,7210,5004,277,9779,3643,5239,3446,4337,912,4366,3554,9614,8628,8441,1255,7358],()=>e(e.s=20562)),_N_E=e.O()}]);