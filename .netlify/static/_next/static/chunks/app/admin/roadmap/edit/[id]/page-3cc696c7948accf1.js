(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[312],{71360:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});let i=(0,a(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},75165:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>w});var i=a(95155),r=a(12115),t=a(20063),l=a(22544),c=a(66942),d=a(41508),n=a(67909),o=a(35626),m=a(71360),x=a(46046),h=a(57828),p=a(3998),j=a(65142),u=a(31120),g=a(86948),N=a(11186),v=a(63554),y=a(23675),f=a(32549);let b=(0,n.default)(()=>Promise.all([a.e(5004),a.e(277),a.e(912),a.e(9614)]).then(a.bind(a,9614)).then(e=>({default:e.Editor})),{loadableGenerated:{webpack:()=>[9614]},ssr:!1,loading:()=>(0,i.jsx)("div",{className:"border border-gray-300 rounded-lg min-h-[300px] p-4 flex items-center justify-center",children:(0,i.jsx)("div",{className:"text-gray-500 text-sm",children:"Carregando editor..."})})}),S=d.Ikc({title:d.YjP().min(1,"T\xedtulo \xe9 obrigat\xf3rio"),description:d.YjP().optional(),content:d.YjP().min(1,"Conte\xfado \xe9 obrigat\xf3rio"),priority:d.k5n(["high","medium","low"]),coverImage:d.YjP().optional()});function w(e){let{params:s}=e,a=(0,r.use)(s),d=(0,t.useRouter)(),[n,w]=(0,r.useState)(null),[k,B]=(0,r.useState)(!0),[C,E]=(0,r.useState)(!1),[I,R]=(0,r.useState)(!1),[A,T]=(0,r.useState)(""),[Z,P]=(0,r.useState)(""),[D,z]=(0,r.useState)(!1),[M,q]=(0,r.useState)(""),{register:W,handleSubmit:V,watch:_,setValue:Y,formState:{errors:$,isDirty:O}}=(0,l.mN)({resolver:(0,c.u)(S)});(0,r.useEffect)(()=>{(async()=>{try{let e=await y.c.getRequestById(a.id);if(!e){alert("Solicita\xe7\xe3o n\xe3o encontrada"),d.push("/admin/roadmap");return}w(e),T(e.coverImage||""),P(e.content),Y("title",e.title),Y("description",e.description||""),Y("content",e.content),Y("priority",e.priority),Y("coverImage",e.coverImage||"")}catch(e){console.error("Error loading data:",e),alert("Erro ao carregar dados")}finally{B(!1)}})()},[a.id,d,Y]);let G=async e=>{E(!0);try{let s={title:e.title,description:e.description,content:e.content,priority:e.priority,coverImage:A};await y.c.updateRequest(a.id,s),q("Solicita\xe7\xe3o atualizada com sucesso!"),z(!0)}catch(e){console.error("Error updating roadmap request:",e),alert("Erro ao atualizar solicita\xe7\xe3o")}finally{E(!1)}},L=async()=>{if(confirm("Tem certeza que deseja excluir esta solicita\xe7\xe3o? Esta a\xe7\xe3o n\xe3o pode ser desfeita.")){R(!0);try{await y.c.deleteRequest(a.id),alert("Solicita\xe7\xe3o exclu\xedda com sucesso!"),d.push("/admin/roadmap")}catch(e){console.error("Error deleting roadmap request:",e),alert("Erro ao excluir solicita\xe7\xe3o")}finally{R(!1)}}};return k?(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("div",{className:"h-8 w-8 bg-gray-200 rounded animate-pulse"}),(0,i.jsx)("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,i.jsx)("div",{className:"h-64 bg-gray-200 rounded animate-pulse"}),(0,i.jsx)("div",{className:"h-96 bg-gray-200 rounded animate-pulse"})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("div",{className:"h-64 bg-gray-200 rounded animate-pulse"}),(0,i.jsx)("div",{className:"h-32 bg-gray-200 rounded animate-pulse"})]})]})]}):n?(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)(p.$,{variant:"outline",size:"sm",onClick:()=>d.back(),children:[(0,i.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Voltar"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Editar Solicita\xe7\xe3o"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Atualize o conte\xfado da solicita\xe7\xe3o"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsxs)(p.$,{variant:"destructive",size:"sm",onClick:L,disabled:I,children:[(0,i.jsx)(m.A,{className:"h-4 w-4 mr-2"}),I?"Excluindo...":"Excluir"]}),(0,i.jsxs)(p.$,{onClick:V(G),disabled:C||!O,children:[(0,i.jsx)(x.A,{className:"h-4 w-4 mr-2"}),C?"Salvando...":"Salvar"]})]})]}),(0,i.jsx)(g.Zp,{className:"bg-blue-50 border-blue-200",children:(0,i.jsx)(g.Wu,{className:"pt-6",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-900",children:"Criada em:"}),(0,i.jsx)("p",{className:"text-gray-600",children:new Date(n.createdAt).toLocaleDateString("pt-BR")})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-900",children:"\xdaltima atualiza\xe7\xe3o:"}),(0,i.jsx)("p",{className:"text-gray-600",children:new Date(n.updatedAt).toLocaleDateString("pt-BR")})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-900",children:"Autor:"}),(0,i.jsx)("p",{className:"text-gray-600",children:n.authorName})]})]})})}),(0,i.jsx)("form",{onSubmit:V(G),className:"space-y-6",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,i.jsxs)(g.Zp,{children:[(0,i.jsxs)(g.aR,{children:[(0,i.jsx)(g.ZB,{children:"T\xedtulo"}),(0,i.jsx)(g.BT,{children:"T\xedtulo principal da solicita\xe7\xe3o"})]}),(0,i.jsxs)(g.Wu,{children:[(0,i.jsx)(j.p,{...W("title"),placeholder:"Digite o t\xedtulo da solicita\xe7\xe3o",className:$.title?"border-red-500":""}),$.title&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:$.title.message})]})]}),(0,i.jsxs)(g.Zp,{children:[(0,i.jsxs)(g.aR,{children:[(0,i.jsx)(g.ZB,{children:"Descri\xe7\xe3o"}),(0,i.jsx)(g.BT,{children:"Descri\xe7\xe3o curta da solicita\xe7\xe3o (opcional)"})]}),(0,i.jsx)(g.Wu,{children:(0,i.jsx)(u.T,{...W("description"),placeholder:"Digite uma descri\xe7\xe3o resumida",rows:3})})]}),(0,i.jsxs)(g.Zp,{children:[(0,i.jsxs)(g.aR,{children:[(0,i.jsx)(g.ZB,{children:"Conte\xfado"}),(0,i.jsx)(g.BT,{children:"Detalhes completos da solicita\xe7\xe3o"})]}),(0,i.jsxs)(g.Wu,{children:[(0,i.jsx)(b,{content:Z,onChange:e=>{P(e),Y("content",e)},placeholder:"Descreva detalhadamente a melhoria solicitada..."}),$.content&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-2",children:$.content.message})]})]})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)(g.Zp,{children:[(0,i.jsxs)(g.aR,{children:[(0,i.jsx)(g.ZB,{children:"Imagem de Capa"}),(0,i.jsx)(g.BT,{children:"Imagem ilustrativa (opcional)"})]}),(0,i.jsx)(g.Wu,{children:(0,i.jsx)(v.G,{onImageUploaded:e=>{T(e)},currentImage:A,aspectRatio:"video"})})]}),(0,i.jsxs)(g.Zp,{children:[(0,i.jsxs)(g.aR,{children:[(0,i.jsx)(g.ZB,{children:"Prioridade"}),(0,i.jsx)(g.BT,{children:"N\xedvel de prioridade da solicita\xe7\xe3o"})]}),(0,i.jsxs)(g.Wu,{children:[(0,i.jsxs)(N.Select,{value:_("priority"),onValueChange:e=>{Y("priority",e)},children:[(0,i.jsx)(N.SelectTrigger,{children:(0,i.jsx)(N.SelectValue,{placeholder:"Selecione a prioridade"})}),(0,i.jsxs)(N.SelectContent,{children:[(0,i.jsx)(N.SelectItem,{value:"high",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Alta Prioridade"]})}),(0,i.jsx)(N.SelectItem,{value:"medium",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),"M\xe9dia Prioridade"]})}),(0,i.jsx)(N.SelectItem,{value:"low",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Baixa Prioridade"]})})]})]}),$.priority&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:$.priority.message})]})]}),O&&(0,i.jsxs)(g.Zp,{children:[(0,i.jsx)(g.aR,{children:(0,i.jsxs)(g.ZB,{className:"flex items-center gap-2",children:[(0,i.jsx)(h.A,{className:"h-4 w-4"}),"Preview"]})}),(0,i.jsx)(g.Wu,{children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("h3",{className:"font-semibold",children:_("title")||"T\xedtulo da solicita\xe7\xe3o"}),_("description")&&(0,i.jsx)("p",{className:"text-sm text-gray-600",children:_("description")}),(0,i.jsxs)("div",{className:"text-xs",children:[(0,i.jsx)("span",{className:"font-medium",children:"Prioridade:"})," ",(0,i.jsxs)("span",{className:"capitalize",children:["high"===_("priority")&&"Alta","medium"===_("priority")&&"M\xe9dia","low"===_("priority")&&"Baixa"]})]})]})})]})]})]})}),(0,i.jsx)(f.D,{isOpen:D,onClose:()=>z(!1),title:"Sucesso!",message:M,redirectTo:"/admin/roadmap"})]}):(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Solicita\xe7\xe3o n\xe3o encontrada"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"A solicita\xe7\xe3o que voc\xea est\xe1 procurando n\xe3o existe."}),(0,i.jsx)(p.$,{onClick:()=>d.push("/admin/roadmap"),children:"Voltar para RoadMap"})]})}},83220:(e,s,a)=>{Promise.resolve().then(a.bind(a,75165))}},e=>{e.O(0,[9135,7210,9779,3643,5239,3148,4127,3446,477,4337,2211,3554,5142,8441,1255,7358],()=>e(e.s=83220)),_N_E=e.O()}]);