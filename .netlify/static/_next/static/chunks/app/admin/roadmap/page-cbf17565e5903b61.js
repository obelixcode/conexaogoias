(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4437],{3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>n});var s=a(95155);a(12115);var r=a(32467),i=a(83101),l=a(64269);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function n(e){let{className:t,variant:a,size:i,asChild:n=!1,...c}=e,d=n?r.DX:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,l.cn)(o({variant:a,size:i,className:t})),...c})}},11647:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(95155);a(12115);var r=a(32467),i=a(83101),l=a(64269);let o=(0,i.F)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:a,asChild:i=!1,...n}=e,c=i?r.DX:"span";return(0,s.jsx)(c,{"data-slot":"badge",className:(0,l.cn)(o({variant:a}),t),...n})}},13406:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>n,av:()=>c,j7:()=>o,tU:()=>l});var s=a(95155);a(12115);var r=a(25667),i=a(64269);function l(e){let{className:t,...a}=e;return(0,s.jsx)(r.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function n(e){let{className:t,...a}=e;return(0,s.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",t),...a})}},14585:(e,t,a)=>{"use strict";a.d(t,{IG:()=>d,db:()=>c,j2:()=>n});var s=a(52078),r=a(81328),i=a(19708),l=a(79996);let o=(0,s.Wp)({apiKey:"AIzaSyBjdbOl0xyru5TfEQtu2iC2wqIz3QvrRQM",authDomain:"aconexaogoias.firebaseapp.com",projectId:"aconexaogoias",storageBucket:"aconexaogoias.firebasestorage.app",messagingSenderId:"6509088743",appId:"1:6509088743:web:f1866c676e18c53204f742"}),n=(0,r.xI)(o),c=(0,i.aU)(o),d=(0,l.c7)(o)},15174:(e,t,a)=>{"use strict";a.d(t,{EA:()=>i,PF:()=>l});var s=a(95155),r=a(64269);function i(e){let{className:t}=e;return(0,s.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-gray-100",t)})}function l(e){let{count:t=5}=e;return(0,s.jsx)("div",{className:"space-y-4",children:Array.from({length:t}).map((e,t)=>(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(i,{className:"h-20 w-32 rounded-lg"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(i,{className:"h-4 w-3/4"}),(0,s.jsx)(i,{className:"h-3 w-full"}),(0,s.jsx)(i,{className:"h-3 w-2/3"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(i,{className:"h-3 w-20"}),(0,s.jsx)(i,{className:"h-3 w-16"})]})]})]},t))})}},23675:(e,t,a)=>{"use strict";a.d(t,{c:()=>o});var s=a(19708),r=a(14585);let i="roadmap_requests",l="roadmap_status_timeline";class o{static async createRequest(e,t,a){try{let l=await (0,s.gS)((0,s.rJ)(r.db,i),{title:e.title,description:e.description||"",content:e.content,priority:e.priority,status:"open",authorId:t,authorName:a,coverImage:e.coverImage||"",createdAt:(0,s.O5)(),updatedAt:(0,s.O5)()});return await this.createStatusChange(l.id,t,a,"open","open","Solicita\xe7\xe3o criada"),l.id}catch(e){throw console.error("Error creating roadmap request:",e),Error("Erro ao criar solicita\xe7\xe3o")}}static async updateRequest(e,t){try{let a=(0,s.H9)(r.db,i,e);await (0,s.mZ)(a,{title:t.title,description:t.description||"",content:t.content,priority:t.priority,coverImage:t.coverImage||"",updatedAt:(0,s.O5)()})}catch(e){throw console.error("Error updating roadmap request:",e),Error("Erro ao atualizar solicita\xe7\xe3o")}}static async deleteRequest(e){try{let t=(0,s.P)((0,s.rJ)(r.db,l),(0,s._M)("requestId","==",e)),a=(await (0,s.GG)(t)).docs.map(e=>(0,s.kd)(e.ref));await Promise.all(a),await (0,s.kd)((0,s.H9)(r.db,i,e))}catch(e){throw console.error("Error deleting roadmap request:",e),Error("Erro ao excluir solicita\xe7\xe3o")}}static async getRequestById(e){try{let t=(0,s.H9)(r.db,i,e),a=await (0,s.x7)(t);if(!a.exists())return null;return this.mapDocumentToRoadmapRequest(a)}catch(e){throw console.error("Error getting roadmap request:",e),Error("Erro ao buscar solicita\xe7\xe3o")}}static async getAllRequests(){try{console.log("\uD83D\uDD0D Buscando solicita\xe7\xf5es do roadmap...");let e=(0,s.P)((0,s.rJ)(r.db,i),(0,s.My)("createdAt","desc")),t=await (0,s.GG)(e);return console.log("\uD83D\uDCCA Encontradas",t.docs.length,"solicita\xe7\xf5es"),t.docs.map(e=>this.mapDocumentToRoadmapRequest(e)).sort((e,t)=>{let a={high:3,medium:2,low:1},s=a[e.priority]||0,r=a[t.priority]||0;return s!==r?r-s:t.createdAt.getTime()-e.createdAt.getTime()})}catch(e){throw console.error("❌ Error getting roadmap requests:",e),Error("Erro ao buscar solicita\xe7\xf5es")}}static async getRequestsByStatus(e){try{let t=(0,s.P)((0,s.rJ)(r.db,i),(0,s._M)("status","==",e),(0,s.My)("createdAt","desc"));return(await (0,s.GG)(t)).docs.map(e=>this.mapDocumentToRoadmapRequest(e)).sort((e,t)=>{let a={high:3,medium:2,low:1},s=a[e.priority]||0,r=a[t.priority]||0;return s!==r?r-s:t.createdAt.getTime()-e.createdAt.getTime()})}catch(e){throw console.error("Error getting requests by status:",e),Error("Erro ao buscar solicita\xe7\xf5es por status")}}static async getRequestsWithFilters(e){try{let t=(0,s.P)((0,s.rJ)(r.db,i));e.status&&(t=(0,s.P)(t,(0,s._M)("status","==",e.status))),e.priority&&(t=(0,s.P)(t,(0,s._M)("priority","==",e.priority))),e.authorId&&(t=(0,s.P)(t,(0,s._M)("authorId","==",e.authorId))),t=(0,s.P)(t,(0,s.My)("priority","asc"),(0,s.My)("createdAt","desc"));let a=(await (0,s.GG)(t)).docs.map(e=>this.mapDocumentToRoadmapRequest(e));return e.dateFrom&&(a=a.filter(t=>t.createdAt>=e.dateFrom)),e.dateTo&&(a=a.filter(t=>t.createdAt<=e.dateTo)),a}catch(e){throw console.error("Error getting requests with filters:",e),Error("Erro ao buscar solicita\xe7\xf5es com filtros")}}static async updateStatus(e,t,a,l,o){try{let n=await this.getRequestById(e);if(!n)throw Error("Solicita\xe7\xe3o n\xe3o encontrada");let c=n.status,d=(0,s.H9)(r.db,i,e);await (0,s.mZ)(d,{status:t,updatedAt:(0,s.O5)()}),await this.createStatusChange(e,a,l,c,t,o)}catch(e){throw console.error("Error updating status:",e),Error("Erro ao atualizar status")}}static async createStatusChange(e,t,a,i,o,n){try{await (0,s.gS)((0,s.rJ)(r.db,l),{requestId:e,userId:t,userName:a,oldStatus:i,newStatus:o,comment:n||"",timestamp:(0,s.O5)()})}catch(e){console.error("Error creating status change:",e)}}static async getStatusTimeline(e){try{let t=(0,s.P)((0,s.rJ)(r.db,l),(0,s._M)("requestId","==",e),(0,s.My)("timestamp","asc"));return(await (0,s.GG)(t)).docs.map(e=>this.mapDocumentToStatusChange(e))}catch(e){throw console.error("Error getting status timeline:",e),Error("Erro ao buscar hist\xf3rico de status")}}static async getStats(){try{let e=await this.getAllRequests();return{total:e.length,open:e.filter(e=>"open"===e.status).length,in_progress:e.filter(e=>"in_progress"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,byPriority:{high:e.filter(e=>"high"===e.priority).length,medium:e.filter(e=>"medium"===e.priority).length,low:e.filter(e=>"low"===e.priority).length}}}catch(e){throw console.error("Error getting roadmap stats:",e),Error("Erro ao buscar estat\xedsticas")}}static mapDocumentToRoadmapRequest(e){var t,a;let s=e.data();return{id:e.id,title:s.title,description:s.description,content:s.content,priority:s.priority,status:s.status,authorId:s.authorId,authorName:s.authorName,coverImage:s.coverImage,createdAt:(null==(t=s.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(a=s.updatedAt)?void 0:a.toDate())||new Date}}static mapDocumentToStatusChange(e){var t;let a=e.data();return{id:e.id,requestId:a.requestId,userId:a.userId,userName:a.userName,oldStatus:a.oldStatus,newStatus:a.newStatus,timestamp:(null==(t=a.timestamp)?void 0:t.toDate())||new Date,comment:a.comment}}}},29141:(e,t,a)=>{"use strict";a.d(t,{J:()=>n,UserProvider:()=>o});var s=a(95155),r=a(12115),i=a(34426);let l=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,r.useState)(null),[n,c]=(0,r.useState)(!0),d=async()=>{try{let e=await i.z.getCurrentUser();o(e)}catch(e){console.error("Error refreshing user:",e),o(null)}};return(0,r.useEffect)(()=>{d().finally(()=>c(!1))},[]),(0,s.jsx)(l.Provider,{value:{user:a,setUser:o,refreshUser:d,isLoading:n},children:t})}function n(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},34426:(e,t,a)=>{"use strict";a.d(t,{z:()=>o});var s=a(81328),r=a(19708),i=a(14585);let l="users";class o{static async login(e){try{let t=(await (0,s.x9)(i.j2,e.email,e.password)).user,a=await (0,r.x7)((0,r.H9)(i.db,l,t.uid));if(!a.exists())throw Error("Usu\xe1rio n\xe3o encontrado no sistema");let o=a.data();if(!o.isActive)throw Error("Usu\xe1rio desativado");return await (0,r.mZ)((0,r.H9)(i.db,l,t.uid),{lastLoginAt:new Date}),{uid:t.uid,email:t.email,name:o.name,role:o.role,isActive:o.isActive,avatar:o.avatar}}catch(e){throw console.error("Login error:",e),Error("Erro ao fazer login. Verifique suas credenciais.")}}static async logout(){try{await (0,s.CI)(i.j2)}catch(e){throw console.error("Logout error:",e),Error("Erro ao fazer logout")}}static async getCurrentUser(){return new Promise(e=>{let t=(0,s.hg)(i.j2,async a=>{if(t(),!a)return void e(null);try{let t=await (0,r.x7)((0,r.H9)(i.db,l,a.uid));if(!t.exists())return void e(null);let s=t.data();if(!s.isActive)return void e(null);e({uid:a.uid,email:a.email,name:s.name,role:s.role,isActive:s.isActive,avatar:s.avatar})}catch(t){console.error("Get current user error:",t),e(null)}})})}static async createAdminUser(e){try{throw Error("Cria\xe7\xe3o de usu\xe1rios deve ser feita via Firebase Console ou server-side function")}catch(e){throw console.error("Create admin user error:",e),Error("Erro ao criar usu\xe1rio administrador")}}static async updateAdminUser(e,t){try{await (0,r.mZ)((0,r.H9)(i.db,l,e),{...t,updatedAt:new Date})}catch(e){throw console.error("Update admin user error:",e),Error("Erro ao atualizar usu\xe1rio")}}static async getAdminUser(e){try{let t=await (0,r.x7)((0,r.H9)(i.db,l,e));if(!t.exists())return null;return t.data()}catch(e){throw console.error("Get admin user error:",e),Error("Erro ao buscar usu\xe1rio")}}static hasPermission(e,t){let a={editor:1,admin:2,super_admin:3};return a[e]>=a[t]}static onAuthStateChange(e){return(0,s.hg)(i.j2,async t=>{if(!t)return void e(null);try{let a=await (0,r.x7)((0,r.H9)(i.db,l,t.uid));if(!a.exists())return void e(null);let s=a.data();if(!s.isActive)return void e(null);e({uid:t.uid,email:t.email,name:s.name,role:s.role,isActive:s.isActive,avatar:s.avatar})}catch(t){console.error("Auth state change error:",t),e(null)}})}}},51834:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>m,Es:()=>x,L3:()=>h,c7:()=>u,lG:()=>n,rr:()=>g});var s=a(95155),r=a(12115),i=a(89511),l=a(65229),o=a(64269);let n=i.bL;i.l9;let c=i.ZL;i.bm;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});d.displayName=i.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(d,{}),(0,s.jsxs)(i.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,s.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=i.UC.displayName;let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};u.displayName="DialogHeader";let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="DialogFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});h.displayName=i.hE.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...r})});g.displayName=i.VY.displayName},55769:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>D});var s=a(95155),r=a(12115),i=a(20063),l=a(23675),o=a(86948),n=a(64269);let c={high:{label:"Alta",className:"bg-red-100 text-red-800 border-red-200",icon:"\uD83D\uDD34"},medium:{label:"M\xe9dia",className:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:"\uD83D\uDFE1"},low:{label:"Baixa",className:"bg-green-100 text-green-800 border-green-200",icon:"\uD83D\uDFE2"}};function d(e){let{priority:t,className:a}=e,r=c[t];return(0,s.jsxs)("span",{className:(0,n.cn)("inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full border",r.className,a),children:[(0,s.jsx)("span",{children:r.icon}),r.label]})}let m={open:{label:"Aberto",className:"bg-blue-100 text-blue-800 border-blue-200",icon:"\uD83D\uDCCB"},in_progress:{label:"Em Andamento",className:"bg-orange-100 text-orange-800 border-orange-200",icon:"⚡"},completed:{label:"Conclu\xeddo",className:"bg-green-100 text-green-800 border-green-200",icon:"✅"}};function u(e){let{status:t,className:a}=e,r=m[t];return(0,s.jsxs)("span",{className:(0,n.cn)("inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full border",r.className,a),children:[(0,s.jsx)("span",{children:r.icon}),r.label]})}var x=a(20508),h=a(16485),g=a(57828),p=a(48854),f=a(26206);function v(e){let{request:t,onClick:a,className:r}=e;return(0,s.jsxs)(o.Zp,{className:(0,n.cn)("cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-[1.02] border-l-4",(e=>{switch(e){case"high":return"border-l-red-500";case"medium":return"border-l-yellow-500";case"low":return"border-l-green-500";default:return"border-l-gray-500"}})(t.priority),r),onClick:a,children:[(0,s.jsx)(o.aR,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,s.jsx)(o.ZB,{className:"text-lg font-semibold line-clamp-2 flex-1",children:t.title}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(d,{priority:t.priority}),(0,s.jsx)(u,{status:t.status})]})]})}),(0,s.jsxs)(o.Wu,{className:"pt-0",children:[t.description&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.description}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-4 line-clamp-3",children:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120,a=e.replace(/<[^>]*>/g,"");return a.length>t?a.substring(0,t)+"...":a}(t.content)}),t.coverImage&&(0,s.jsx)("div",{className:"mb-4 rounded-lg overflow-hidden",children:(0,s.jsx)("img",{src:t.coverImage,alt:t.title,className:"w-full h-32 object-cover"})}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(x.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:t.authorName})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(h.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:(0,p.m)(t.createdAt,{addSuffix:!0,locale:f.F})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-blue-600",children:[(0,s.jsx)(g.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"Ver detalhes"})]})]})]})]})}var j=a(51834),b=a(3998),y=a(99051),N=a(36168),w=a(42529),A=a(65229),E=a(26983),S=a(25583),C=a(29141);let k=[{value:"open",label:"Aberto",icon:y.A,color:"text-blue-600"},{value:"in_progress",label:"Em Andamento",icon:N.A,color:"text-orange-600"},{value:"completed",label:"Conclu\xeddo",icon:w.A,color:"text-green-600"}];function R(e){let{request:t,isOpen:a,onClose:i,onStatusChange:o}=e,{user:n}=(0,C.J)(),[c,m]=(0,r.useState)([]),[g,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),R=(0,r.useCallback)(async()=>{if(t){v(!0);try{let e=await l.c.getStatusTimeline(t.id);m(e)}catch(e){console.error("Error loading timeline:",e)}finally{v(!1)}}},[t]);(0,r.useEffect)(()=>{t&&a&&R()},[t,a,R]);let _=async e=>{if(t&&n){w(!0);try{await l.c.updateStatus(t.id,e,n.uid,n.name||n.email||"Usu\xe1rio"),null==o||o(),await R()}catch(e){console.error("Error updating status:",e),alert("Erro ao atualizar status")}finally{w(!1)}}};return t?(0,s.jsx)(j.lG,{open:a,onOpenChange:i,children:(0,s.jsxs)(j.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(j.c7,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(j.L3,{className:"text-2xl font-bold mb-2",children:t.title}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)(d,{priority:t.priority}),(0,s.jsx)(u,{status:t.status})]})]}),(0,s.jsx)(b.$,{variant:"ghost",size:"sm",onClick:i,children:(0,s.jsx)(A.A,{className:"h-4 w-4"})})]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[t.description&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Descri\xe7\xe3o"}),(0,s.jsx)("p",{className:"text-gray-700",children:t.description})]}),t.coverImage&&(0,s.jsx)("div",{children:(0,s.jsx)("img",{src:t.coverImage,alt:t.title,className:"w-full max-h-64 object-cover rounded-lg"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg mb-3",children:"Conte\xfado"}),(0,s.jsx)("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:t.content}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg mb-3",children:"Alterar Status"}),(0,s.jsx)("div",{className:"flex gap-2",children:k.map(e=>{let a=e.icon,r=t.status===e.value;return(0,s.jsxs)(b.$,{variant:r?"default":"outline",size:"sm",onClick:()=>_(e.value),disabled:r||N,className:"flex items-center gap-2",children:[(0,s.jsx)(a,{className:"h-4 w-4"}),e.label]},e.value)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg mb-3",children:"Hist\xf3rico de Status"}),g?(0,s.jsxs)("div",{className:"text-center py-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Carregando hist\xf3rico..."})]}):0===c.length?(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Nenhum hist\xf3rico dispon\xedvel"}):(0,s.jsx)("div",{className:"space-y-4",children:c.map((e,t)=>{var a,r;let i=(e=>{let t=k.find(t=>t.value===e);return t?t.icon:y.A})(e.newStatus),l=t===c.length-1;return(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"p-2 rounded-full bg-gray-100 ".concat((e=>{let t=k.find(t=>t.value===e);return t?t.color:"text-gray-600"})(e.newStatus)),children:(0,s.jsx)(i,{className:"h-4 w-4"})}),!l&&(0,s.jsx)("div",{className:"w-px h-8 bg-gray-200 mt-2"})]}),(0,s.jsxs)("div",{className:"flex-1 pb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"font-medium",children:e.userName}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:e.oldStatus===e.newStatus?"criou a solicita\xe7\xe3o":"alterou de ".concat(null==(a=k.find(t=>t.value===e.oldStatus))?void 0:a.label," para ").concat(null==(r=k.find(t=>t.value===e.newStatus))?void 0:r.label)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(E.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:(0,S.GP)(e.timestamp,"dd/MM/yyyy HH:mm",{locale:f.F})})]}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("span",{children:(0,p.m)(e.timestamp,{addSuffix:!0,locale:f.F})})})]}),e.comment&&(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1 italic",children:["“",e.comment,"”"]})]})]},e.id)})})]}),(0,s.jsx)("div",{className:"border-t pt-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.A,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-gray-600",children:"Criado por:"}),(0,s.jsx)("span",{className:"font-medium",children:t.authorName})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-gray-600",children:"Criado em:"}),(0,s.jsx)("span",{className:"font-medium",children:(0,S.GP)(t.createdAt,"dd/MM/yyyy HH:mm",{locale:f.F})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.A,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-gray-600",children:"\xdaltima atualiza\xe7\xe3o:"}),(0,s.jsx)("span",{className:"font-medium",children:(0,S.GP)(t.updatedAt,"dd/MM/yyyy HH:mm",{locale:f.F})})]})]})})]})]})}):null}var _=a(13406),q=a(11647),I=a(6191),z=a(30814),P=a(1524),M=a(15174);function D(){let e=(0,i.useRouter)(),{user:t}=(0,C.J)(),[a,n]=(0,r.useState)([]),[c,d]=(0,r.useState)(null),[m,u]=(0,r.useState)(!0),[x,h]=(0,r.useState)(null),[g,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&f()},[t]);let f=async()=>{u(!0);try{console.log("\uD83D\uDD0D Carregando dados do roadmap..."),console.log("\uD83D\uDC64 Usu\xe1rio atual:",t);let[e,a]=await Promise.all([l.c.getAllRequests(),l.c.getStats()]);console.log("✅ Dados carregados com sucesso:",{requests:e.length,stats:a}),n(e),d(a)}catch(e){console.error("❌ Error loading roadmap data:",e),alert("Erro ao carregar dados do roadmap")}finally{u(!1)}},j=e=>{h(e),p(!0)},A=e=>a.filter(t=>t.status===e);return m?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"RoadMap"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Gerencie as solicita\xe7\xf5es de melhorias"})]})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)(M.EA,{className:"h-6 w-24"})}),(0,s.jsx)(o.Wu,{children:(0,s.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,s.jsx)(M.EA,{className:"h-32 w-full"},e))})})]},e))})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"RoadMap"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Gerencie as solicita\xe7\xf5es de melhorias"})]}),(0,s.jsxs)(b.$,{onClick:()=>e.push("/admin/roadmap/new"),children:[(0,s.jsx)(I.A,{className:"h-4 w-4 mr-2"}),"Nova Solicita\xe7\xe3o"]})]}),c&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)(o.Zp,{children:[(0,s.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ZB,{className:"text-sm font-medium",children:"Total"}),(0,s.jsx)(z.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(o.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:c.total})})]}),(0,s.jsxs)(o.Zp,{children:[(0,s.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ZB,{className:"text-sm font-medium",children:"Abertas"}),(0,s.jsx)(y.A,{className:"h-4 w-4 text-blue-600"})]}),(0,s.jsx)(o.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:c.open})})]}),(0,s.jsxs)(o.Zp,{children:[(0,s.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ZB,{className:"text-sm font-medium",children:"Em Andamento"}),(0,s.jsx)(N.A,{className:"h-4 w-4 text-orange-600"})]}),(0,s.jsx)(o.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:c.in_progress})})]}),(0,s.jsxs)(o.Zp,{children:[(0,s.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ZB,{className:"text-sm font-medium",children:"Conclu\xeddas"}),(0,s.jsx)(w.A,{className:"h-4 w-4 text-green-600"})]}),(0,s.jsx)(o.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:c.completed})})]})]}),c&&(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(P.A,{className:"h-5 w-5"}),"Estat\xedsticas por Prioridade"]})}),(0,s.jsx)(o.Wu,{children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(q.E,{variant:"destructive",children:"Alta"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[c.byPriority.high," solicita\xe7\xf5es"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(q.E,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"M\xe9dia"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[c.byPriority.medium," solicita\xe7\xf5es"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(q.E,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Baixa"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[c.byPriority.low," solicita\xe7\xf5es"]})]})]})})]}),(0,s.jsxs)(_.tU,{defaultValue:"open",className:"w-full",children:[(0,s.jsxs)(_.j7,{className:"grid w-full grid-cols-3",children:[(0,s.jsxs)(_.Xi,{value:"open",className:"flex items-center gap-2",children:[(0,s.jsx)(y.A,{className:"h-4 w-4"}),"Aberto (",(null==c?void 0:c.open)||0,")"]}),(0,s.jsxs)(_.Xi,{value:"in_progress",className:"flex items-center gap-2",children:[(0,s.jsx)(N.A,{className:"h-4 w-4"}),"Em Andamento (",(null==c?void 0:c.in_progress)||0,")"]}),(0,s.jsxs)(_.Xi,{value:"completed",className:"flex items-center gap-2",children:[(0,s.jsx)(w.A,{className:"h-4 w-4"}),"Conclu\xeddo (",(null==c?void 0:c.completed)||0,")"]})]}),(0,s.jsx)(_.av,{value:"open",className:"mt-6",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===A("open").length?(0,s.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,s.jsx)(y.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma solicita\xe7\xe3o aberta"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Todas as solicita\xe7\xf5es est\xe3o sendo trabalhadas ou foram conclu\xeddas."}),(0,s.jsxs)(b.$,{onClick:()=>e.push("/admin/roadmap/new"),children:[(0,s.jsx)(I.A,{className:"h-4 w-4 mr-2"}),"Criar Nova Solicita\xe7\xe3o"]})]}):A("open").map(e=>(0,s.jsx)(v,{request:e,onClick:()=>j(e)},e.id))})}),(0,s.jsx)(_.av,{value:"in_progress",className:"mt-6",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===A("in_progress").length?(0,s.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,s.jsx)(N.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma solicita\xe7\xe3o em andamento"}),(0,s.jsx)("p",{className:"text-gray-600",children:"N\xe3o h\xe1 solicita\xe7\xf5es sendo trabalhadas no momento."})]}):A("in_progress").map(e=>(0,s.jsx)(v,{request:e,onClick:()=>j(e)},e.id))})}),(0,s.jsx)(_.av,{value:"completed",className:"mt-6",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===A("completed").length?(0,s.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,s.jsx)(w.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma solicita\xe7\xe3o conclu\xedda"}),(0,s.jsx)("p",{className:"text-gray-600",children:"As solicita\xe7\xf5es conclu\xeddas aparecer\xe3o aqui."})]}):A("completed").map(e=>(0,s.jsx)(v,{request:e,onClick:()=>j(e)},e.id))})})]}),(0,s.jsx)(R,{request:x,isOpen:g,onClose:()=>{p(!1),h(null)},onStatusChange:()=>{f()}})]})}},64269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var s=a(2821),r=a(75889);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},83141:(e,t,a)=>{Promise.resolve().then(a.bind(a,55769))},86948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>n,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l});var s=a(95155);a(12115);var r=a(64269);function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...a})}function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...a})}}},e=>{e.O(0,[9135,7210,9779,3643,4869,3148,4127,9511,4243,8136,8441,1255,7358],()=>e(e.s=83141)),_N_E=e.O()}]);