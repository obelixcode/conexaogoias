(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{13673:()=>{},14585:(r,e,t)=>{"use strict";t.d(e,{IG:()=>u,db:()=>l,j2:()=>c});var a=t(52078),o=t(81328),i=t(19708),n=t(79996);let s=(0,a.Wp)({apiKey:"AIzaSyBjdbOl0xyru5TfEQtu2iC2wqIz3QvrRQM",authDomain:"aconexaogoias.firebaseapp.com",projectId:"aconexaogoias",storageBucket:"aconexaogoias.firebasestorage.app",messagingSenderId:"6509088743",appId:"1:6509088743:web:f1866c676e18c53204f742"}),c=(0,o.xI)(s),l=(0,i.aU)(s),u=(0,n.c7)(s)},23586:(r,e,t)=>{Promise.resolve().then(t.t.bind(t,28963,23)),Promise.resolve().then(t.t.bind(t,13673,23)),Promise.resolve().then(t.bind(t,53744)),Promise.resolve().then(t.bind(t,81402)),Promise.resolve().then(t.bind(t,29141))},28963:r=>{r.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_f367f3"}},29141:(r,e,t)=>{"use strict";t.d(e,{J:()=>c,UserProvider:()=>s});var a=t(95155),o=t(12115),i=t(34426);let n=(0,o.createContext)(void 0);function s(r){let{children:e}=r,[t,s]=(0,o.useState)(null),[c,l]=(0,o.useState)(!0),u=async()=>{try{let r=await i.z.getCurrentUser();s(r)}catch(r){console.error("Error refreshing user:",r),s(null)}};return(0,o.useEffect)(()=>{u().finally(()=>l(!1))},[]),(0,a.jsx)(n.Provider,{value:{user:t,setUser:s,refreshUser:u,isLoading:c},children:e})}function c(){let r=(0,o.useContext)(n);if(void 0===r)throw Error("useUser must be used within a UserProvider");return r}},31692:(r,e,t)=>{"use strict";t.d(e,{h:()=>l});var a=t(14585),o=t(19708),i=t(79996),n=t(96975);let s="settings",c="site";class l{static async getSettings(){try{let t=(0,o.H9)(a.db,s,c),i=await (0,o.x7)(t);if(i.exists()){var r,e;let t=i.data();return{...n.a,...t,createdAt:(null==(r=t.createdAt)?void 0:r.toDate())||new Date,updatedAt:(null==(e=t.updatedAt)?void 0:e.toDate())||new Date}}return n.a}catch(r){return console.error("Erro ao buscar configura\xe7\xf5es:",r),n.a}}static async updateSettings(r){try{let e=(0,o.H9)(a.db,s,c),t={...r,updatedAt:new Date};(await (0,o.x7)(e)).exists()?await (0,o.mZ)(e,t):await (0,o.BN)(e,{...n.a,...t,createdAt:new Date})}catch(r){throw console.error("Erro ao atualizar configura\xe7\xf5es:",r),Error("Falha ao salvar configura\xe7\xf5es")}}static async uploadFavicon(r){try{if(!r.type.startsWith("image/"))throw Error("Arquivo deve ser uma imagem");if(r.size>1048576)throw Error("Arquivo deve ter no m\xe1ximo 1MB");let e=Date.now(),t="favicon-".concat(e,".").concat(r.name.split(".").pop()),o=(0,i.KR)(a.IG,"favicons/".concat(t));return await (0,i.D)(o,r),await (0,i.qk)(o)}catch(r){throw console.error("Erro ao fazer upload do favicon:",r),Error("Falha ao fazer upload do favicon")}}static async deleteFavicon(r){try{if(!r)return;let e=new URL(r).pathname.match(/\/o\/(.+?)\?/);if(e){let r=decodeURIComponent(e[1]),t=(0,i.KR)(a.IG,r);await (0,i.XR)(t)}}catch(r){console.error("Erro ao deletar favicon antigo:",r)}}static async uploadLogo(r){try{if(!r.type.startsWith("image/"))throw Error("Arquivo deve ser uma imagem");if(r.size>2097152)throw Error("Arquivo deve ter no m\xe1ximo 2MB");let e=Date.now(),t="logo_".concat(e,".").concat(r.name.split(".").pop()),o=(0,i.KR)(a.IG,"logos/".concat(t));return await (0,i.D)(o,r),await (0,i.qk)(o)}catch(r){throw console.error("Erro ao fazer upload da logo:",r),r}}static async deleteLogo(r){try{if(!r)return;let e=new URL(r).pathname.match(/\/o\/(.+?)\?/);if(e){let r=decodeURIComponent(e[1]),t=(0,i.KR)(a.IG,r);await (0,i.XR)(t)}}catch(r){console.error("Erro ao deletar logo antiga:",r)}}static async updateFavicon(r){try{let e=await this.getSettings();e.faviconUrl&&await this.deleteFavicon(e.faviconUrl);let t=await this.uploadFavicon(r);return await this.updateSettings({faviconUrl:t}),t}catch(r){throw console.error("Erro ao atualizar favicon:",r),r}}static async updateLogo(r){try{let e=await this.getSettings();e.logoUrl&&await this.deleteLogo(e.logoUrl);let t=await this.uploadLogo(r);return await this.updateSettings({logoUrl:t}),t}catch(r){throw console.error("Erro ao atualizar logo:",r),r}}static async updateFooterLogo(r){try{let e=await this.getSettings();e.footerLogoUrl&&await this.deleteLogo(e.footerLogoUrl);let t=await this.uploadLogo(r);return await this.updateSettings({footerLogoUrl:t}),t}catch(r){throw console.error("Erro ao atualizar logo do footer:",r),r}}static isValidUrl(r){try{return new URL(r),!0}catch(r){return!1}}static isValidEmail(r){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)}static isValidPhone(r){return/^\(\d{2}\)\s\d{4,5}-\d{4}$/.test(r)}}},34426:(r,e,t)=>{"use strict";t.d(e,{z:()=>s});var a=t(81328),o=t(19708),i=t(14585);let n="users";class s{static async login(r){try{let e=(await (0,a.x9)(i.j2,r.email,r.password)).user,t=await (0,o.x7)((0,o.H9)(i.db,n,e.uid));if(!t.exists())throw Error("Usu\xe1rio n\xe3o encontrado no sistema");let s=t.data();if(!s.isActive)throw Error("Usu\xe1rio desativado");return await (0,o.mZ)((0,o.H9)(i.db,n,e.uid),{lastLoginAt:new Date}),{uid:e.uid,email:e.email,name:s.name,role:s.role,isActive:s.isActive,avatar:s.avatar}}catch(r){throw console.error("Login error:",r),Error("Erro ao fazer login. Verifique suas credenciais.")}}static async logout(){try{await (0,a.CI)(i.j2)}catch(r){throw console.error("Logout error:",r),Error("Erro ao fazer logout")}}static async getCurrentUser(){return new Promise(r=>{let e=(0,a.hg)(i.j2,async t=>{if(e(),!t)return void r(null);try{let e=await (0,o.x7)((0,o.H9)(i.db,n,t.uid));if(!e.exists())return void r(null);let a=e.data();if(!a.isActive)return void r(null);r({uid:t.uid,email:t.email,name:a.name,role:a.role,isActive:a.isActive,avatar:a.avatar})}catch(e){console.error("Get current user error:",e),r(null)}})})}static async createAdminUser(r){try{throw Error("Cria\xe7\xe3o de usu\xe1rios deve ser feita via Firebase Console ou server-side function")}catch(r){throw console.error("Create admin user error:",r),Error("Erro ao criar usu\xe1rio administrador")}}static async updateAdminUser(r,e){try{await (0,o.mZ)((0,o.H9)(i.db,n,r),{...e,updatedAt:new Date})}catch(r){throw console.error("Update admin user error:",r),Error("Erro ao atualizar usu\xe1rio")}}static async getAdminUser(r){try{let e=await (0,o.x7)((0,o.H9)(i.db,n,r));if(!e.exists())return null;return e.data()}catch(r){throw console.error("Get admin user error:",r),Error("Erro ao buscar usu\xe1rio")}}static hasPermission(r,e){let t={editor:1,admin:2,super_admin:3};return t[r]>=t[e]}static onAuthStateChange(r){return(0,a.hg)(i.j2,async e=>{if(!e)return void r(null);try{let t=await (0,o.x7)((0,o.H9)(i.db,n,e.uid));if(!t.exists())return void r(null);let a=t.data();if(!a.isActive)return void r(null);r({uid:e.uid,email:e.email,name:a.name,role:a.role,isActive:a.isActive,avatar:a.avatar})}catch(e){console.error("Auth state change error:",e),r(null)}})}}},53419:(r,e,t)=>{"use strict";t.d(e,{h:()=>o});var a=t(12115);function o(){let r=(0,a.useRef)(new Set),e=e=>{if(!e)return!1;try{return e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e),r.current.delete(e),!0}catch(r){return console.warn("Error removing element:",r),!1}},t=r=>{if(!document)return null;try{return document.querySelectorAll(r)}catch(r){return console.warn("Error querying selector:",r),null}};return(0,a.useEffect)(()=>()=>{r.current.forEach(r=>{e(r)}),r.current.clear()},[]),{safeCreateElement:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!document)return null;try{let a=document.createElement(e);return Object.entries(t).forEach(r=>{let[e,t]=r;a.setAttribute(e,t)}),r.current.add(a),a}catch(r){return console.warn("Error creating element:",r),null}},safeAppendChild:(r,e)=>{if(!r||!e)return!1;try{return r.appendChild(e),!0}catch(r){return console.warn("Error appending child:",r),!1}},safeRemoveElement:e,safeQuerySelector:t,safeRemoveElements:r=>{let a=t(r);if(!a)return 0;let o=0;return a.forEach(r=>{e(r)&&o++}),o}}}},53744:(r,e,t)=>{"use strict";t.d(e,{DynamicFavicon:()=>l});var a=t(95155),o=t(12115),i=t(81402),n=t(53419),s=t(93870);function c(){let{settings:r,isLoading:e}=(0,i.M)(),{safeCreateElement:t,safeAppendChild:a,safeRemoveElement:s,safeRemoveElements:c}=(0,n.h)();return(0,o.useEffect)(()=>{var o;if(e||!r.faviconUrl||!(null==(o=document)?void 0:o.head))return;let i=null,n=null;try{c('link[rel*="icon"]'),(i=t("link",{rel:"icon",type:"image/x-icon",href:r.faviconUrl}))&&document.head&&a(document.head,i),(n=t("link",{rel:"apple-touch-icon",href:r.faviconUrl}))&&document.head&&a(document.head,n)}catch(r){console.warn("Error updating favicon:",r)}return()=>{s(i),s(n)}},[r.faviconUrl,e,t,a,s,c]),null}function l(){return(0,a.jsx)(s.Y,{children:(0,a.jsx)(c,{})})}},81402:(r,e,t)=>{"use strict";t.d(e,{SettingsProvider:()=>c,M:()=>l});var a=t(95155),o=t(12115),i=t(31692),n=t(96975);let s=(0,o.createContext)(void 0);function c(r){let{children:e}=r,t=function(){let[r,e]=(0,o.useState)(n.a),[t,a]=(0,o.useState)(!0),[s,c]=(0,o.useState)(null);return(0,o.useEffect)(()=>{(async()=>{try{a(!0),c(null);let r=await i.h.getSettings();e(r)}catch(r){console.error("Erro ao carregar configura\xe7\xf5es:",r),c("Erro ao carregar configura\xe7\xf5es do site"),e(n.a)}finally{a(!1)}})()},[]),{settings:r,isLoading:t,error:s,refreshSettings:async()=>{try{c(null);let r=await i.h.getSettings();e(r)}catch(r){console.error("Erro ao atualizar configura\xe7\xf5es:",r),c("Erro ao atualizar configura\xe7\xf5es do site")}}}}();return(0,a.jsx)(s.Provider,{value:t,children:e})}function l(){let r=(0,o.useContext)(s);if(void 0===r)throw Error("useSettingsContext must be used within a SettingsProvider");return r}},93870:(r,e,t)=>{"use strict";t.d(e,{Y:()=>i});var a=t(95155),o=t(12115);function i(r){let{children:e,fallback:t=null}=r,[i,n]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{n(!0)},[]),i)?(0,a.jsx)(a.Fragment,{children:e}):(0,a.jsx)(a.Fragment,{children:t})}},96975:(r,e,t)=>{"use strict";t.d(e,{a:()=>a});let a={siteName:"Conex\xe3o Goi\xe1s",siteDescription:"Portal de not\xedcias de Goi\xe1s. Informa\xe7\xe3o confi\xe1vel e atualizada.",siteUrl:"https://conexaogoias.com",contactEmail:"contato@conexaogoias.com",adminEmail:"admin@conexaogoias.com",phone1:"(62) 99999-9999",phone2:"(62) 3333-3333",address:"Rua das Flores, 123\nCentro - Goi\xe2nia/GO",socialMedia:{facebook:"https://facebook.com/conexaogoias",twitter:"https://twitter.com/conexaogoias",instagram:"https://instagram.com/conexaogoias",youtube:"https://youtube.com/@conexaogoias",whatsapp:"https://wa.me/5562999999999"},twitterHandle:"@conexaogoias",foundingYear:new Date().getFullYear(),faviconUrl:"",logoUrl:"",footerLogoUrl:"",createdAt:new Date,updatedAt:new Date}}},r=>{r.O(0,[7300,9135,7210,3643,8441,1255,7358],()=>r(r.s=23586)),_N_E=r.O()}]);