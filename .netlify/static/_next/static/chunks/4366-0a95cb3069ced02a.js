"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4366],{14585:(t,e,a)=>{a.d(e,{IG:()=>c,db:()=>n,j2:()=>s});var r=a(52078),o=a(81328),i=a(19708),l=a(79996);let d=(0,r.Wp)({apiKey:"AIzaSyBjdbOl0xyru5TfEQtu2iC2wqIz3QvrRQM",authDomain:"aconexaogoias.firebaseapp.com",projectId:"aconexaogoias",storageBucket:"aconexaogoias.firebasestorage.app",messagingSenderId:"6509088743",appId:"1:6509088743:web:f1866c676e18c53204f742"}),s=(0,o.xI)(d),n=(0,i.aU)(d),c=(0,l.c7)(d)},64269:(t,e,a)=>{a.d(e,{cn:()=>i});var r=a(2821),o=a(75889);function i(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return(0,o.QP)((0,r.$)(e))}},86706:(t,e,a)=>{a.d(e,{b:()=>d});var r=a(19708),o=a(14585);let i="news",l="categories";class d{static async createNews(t,e){try{var a;return(await (0,r.gS)((0,r.rJ)(o.db,i),{title:t.title,subtitle:t.subtitle,content:t.content,coverImage:e,categoryId:t.categoryId,author:t.author,tags:t.tags.split(",").map(t=>t.trim()).filter(t=>t),slug:t.slug,createdAt:(0,r.O5)(),updatedAt:(0,r.O5)(),publishedAt:t.isPublished?(0,r.O5)():null,isPublished:t.isPublished,isFeatured:t.isFeatured,featuredPosition:t.featuredPosition||null,views:0,metaDescription:t.metaDescription||"",metaKeywords:(null==(a=t.metaKeywords)?void 0:a.split(",").map(t=>t.trim()).filter(t=>t))||[]})).id}catch(t){throw console.error("Create news error:",t),Error("Erro ao criar not\xedcia")}}static async updateNews(t,e,a){try{let l={updatedAt:(0,r.O5)()};void 0!==e.title&&(l.title=e.title),void 0!==e.subtitle&&(l.subtitle=e.subtitle),void 0!==e.content&&(l.content=e.content),void 0!==e.categoryId&&(l.categoryId=e.categoryId),void 0!==e.author&&(l.author=e.author),void 0!==e.slug&&(l.slug=e.slug),void 0!==e.isPublished&&(l.isPublished=e.isPublished),void 0!==e.isFeatured&&(l.isFeatured=e.isFeatured),void 0!==e.featuredPosition&&null!==e.featuredPosition&&(l.featuredPosition=e.featuredPosition),void 0!==e.metaDescription&&(l.metaDescription=e.metaDescription),a&&(l.coverImage=a),e.tags&&(l.tags=e.tags.split(",").map(t=>t.trim()).filter(t=>t)),e.metaKeywords&&(l.metaKeywords=e.metaKeywords.split(",").map(t=>t.trim()).filter(t=>t)),e.isPublished&&!e.isPublished&&(l.publishedAt=(0,r.O5)()),await (0,r.mZ)((0,r.H9)(o.db,i,t),l)}catch(t){throw console.error("Update news error:",t),Error("Erro ao atualizar not\xedcia")}}static async deleteNews(t){try{await (0,r.kd)((0,r.H9)(o.db,i,t))}catch(t){throw console.error("Delete news error:",t),Error("Erro ao excluir not\xedcia")}}static async getNewsById(t){try{var e,a,l;let d=await (0,r.x7)((0,r.H9)(o.db,i,t));if(!d.exists())return null;let s=d.data();return{id:d.id,...s,createdAt:(null==(e=s.createdAt)?void 0:e.toDate())||new Date,updatedAt:(null==(a=s.updatedAt)?void 0:a.toDate())||new Date,publishedAt:null==(l=s.publishedAt)?void 0:l.toDate()}}catch(t){throw console.error("Get news by ID error:",t),Error("Erro ao buscar not\xedcia")}}static async getNewsBySlug(t){try{var e,a,d;console.log("Searching for news with slug:",t);let s=(0,r.P)((0,r.rJ)(o.db,i),(0,r._M)("slug","==",t),(0,r._M)("isPublished","==",!0)),n=await (0,r.GG)(s);if(console.log("Found news docs:",n.docs.length),n.empty)return console.log("No news found with slug:",t),null;let c=n.docs[0],u=c.data();console.log("News data:",{id:c.id,title:u.title,slug:u.slug,categoryId:u.categoryId});let g=await (0,r.x7)((0,r.H9)(o.db,l,u.categoryId)),h=g.data();return console.log("Category data:",h),{id:c.id,...u,createdAt:(null==(e=u.createdAt)?void 0:e.toDate())||new Date,updatedAt:(null==(a=u.updatedAt)?void 0:a.toDate())||new Date,publishedAt:null==(d=u.publishedAt)?void 0:d.toDate(),category:{id:g.id,name:(null==h?void 0:h.name)||"",slug:(null==h?void 0:h.slug)||"",color:(null==h?void 0:h.color)||"#000000"}}}catch(t){throw console.error("Get news by slug error:",t),Error("Erro ao buscar not\xedcia")}}static async incrementViews(t){try{await (0,r.mZ)((0,r.H9)(o.db,i,t),{views:(0,r.GV)(1)})}catch(t){console.error("Increment views error:",t)}}static async getFeaturedNews(){try{let e=(0,r.P)((0,r.rJ)(o.db,i),(0,r._M)("isFeatured","==",!0),(0,r._M)("isPublished","==",!0),(0,r.AB)(10)),a=await (0,r.GG)(e),d=[];for(let e of a.docs){var t;let a=e.data(),i=(await (0,r.x7)((0,r.H9)(o.db,l,a.categoryId))).data();d.push({id:e.id,title:a.title,subtitle:a.subtitle,coverImage:a.coverImage,slug:a.slug,category:{id:a.categoryId,name:(null==i?void 0:i.name)||"Sem categoria",slug:(null==i?void 0:i.slug)||"",color:(null==i?void 0:i.color)||"#000000"},publishedAt:(null==(t=a.publishedAt)?void 0:t.toDate())||new Date,views:a.views||0,position:a.featuredPosition||0})}return d.sort((t,e)=>t.position-e.position).slice(0,5)}catch(t){return console.error("Get featured news error:",t),[]}}static async getNewsByCategory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{page:1,limit:10};try{let n=(0,r.P)((0,r.rJ)(o.db,l),(0,r._M)("slug","==",t)),c=await (0,r.GG)(n);if(c.empty)return{data:[],pagination:{page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1}};let u=c.docs[0],g=u.data(),h=(0,r.P)((0,r.rJ)(o.db,i),(0,r._M)("categoryId","==",u.id),(0,r._M)("isPublished","==",!0),(0,r.My)("publishedAt","desc"),(0,r.AB)(e.limit)),w=await (0,r.GG)(h),p=[];for(let t of w.docs){var a,d,s;let e=t.data();p.push({id:t.id,...e,createdAt:(null==(a=e.createdAt)?void 0:a.toDate())||new Date,updatedAt:(null==(d=e.updatedAt)?void 0:d.toDate())||new Date,publishedAt:null==(s=e.publishedAt)?void 0:s.toDate(),category:{id:u.id,name:g.name,slug:g.slug,color:g.color}})}return{data:p,pagination:{page:e.page,limit:e.limit,total:p.length,totalPages:Math.ceil(p.length/e.limit),hasNext:p.length===e.limit,hasPrev:e.page>1}}}catch(t){throw console.error("Get news by category error:",t),Error("Erro ao buscar not\xedcias da categoria")}}static async getRecentNews(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{let s=(0,r.P)((0,r.rJ)(o.db,i),(0,r._M)("isPublished","==",!0),(0,r.My)("publishedAt","desc"),(0,r.AB)(t)),n=await (0,r.GG)(s),c=[];for(let t of n.docs){var e,a,d;let i=t.data(),s=await (0,r.x7)((0,r.H9)(o.db,l,i.categoryId)),n=s.data();c.push({id:t.id,...i,createdAt:(null==(e=i.createdAt)?void 0:e.toDate())||new Date,updatedAt:(null==(a=i.updatedAt)?void 0:a.toDate())||new Date,publishedAt:null==(d=i.publishedAt)?void 0:d.toDate(),category:{id:s.id,name:(null==n?void 0:n.name)||"",slug:(null==n?void 0:n.slug)||"",color:(null==n?void 0:n.color)||"#000000"}})}return c}catch(t){throw console.error("Get recent news error:",t),Error("Erro ao buscar not\xedcias recentes")}}static async getMostReadNews(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{let s=new Date;s.setDate(s.getDate()-7);let n=(0,r.P)((0,r.rJ)(o.db,i),(0,r._M)("isPublished","==",!0),(0,r._M)("publishedAt",">=",s),(0,r.My)("publishedAt","desc"),(0,r.AB)(2*t)),c=await (0,r.GG)(n),u=[];for(let t of c.docs){var e,a,d;let i=t.data(),s=await (0,r.x7)((0,r.H9)(o.db,l,i.categoryId)),n=s.data();u.push({id:t.id,...i,createdAt:(null==(e=i.createdAt)?void 0:e.toDate())||new Date,updatedAt:(null==(a=i.updatedAt)?void 0:a.toDate())||new Date,publishedAt:null==(d=i.publishedAt)?void 0:d.toDate(),views:i.views||0,category:{id:s.id,name:(null==n?void 0:n.name)||"",slug:(null==n?void 0:n.slug)||"",color:(null==n?void 0:n.color)||"#000000"}})}return u.sort((t,e)=>(e.views||0)-(t.views||0)).slice(0,t)}catch(e){return console.error("Get most read news error:",e),this.getRecentNews(t)}}static async getRelatedNews(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;try{let d=await this.getNewsById(t);if(!d)return[];let s=(0,r.P)((0,r.rJ)(o.db,i),(0,r._M)("isPublished","==",!0),(0,r._M)("categoryId","==",d.categoryId),(0,r.My)("publishedAt","desc")),n=await (0,r.GG)(s),c=[];for(let e of n.docs){var a;if(e.id===t)continue;let i=e.data(),s=i.tags||[],n=d.tags.filter(t=>s.includes(t)).length/Math.max(d.tags.length,s.length),u=(await (0,r.x7)((0,r.H9)(o.db,l,i.categoryId))).data();c.push({id:e.id,title:i.title,coverImage:i.coverImage,slug:i.slug,categoryName:(null==u?void 0:u.name)||"",publishedAt:(null==(a=i.publishedAt)?void 0:a.toDate())||new Date,similarity:n})}return c.sort((t,e)=>e.similarity-t.similarity).slice(0,e)}catch(t){throw console.error("Get related news error:",t),Error("Erro ao buscar not\xedcias relacionadas")}}static async searchNews(t,e){try{let n=(0,r.P)((0,r.rJ)(o.db,i),(0,r._M)("isPublished","==",!0));t.category&&(n=(0,r.P)(n,(0,r._M)("categoryId","==",t.category))),void 0!==t.isFeatured&&(n=(0,r.P)(n,(0,r._M)("isFeatured","==",t.isFeatured))),n=(0,r.P)(n,(0,r.My)("publishedAt","desc")),n=(0,r.P)(n,(0,r.AB)(e.limit));let c=await (0,r.GG)(n),u=[];for(let t of c.docs){var a,d,s;let e=t.data(),i=await (0,r.x7)((0,r.H9)(o.db,l,e.categoryId)),n=i.data();u.push({id:t.id,...e,createdAt:(null==(a=e.createdAt)?void 0:a.toDate())||new Date,updatedAt:(null==(d=e.updatedAt)?void 0:d.toDate())||new Date,publishedAt:null==(s=e.publishedAt)?void 0:s.toDate(),category:{id:i.id,name:(null==n?void 0:n.name)||"",slug:(null==n?void 0:n.slug)||"",color:(null==n?void 0:n.color)||"#000000"}})}let g=u;if(t.query){let e=t.query.toLowerCase();g=u.filter(t=>t.title.toLowerCase().includes(e)||t.subtitle.toLowerCase().includes(e)||t.content.toLowerCase().includes(e))}return{data:g,pagination:{page:e.page,limit:e.limit,total:g.length,totalPages:Math.ceil(g.length/e.limit),hasNext:g.length===e.limit,hasPrev:e.page>1}}}catch(t){throw console.error("Search news error:",t),Error("Erro ao buscar not\xedcias")}}static async getAllNews(){try{let l=(0,r.P)((0,r.rJ)(o.db,i),(0,r.My)("createdAt","desc")),d=await (0,r.GG)(l),s=[];for(let r of d.docs){var t,e,a;let o=r.data();s.push({id:r.id,...o,createdAt:(null==(t=o.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(e=o.updatedAt)?void 0:e.toDate())||new Date,publishedAt:null==(a=o.publishedAt)?void 0:a.toDate()})}return s}catch(t){throw console.error("Get all news error:",t),Error("Erro ao buscar todas as not\xedcias")}}static async getNewsStats(){try{let t=await (0,r.GG)((0,r.rJ)(o.db,i)),e=await (0,r.GG)((0,r.rJ)(o.db,l)),a=t.docs.map(t=>{var e,a,r;return{id:t.id,...t.data(),createdAt:(null==(e=t.data().createdAt)?void 0:e.toDate())||new Date,updatedAt:(null==(a=t.data().updatedAt)?void 0:a.toDate())||new Date,publishedAt:null==(r=t.data().publishedAt)?void 0:r.toDate()}}),d=e.docs.map(t=>({id:t.id,...t.data()})),s=a.filter(t=>t.isPublished),n=a.filter(t=>!t.isPublished),c=a.reduce((t,e)=>t+(e.views||0),0),u=d.map(t=>({categoryName:t.name||"Unknown",count:a.filter(e=>e.categoryId===t.id).length})),g=s.sort((t,e)=>{var a,r;return((null==(a=e.publishedAt)?void 0:a.getTime())||0)-((null==(r=t.publishedAt)?void 0:r.getTime())||0)}).slice(0,10);return{totalNews:a.length,publishedNews:s.length,draftNews:n.length,totalViews:c,newsByCategory:u,recentNews:g}}catch(t){throw console.error("Get news stats error:",t),Error("Erro ao buscar estat\xedsticas")}}}}}]);