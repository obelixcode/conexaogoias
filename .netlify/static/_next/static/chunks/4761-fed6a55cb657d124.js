"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4761],{3512:(e,t,a)=>{a.d(t,{O:()=>i});var r=a(95155),o=a(64269);function i(e){let{children:t,className:a="",title:i,description:n,footer:l}=e;return(0,r.jsxs)("div",{className:(0,o.cn)("bg-white border border-gray-200 rounded-lg shadow-sm",a),children:[(i||n)&&(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[i&&(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i}),n&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:n})]}),(0,r.jsx)("div",{className:"px-6 py-4",children:t}),l&&(0,r.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:l})]})}},14585:(e,t,a)=>{a.d(t,{IG:()=>s,db:()=>d,j2:()=>c});var r=a(52078),o=a(81328),i=a(19708),n=a(79996);let l=(0,r.Wp)({apiKey:"AIzaSyBjdbOl0xyru5TfEQtu2iC2wqIz3QvrRQM",authDomain:"aconexaogoias.firebaseapp.com",projectId:"aconexaogoias",storageBucket:"aconexaogoias.firebasestorage.app",messagingSenderId:"6509088743",appId:"1:6509088743:web:f1866c676e18c53204f742"}),c=(0,o.xI)(l),d=(0,i.aU)(l),s=(0,n.c7)(l)},21786:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},37168:(e,t,a)=>{a.d(t,{n:()=>i});var r=a(79996),o=a(14585);class i{static async uploadImage(e,t,a){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;if(!o.IG)return console.warn("Firebase Storage not available, using fallback URL"),this.getFallbackImageUrl(e);try{if(!(0,r.KR)(o.IG,"test"))throw Error("Storage not properly initialized")}catch(t){return console.warn("Firebase Storage not properly configured, using fallback URL:",t),this.getFallbackImageUrl(e)}let n=null;for(let l=1;l<=i;l++)try{let i=await this.compressImage(e),c=(0,r.KR)(o.IG,t);if(!c)throw Error("Storage reference could not be created");if(a){let e=(0,r.bp)(c,i);return new Promise((t,o)=>{e.on("state_changed",e=>{let t=e.bytesTransferred/e.totalBytes*100;a(t)},e=>{console.error("Upload attempt ".concat(l," failed:"),e),n=e,o(e)},async()=>{try{let a=await (0,r.qk)(e.snapshot.ref);t(a)}catch(e){console.error("Get download URL attempt ".concat(l," failed:"),e),n=e,o(e)}})})}{let e=await (0,r.D)(c,i),a=await (0,r.qk)(e.ref);console.log("Upload successful:",{path:t,downloadURL:a});try{let e=await fetch(a,{method:"HEAD"});if(!e.ok)throw console.warn("Uploaded file not accessible:",e.status),Error("File not accessible: ".concat(e.status));console.log("File accessibility test passed")}catch(e){throw console.warn("File accessibility test failed:",e),Error("Uploaded file is not accessible")}return a}}catch(a){if(n=a,console.error("Upload attempt ".concat(l," failed:"),a),a instanceof Error&&a.message.includes("permission"))return console.warn("Permission denied, using fallback URL"),this.getFallbackImageUrl(e);if(l===i)break;let t=1e3*Math.pow(2,l);await new Promise(e=>setTimeout(e,t))}return console.error("All upload attempts failed, using fallback:",n),this.getFallbackImageUrl(e)}static getFallbackImageUrl(e){return"https://placehold.co/800x400/3B82F6/FFFFFF/png?text=".concat(encodeURIComponent(e.name))}static async testStorageConnection(){try{if(!o.IG)return console.error("Firebase Storage not initialized"),!1;if(!(0,r.KR)(o.IG,"test-connection"))return console.error("Could not create storage reference"),!1;return console.log("Firebase Storage connection test successful"),!0}catch(e){return console.error("Firebase Storage connection test failed:",e),!1}}static async uploadCoverImage(e,t,a){let r=Date.now(),o="cover-".concat(t,"-").concat(r,".").concat(e.name.split(".").pop());return this.uploadImage(e,"covers/".concat(o),a)}static async uploadContentImage(e,t){let a=Date.now(),r="content-".concat(a,".").concat(e.name.split(".").pop());return this.uploadImage(e,"content/".concat(r),t)}static async uploadBannerImage(e,t,a){let r=Date.now(),o=Math.random().toString(36).substring(2,8),i="banner-temp-".concat(r,"-").concat(o,".").concat(e.name.split(".").pop()),n="banners/".concat(i);console.log("Uploading banner image:",{fileName:i,path:n});try{let t=await this.uploadImage(e,n,a);return console.log("Banner upload completed:",t),t}catch(t){return console.error("Banner upload failed:",t),this.getFallbackImageUrl(e)}}static async deleteImage(e){try{let t=(0,r.KR)(o.IG,e);await (0,r.XR)(t)}catch(e){console.error("Delete image error:",e)}}static async compressImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1920,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return new Promise(r=>{let o=document.createElement("canvas"),i=o.getContext("2d"),n=new Image;n.onload=()=>{let{width:l,height:c}=n;l>t&&(c=c*t/l,l=t),o.width=l,o.height=c,null==i||i.drawImage(n,0,0,l,c),o.toBlob(t=>{t?r(new File([t],e.name,{type:e.type,lastModified:Date.now()})):r(e)},e.type,a)},n.src=URL.createObjectURL(e)})}static getFileSizeMB(e){return e.size/1048576}static validateImageFile(e){return["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)?this.getFileSizeMB(e)>5?{isValid:!1,error:"Arquivo muito grande. M\xe1ximo ".concat(5,"MB.")}:{isValid:!0}:{isValid:!1,error:"Tipo de arquivo n\xe3o suportado. Use JPG, PNG ou WebP."}}static generateUniqueFilename(e,t){let a=Date.now(),r=Math.random().toString(36).substring(2,8),o=e.split(".").pop(),i=e.split(".").slice(0,-1).join(".").toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").trim();return"".concat(t?"".concat(t,"-"):"").concat(i,"-").concat(a,"-").concat(r,".").concat(o)}static extractPathFromUrl(e){try{let t=new URL(e).pathname.match(/\/o\/(.+)\?/);return t?decodeURIComponent(t[1]):null}catch(e){return null}}static async cleanupOrphanedImages(e){try{let t=e.map(e=>this.deleteImage(e));await Promise.all(t)}catch(e){throw console.error("Cleanup orphaned images error:",e),Error("Erro ao limpar imagens \xf3rf\xe3s")}}}},42196:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},61922:(e,t,a)=>{a.d(t,{a:()=>i});var r=a(95155),o=a(64269);function i(e){let{variant:t="primary",size:a="medium",children:i,className:n="",asChild:l=!1,...c}=e;return(0,r.jsx)("button",{className:(0,o.cn)("inline-flex items-center justify-center font-medium rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",tertiary:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",link:"bg-transparent text-blue-600 hover:text-blue-700 hover:underline focus:ring-blue-500"}[t],{small:"px-3 py-1.5 text-sm",medium:"px-4 py-2 text-sm",large:"px-6 py-3 text-base"}[a],n),...c,children:i})}},64269:(e,t,a)=>{a.d(t,{cn:()=>i});var r=a(2821),o=a(75889);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.QP)((0,r.$)(t))}},65229:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},70903:(e,t,a)=>{a.d(t,{u:()=>l});var r=a(19708),o=a(14585),i=a(37168);let n="media";class l{static async uploadMedia(e,t,a){try{let l,c=i.n.validateImageFile(e);if(!c.isValid)throw Error(c.error);let d=Date.now(),s="media-".concat(d,"-").concat(e.name);try{l=await i.n.uploadImage(e,"media/".concat(s))}catch(t){console.warn("Storage upload failed, using fallback:",t),l="https://via.placeholder.com/800x400/3B82F6/FFFFFF?text=".concat(encodeURIComponent(e.name))}return(await (0,r.gS)((0,r.rJ)(o.db,n),{name:t.name||e.name,url:l,type:e.type.startsWith("image/")?"image":e.type.startsWith("video/")?"video":"document",size:e.size,alt:t.alt||"",caption:t.caption||"",uploadedBy:a,isPublic:t.isPublic,uploadedAt:(0,r.O5)(),createdAt:(0,r.O5)(),updatedAt:(0,r.O5)()})).id}catch(e){throw console.error("Upload media error:",e),Error("Erro ao fazer upload do arquivo")}}static async getMediaLibrary(){try{let e=(0,r.P)((0,r.rJ)(o.db,n),(0,r.My)("uploadedAt","desc"));return(await (0,r.GG)(e)).docs.map(e=>{var t,a,r;let o=e.data();return{id:e.id,name:o.name||"",url:o.url||"",type:o.type||"image",size:o.size||0,uploadedAt:(null==(t=o.uploadedAt)?void 0:t.toDate())||new Date,createdAt:(null==(a=o.createdAt)?void 0:a.toDate())||new Date,updatedAt:(null==(r=o.updatedAt)?void 0:r.toDate())||new Date,alt:o.alt||"",caption:o.caption||"",uploadedBy:o.uploadedBy||"",isPublic:o.isPublic||!1}})}catch(e){throw console.error("Get media library error:",e),Error("Erro ao buscar biblioteca de m\xeddia")}}static async getMediaById(e){try{var t,a,i;let l=await (0,r.x7)((0,r.H9)(o.db,n,e));if(!l.exists())return null;let c=l.data();return{id:l.id,...c,uploadedAt:(null==(t=c.uploadedAt)?void 0:t.toDate())||new Date,createdAt:(null==(a=c.createdAt)?void 0:a.toDate())||new Date,updatedAt:(null==(i=c.updatedAt)?void 0:i.toDate())||new Date}}catch(e){throw console.error("Get media by ID error:",e),Error("Erro ao buscar arquivo de m\xeddia")}}static async updateMediaMetadata(e,t){try{await (0,r.mZ)((0,r.H9)(o.db,n,e),{...t,updatedAt:(0,r.O5)()})}catch(e){throw console.error("Update media metadata error:",e),Error("Erro ao atualizar metadados do arquivo")}}static async deleteMedia(e){try{let t=await this.getMediaById(e);if(!t)throw Error("Arquivo n\xe3o encontrado");await i.n.deleteImage(t.url),await (0,r.kd)((0,r.H9)(o.db,n,e))}catch(e){throw console.error("Delete media error:",e),Error("Erro ao excluir arquivo")}}static async searchMedia(e){try{let t=(0,r.P)((0,r.rJ)(o.db,n),(0,r._M)("name",">=",e),(0,r._M)("name","<=",e+"ï£¿"),(0,r.My)("name"));return(await (0,r.GG)(t)).docs.map(e=>{var t,a,r;let o=e.data();return{id:e.id,name:o.name||"",url:o.url||"",type:o.type||"image",size:o.size||0,uploadedAt:(null==(t=o.uploadedAt)?void 0:t.toDate())||new Date,createdAt:(null==(a=o.createdAt)?void 0:a.toDate())||new Date,updatedAt:(null==(r=o.updatedAt)?void 0:r.toDate())||new Date,alt:o.alt||"",caption:o.caption||"",uploadedBy:o.uploadedBy||"",isPublic:o.isPublic||!1}})}catch(e){throw console.error("Search media error:",e),Error("Erro ao buscar arquivos")}}static async getMediaByType(e){try{let t=(0,r.P)((0,r.rJ)(o.db,n),(0,r._M)("type","==",e),(0,r.My)("uploadedAt","desc"));return(await (0,r.GG)(t)).docs.map(e=>{var t,a,r;let o=e.data();return{id:e.id,name:o.name||"",url:o.url||"",type:o.type||"image",size:o.size||0,uploadedAt:(null==(t=o.uploadedAt)?void 0:t.toDate())||new Date,createdAt:(null==(a=o.createdAt)?void 0:a.toDate())||new Date,updatedAt:(null==(r=o.updatedAt)?void 0:r.toDate())||new Date,alt:o.alt||"",caption:o.caption||"",uploadedBy:o.uploadedBy||"",isPublic:o.isPublic||!1}})}catch(e){throw console.error("Get media by type error:",e),Error("Erro ao buscar arquivos por tipo")}}static async getPublicMedia(){try{let e=(0,r.P)((0,r.rJ)(o.db,n),(0,r._M)("isPublic","==",!0),(0,r.My)("uploadedAt","desc"));return(await (0,r.GG)(e)).docs.map(e=>{var t,a,r;let o=e.data();return{id:e.id,name:o.name||"",url:o.url||"",type:o.type||"image",size:o.size||0,uploadedAt:(null==(t=o.uploadedAt)?void 0:t.toDate())||new Date,createdAt:(null==(a=o.createdAt)?void 0:a.toDate())||new Date,updatedAt:(null==(r=o.updatedAt)?void 0:r.toDate())||new Date,alt:o.alt||"",caption:o.caption||"",uploadedBy:o.uploadedBy||"",isPublic:o.isPublic||!1}})}catch(e){throw console.error("Get public media error:",e),Error("Erro ao buscar arquivos p\xfablicos")}}static async getMediaStats(){try{let e=(await (0,r.GG)((0,r.rJ)(o.db,n))).docs.map(e=>({id:e.id,...e.data()})),t=e.reduce((e,t)=>e+(t.size||0),0),a=e.filter(e=>"image"===e.type).length,i=e.filter(e=>"video"===e.type).length,l=e.filter(e=>"document"===e.type).length;return{totalFiles:e.length,totalSize:t,imagesCount:a,videosCount:i,documentsCount:l}}catch(e){throw console.error("Get media stats error:",e),Error("Erro ao buscar estat\xedsticas de m\xeddia")}}static formatFileSize(e){if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}static async cleanupOrphanedFiles(){try{console.log("Cleanup orphaned files should be implemented as a Cloud Function")}catch(e){throw console.error("Cleanup orphaned files error:",e),Error("Erro ao limpar arquivos \xf3rf\xe3os")}}}},89715:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])}}]);